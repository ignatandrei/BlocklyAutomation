{"version":3,"file":"main.js","mappings":"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D;;;;;;;;;;;;;;;ACHA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,6BAA6B;AAC7B,uCAAuC,8BAA8B,oCAAoC;AACzG,oCAAoC;AACpC,wDAAwD;AACxD;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF,oCAAoC,6CAA6C,2BAA2B,MAAM,iBAAiB;AACnI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF,sCAAsC,0BAA0B;AAChE;AACA;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA;AACA,EAAE;AACF,kCAAkC,oDAAoD;AACtF,mBAAmB,yIAAyI;AAC5J;AACA,mBAAmB;AACnB;AACA,mCAAmC,0CAA0C;AAC7E;AACA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA,qBAAqB;AACrB;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB,iBAAiB;AACxC;AACA;;AAEA;AACA;;AAEA;;AAEA,UAAU,gBAAgB;;AAE1B;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,kBAAkB;AAC/C;AACA;AACA,qBAAqB;AACrB;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,EAAE;AACF,8BAA8B,qBAAqB;AACnD;AACA;AACA;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,cAAc,sBAAsB;AACpC;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA,mCAAmC,MAAM;AACzC;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,mCAAmC,MAAM;AACzC;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,CAAC;;AAED;AACA,yCAAyC,wEAAwE;AACjH,yCAAyC,wEAAwE;AACjH,yCAAyC,wEAAwE;AACjH,yCAAyC,0EAA0E;AACnH,yCAAyC,2EAA2E;AACpH,yCAAyC,0EAA0E;AACnH,yCAAyC,0EAA0E;AACnH,yCAAyC,0EAA0E;AACnH,yCAAyC,4EAA4E;AACrH,yCAAyC;AACzC;;AAEA;AACA;AACA,sBAAsB,eAAe;AACrC;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,sBAAsB,YAAY;AAClC,2CAA2C,8BAA8B;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,sBAAsB,eAAe;AACrC,sBAAsB,WAAW;AACjC;;AAEA;AACA;AACA,0CAA0C;AAC1C,8CAA8C;AAC9C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,mBAAmB,oBAAoB,OAAO;AAC9C;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,sBAAsB,eAAe;AACrC,sBAAsB,WAAW;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;AC7VD;AACA;AACA;AACA;;AAEA,cAAc,8BAA8B,EAAE,iCAAiC,EAAE,0BAA0B;AAC3G,WAAW,2BAA2B,EAAE,6BAA6B,EAAE,6BAA6B;;AAEpG;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACzBA,gBAAgB,mBAAO,CAAC,uBAAY;AACpC,sBAAsB;AACtB;AACA;AACA;AACA,sCAAsC,kBAAkB,iBAAiB;AACzE;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;;;;;;;;;ACZA,eAAe,mBAAO,CAAC,mBAAS;;AAEhC,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,cAAc,MAAM,YAAY,OAAO,cAAc;AACzE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iCAAiC,kBAAkB,IAAI,GAAG,EAAE,oBAAoB,GAAG,kBAAkB,kBAAkB,IAAI;AAC3H;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,0BAA0B,YAAY;AACtC;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,cAAc;AAClC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,cAAc;AACnC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,oBAAoB;AAChD;AACA;AACA;AACA;;;AAGA;;;AAGA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;;AAGA;;AAEA;AACA;;;;;;;;;;AC3MA;AACA;;AAEA;AACA;AACA,eAAe,mBAAO,CAAC,mBAAS;AAChC;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACxCA,wBAAwB;AACxB;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0FAA0F;AAC1F;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AC9CA;AACA;;AAEA;AACA;;AAEA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACjFA,eAAe,mBAAO,CAAC,mBAAS;;AAEhC;AACA;;AAEA;AACA;AACA,wBAAwB;;;AAGxB;AACA,sCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,WAAW,QAAQ,eAAe,eAAe,UAAU,EAAE,cAAc,YAAY,kBAAkB,iBAAiB,+CAA+C,oBAAoB,YAAY,qBAAqB,KAAK;AACxQ;AACA;AACA;;;AAGA;;AAEA,gBAAgB;AAChB;AACA;AACA;;;;;;;;;;ACrEA;AACA;;AAEA;AACA;;AAEA,eAAe,mBAAO,CAAC,mBAAS;AAChC,CAAC,wBAAwB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACtEA;AACA;;AAEA;AACA;;AAEA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;;;;;;;;;ACvFA;AACA;;AAEA;AACA;;AAEA,cAAc,mBAAO,CAAC,mBAAS;AAC/B;AACA,wBAAwB;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,WAAW;AAC9C;AACA;AACA;AACA;AACA;AACA,uCAAuC,aAAa;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,aAAa,IAAI,gBAAgB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,mBAAmB,IAAI,gBAAgB,OAAO,mBAAmB;AACnF;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,wBAAwB,sBAAsB;AAC9C;AACA;AACA,+BAA+B,UAAU,KAAK,WAAW;AACzD;AACA,wBAAwB,EAAE,gBAAgB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,sCAAsC;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,wBAAwB;AAClD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,qBAAqB;AAC/C;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,wBAAwB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,qBAAqB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;AC9YA;AACA;;AAEA;AACA;AACA,eAAe,mBAAO,CAAC,mBAAS;;;AAGhC,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,iDAAiD,kBAAkB;AACnE;AACA;AACA,iDAAiD,gBAAgB;AACjE;AACA;AACA,iDAAiD,iBAAiB;AAClE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;;AAEA,gBAAgB;AAChB;AACA;;;;;;;;;;;;ACxEA;AACA;;AAEA;AACA;;AAEA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACzCA,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;;;;;;;;;ACtTA;AACA;;AAEA;AACA;AACA,eAAe,mBAAO,CAAC,mBAAS;;AAEhC,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,+CAA+C;AAC/C,iCAAiC,uDAAuD,iCAAiC,iCAAiC,WAAW;AACrK;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,QAAQ,OAAO,yBAAyB,oBAAoB,OAAO,SAAS;AACpH,qCAAqC,OAAO,SAAS,gCAAgC,EAAE;AACvF,qCAAqC,OAAO,SAAS,iDAAiD,EAAE;AACxG,qCAAqC,OAAO,SAAS,2CAA2C,EAAE;AAClG,qCAAqC,UAAU,qBAAqB,SAAS,kBAAkB,sDAAsD;AACrJ,gEAAgE;AAChE,uDAAuD,OAAO,iDAAiD,iCAAiC,iCAAiC,UAAU;AAC3L;AACA,gBAAgB;AAChB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA,sBAAsB,WAAW;AACjC;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACzJA;AACA;;AAEA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uGAAuG;AACvG;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACzDA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,kDAAkD,UAAU,wCAAwC,2BAA2B;AAChK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,kDAAkD,UAAU,oCAAoC,4BAA4B;AAC7J;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,kDAAkD,UAAU,yDAAyD,qBAAqB;AACzK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;ACzKA,cAAc,mBAAO,CAAC,mBAAS;AAC/B,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sEAAsE,2BAA2B,MAAM,mBAAmB;AAC1H;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,0BAA0B,GAAG,sBAAsB;AAClF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACjIA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,mBAAO,CAAC,4BAAiB;AAC1C,gBAAgB,mBAAO,CAAC,2BAAgB;AACxC,cAAc,mBAAO,CAAC,yBAAc;AACpC,aAAa,mBAAO,CAAC,wBAAa;AAClC,cAAc,mBAAO,CAAC,yBAAc;AACpC,aAAa,mBAAO,CAAC,uBAAa;AAClC,oBAAoB,mBAAO,CAAC,+BAAoB;AAChD,mBAAmB,mBAAO,CAAC,8BAAmB;AAC9C,sBAAsB,mBAAO,CAAC,iCAAsB;AACpD,oBAAoB,mBAAO,CAAC,+BAAoB;AAChD,qBAAqB,mBAAO,CAAC,gCAAqB;AAClD,cAAc,mBAAO,CAAC,yBAAc;AACpC,gBAAgB,mBAAO,CAAC,2BAAgB;AACxC,eAAe,mBAAO,CAAC,0BAAe;AACtC,gBAAgB,mBAAO,CAAC,2BAAgB;AACxC,oBAAoB,mBAAO,CAAC,+BAAoB;AAChD,cAAc,mBAAO,CAAC,yBAAc;AACpC,eAAe,mBAAO,CAAC,0BAAe;AACtC,cAAc,mBAAO,CAAC,yBAAc;AACpC,YAAY,mBAAO,CAAC,uBAAY;AAChC,cAAc,mBAAO,CAAC,yBAAc;;AAEpC;;;;;;;;;;AChCA;AACA;;AAEA;AACA;AACA,gBAAgB,mBAAO,CAAC,mBAAS;AACjC;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F;AAC5F;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;AClFA,cAAc,mBAAO,CAAC,mBAAS;AAC/B,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,kDAAkD,UAAU;AACjF;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;ACxHA,wBAAwB;AACxB;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,yBAAyB;AAChD,0BAA0B,mCAAmC,6BAA6B;AAC1F,uBAAuB,gCAAgC;;AAEvD;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACxCA;AACA;;AAEA;AACA;;AAEA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;;AAEA;;AAEA,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;ACrEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAtB,wBAAA,GAAyB,UAAS+H,gCAAT,EAA0CC,UAA1C,EAAqD;AAC1ED,EAAAA,gCAAgC,CAAC,CAAC;AAClC,YAAQ,cAD0B;AAElC,gBAAY,kBAFsB;AAGlC,aAAS,CAAC;AACR,cAAQ,cADA;AAER,cAAQ,SAFA;AAGR,aAAO,CAHC;AAIR,aAAO,GAJC;AAKR,eAAS;AALD,KAAD,CAHyB;AAUlC,yBAAqB,IAVa;AAWlC,qBAAiB,IAXiB;AAYlC,cAAU;AAZwB,GAAD,CAAD,CAAhC;AAeF;AACF;AACA;AACA;;AACEC,EAAAA,UAAU,CAAC,cAAD,CAAV,GAA6B,UAASvR,KAAT,EAAgB;AAC3C,QAAIwR,OAAO,GAAGC,MAAM,CAACzR,KAAK,CAAC0R,aAAN,CAAoB,SAApB,CAAD,CAApB;AACA,QAAI/Z,IAAI,GAAG,oBAAoB6Z,OAApB,GAA8B,MAAzC;AACA,WAAO7Z,IAAP;AACD,GAJD;AAKD,CAzBD;AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA4R,gBAAA,GAAiB,YAAU;AACzB,SAAQ;AACV;AACA,CAFE;AAGD,CAJD;;;;;;;;;;ACzDA,eAAe,mBAAO,CAAC,mBAAS;;AAEhC,wBAAwB;AACxB;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,qDAAqD;AAC3E,eAAe;AACf;AACA,eAAe;AACf,2DAA2D;AAC3D,gBAAgB;AAChB,kEAAkE;AAClE,wBAAwB,0DAA0D,EAAE;AACpF,qDAAqD;AACrD,2FAA2F;AAC3F,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iCAAiC,iCAAiC,iCAAiC,WAAW;AACzI;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,uDAAuD,iCAAiC,iCAAiC,WAAW;AACpK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,yDAAyD,iCAAiC,iCAAiC,WAAW;AACtK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,sDAAsD,iCAAiC,iCAAiC,WAAW;AACnK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","sources":["./src/app/AppDetails.ts","./src/app/DemoBlocks.ts","./src/app/LocalApi.ts","./src/app/Settings.ts","./src/app/TransmitAction.ts","./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/blockly-studio/blockly-studio.component.ts","./src/app/blockly-studio/blockly-studio.component.html","./src/app/display-blockly/display-blockly.component.ts","./src/app/display-blockly/display-blockly.component.html","./src/app/display-blockly/tabulator.ts","./src/app/find-saved-blocks/find-saved-blocks.component.ts","./src/app/find-saved-blocks/find-saved-blocks.component.html","./src/app/load-show-usage.service.ts","./src/app/primary-navig/primary-navig.component.ts","./src/app/primary-navig/primary-navig.component.html","./src/environments/environment.ts","./src/main.ts","../BlocklyHelpers/index.js","../BlocklyHelpers/interpreterHelper.js","../BlocklyHelpers/js/audioTest.js","../BlocklyHelpers/saveBlocksUrl.js","../BlocklyHelpers/saveLoad.js","../BlocklyScripts/HTMLBlocks.js","../BlocklyScripts/TTSBlock.js","../BlocklyScripts/WindowsCreds.js","../BlocklyScripts/auth0Blocks.js","../BlocklyScripts/chartBlock.js","../BlocklyScripts/commentBlock.js","../BlocklyScripts/convertersBlocks.js","../BlocklyScripts/createObjectBlocks.js","../BlocklyScripts/currentDateBlock.js","../BlocklyScripts/dateFromTextBlock.js","../BlocklyScripts/defaultBlocks.js","../BlocklyScripts/emailBlocks.js","../BlocklyScripts/exportfileBlock.js","../BlocklyScripts/filterBlocks.js","../BlocklyScripts/guiBlocks.js","../BlocklyScripts/index.js","../BlocklyScripts/pianoBlock.js","../BlocklyScripts/propBlocks.js","../BlocklyScripts/tryCatchFinBlock.js","../BlocklyScripts/waitBlocks.js","../BlocklyScripts/wait_block.js","../BlocklyScripts/xhrBlocks.js","../BlocklySwagger/blocklySwaggerData.js","../BlocklySwagger/index.js","../BlocklySwagger/parseSwagger.js","ignored|/home/runner/work/BlocklyAutomation/BlocklyAutomation/src/node_modules/object-inspect|./util.inspect"],"sourcesContent":["import { HttpClient } from \"@angular/common/http\";\nimport { Injectable } from \"@angular/core\";\nimport {   forkJoin, from, merge, Observable, of, zip} from \"rxjs\";\nimport { delay, map,  tap ,switchMap,zipAll, switchMapTo, catchError} from 'rxjs/operators';\nimport { DemoBlocks } from \"./DemoBlocks\";\nimport { LinksSwagger } from \"./LinksSwagger\";\nimport { LoadShowUsageService } from \"./load-show-usage.service\";\nimport { Settings } from \"./Settings\";\nimport * as SwaggerParser from '@blockly/blocklyswagger';\nimport { LocalAPI } from \"./LocalApi\";\n\n\n@Injectable()\nexport class AppDetails {\n  constructor(private http: HttpClient, private loadShowUsageService:LoadShowUsageService) {\n    this.Init();\n  \n  }\n  public settings:Settings|null= null;\n  public linksSwagger:LinksSwagger[]=[];\n  public demoBlocks:DemoBlocks[]=[];\n  public swaggersDict: Map<string, any> = new Map<string, any>();\n  public customCategories: string='';\n  public LocalAPI: LocalAPI| null=null;\n  public CreateLocalApis( http : HttpClient , url: string): LocalAPI {\n    return new LocalAPI(url, http); \n  }\n\n  Init(): Observable<string> {\n\n    return zip(\n        this.getSettings(), \n        this.loadShowUsageService.getSwaggerLinks(), \n        this.loadShowUsageService.getDemoBlocks(),\n        this.loadShowUsageService.getCustomCategories(),\n        this.getLatestVersion()\n    \n        )\n\n        .pipe(\n            delay(1000),\n            tap(([settings, links, demoBlocks, categs, lv]) => {                \n                this.settings = settings;\n                this.settings.latestVersion=lv;\n                this.linksSwagger = links;\n                this.demoBlocks = demoBlocks.map(it=>{\n                  var n= new DemoBlocks(it);\n                  n.Source = \"Demos\";\n                  return n;\n                });\n                \n                this.customCategories = categs;\n                this.LocalAPI= this.CreateLocalApis(this.http, this.settings.localAPI);\n                //console.log('settings loaded', this.customCategories);\n                this.LocalAPI.IsAlive().subscribe(it=>\n                  {\n                    console.log('LocalAPI is alive', it);\n                  })\n            })\n            ,\n            switchMap(() => \n            {\n              return this.obtainSwaggers(this.linksSwagger);\n              \n            })\n            ,\n            switchMap(() => of(\"\"))\n\n        );\n        \n  }\n  obtainSwaggers(l :LinksSwagger[] ): Observable<LinksSwagger[]> {\n\n    var allSwaggers= l.map(link => this.LoadSwaggersFromUrl(link));\n    var arr= forkJoin(allSwaggers);\n    return arr;\n  }\nLoadSwaggersFromUrl(l:LinksSwagger): Observable<any> {\n    var cacheUrl = l.link;\n    var name= l.id || l.link;\n    var parser = new SwaggerParser.parseData(cacheUrl);\n    var api= from(parser.ParseSwagger() as Promise<any>)\n      .pipe(tap((it:any)=>{\n        console.log('swagger loaded:' +cacheUrl, it);\n        it.name = name;\n        this.swaggersDict.set(cacheUrl, it);\n      }\n      ,(err:any)=>{\n        console.error('swagger error:' +cacheUrl, err);\n      }\n      )      \n      );\n    ;\n\n    return api;\n\n}\ngetLatestVersion(): Observable<string> {\n  //var dt=new Date().toISOString();  \n  return this.http.get<string>(`https://ignatandrei.github.io/BlocklyAutomation/version.txt`,{ responseType: 'text' as 'json'})\n    .pipe(\n      \n    catchError(err => {\n      console.error('error getting latest version', err);\n      return of('v'+\"cannot get latest version\");\n    }\n      )\n      ,\n      map((res: any) => {\n          return res.toString().trim().substr(1);//remove first char v\n      }\n    )\n    )  \n}\ngetSettings(): Observable<Settings> {\n    var dt=new Date().toISOString();\n    return this.http.get<string>(`assets/settings.json?${dt}`,{ responseType: 'text' as 'json'})\n    .pipe(\n\n      map((res: any) => {\n          \n          var data:Settings= JSON.parse(res);\n          return data;\n    })\n    )\n    ;\n  }\n\n}\n\n\n","type BlockSource =\n  | \"None\"\n  | \"Demos\"\n  | \"Download\"\n  | \"LocalAPI\"\n  | \"Cloud\"\n  \n  export class DemoBlocks {\n  constructor(data: Partial<DemoBlocks> = {}) {\n    Object.assign(this, data)\n  }\n  public id: string = '';\n  public description: string = \"\";\n  public categories: string = \"\";\n  public blocks: string = \"\";\n  public Source: BlockSource = \"None\";\n}\n","import { HttpClient } from \"@angular/common/http\";\nimport { catchError, map, Observable, of } from \"rxjs\";\nimport { DemoBlocks } from \"./DemoBlocks\";\n\nexport class LocalAPI{\n    constructor(public urL:string, private http: HttpClient){\n\n    }\n    public WasAlive: boolean = false;\n    public download(){\n        window.location.href='https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLocalAPI.zip';\n    }\n    public IsAlive(): Observable<boolean> {\n        this.WasAlive = false;\n        var self=this;        \n        var dt=new Date().toISOString();\n        return this.http.get<string>(this.urL + `api/v1/Management/CurrentDate?${dt}`,{ responseType: 'text' as 'json'})\n            .pipe(\n                catchError((err)=> of('')),\n                map(res => {\n                    if(res?.length>0){\n                        var dt=Date.parse(res);\n                        //console.log(dt);\n                        self.WasAlive = true;\n                        return true;\n                    }\n                    return false;\n                }\n                ),\n            )\n        ;\n    }\n    public LoadBlockContent(id: string): Observable<string>{\n        var dt=new Date().toISOString();\n        return this.http.post<string>(this.urL + `api/v1/BASave/GetBlocksContent`,{id:id},{responseType:'text'as 'json'})\n        .pipe(\n            map(it=>it?.toString())\n        );\n\n    }\n    public LoadBlocks():Observable<DemoBlocks[]>{\n        var dt=new Date().toISOString();\n        return this.http.post<DemoBlocks[]>(this.urL + `api/v1/BASave/GetBlocks`,null)\n        .pipe(\n            map(it=>{\n                var q= it.map(d=>{\n                    var n=new DemoBlocks(d);\n                    n.Source= \"LocalAPI\";\n                    return n;\n                });\n                return q;\n            })\n        )\n        \n    }\n\n    public SaveBlock(db:DemoBlocks, content: string):Observable<number>{\n        \n        return this.http.post<string>(this.urL + 'api/v1/BASave/SaveNewBlock',{b: db,content:content},{ responseType: 'text' as 'json'})\n        .pipe(map(res=>Number.parseInt(res?.toString(),10)));\n\n        \n    }\n}","import { TourSteps } from \"./TourSteps\";\n\n\nexport class Settings {\n    public title: string = '';\n    public footer: string = '';\n    public static version: string = '2021.12.22.1612';\n    public startBlocks: string[] = [];\n    public tourSteps: TourSteps[] = [];\n    public latestVersion: string = '';\n    public localAPI: string = '';\n}\n","import { Injectable } from \"@angular/core\";\nimport { Observable, Subject } from \"rxjs\";\n\n\n@Injectable()\nexport class TransmitAction {\n    private sendData: Subject<[string,string]>=  new Subject<[string,string]>();\n    receiveData(): Observable<[string,string]> {\n        return this.sendData.asObservable();\n    }\n\n    sendDataToServer(toComponent: string, func:string) {\n        let tuple :[string,string]=[toComponent,func];\n\n        this.sendData.next(tuple);\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { BlocklyStudioComponent } from './blockly-studio/blockly-studio.component';\nimport { DisplayBlocklyComponent } from './display-blockly/display-blockly.component';\n\nconst routes: Routes = [\n  { path: '', redirectTo: 'automation/main', pathMatch: 'full' },\n  { path: 'automation/main', component:DisplayBlocklyComponent },\n  { path: 'automation/studio', component:BlocklyStudioComponent },\n  { path: 'automation/loadexample/:demoblock', component:DisplayBlocklyComponent }\n\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component } from '@angular/core';\n// import * as b from '@blockly/blocklyscripts';\nimport { Title } from '@angular/platform-browser';\nimport { AppDetails } from './AppDetails';\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'AutoBlocklyApp';\n  constructor(private titleService : Title, appDetails: AppDetails) {\n    console.log(appDetails.settings?.title);\n    this.titleService.setTitle((appDetails.settings?.title||''));\n  }\n}\n","<app-primary-navig></app-primary-navig>","import { APP_INITIALIZER, NgModule } from '@angular/core';\nimport { FormsModule , ReactiveFormsModule} from '@angular/forms';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { DisplayBlocklyComponent } from './display-blockly/display-blockly.component';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { HttpClientModule } from '@angular/common/http'\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport {MatAutocompleteModule} from '@angular/material/autocomplete';\nimport {MatBadgeModule} from '@angular/material/badge';\nimport {MatBottomSheetModule} from '@angular/material/bottom-sheet';\nimport {MatButtonModule} from '@angular/material/button';\nimport {MatButtonToggleModule} from '@angular/material/button-toggle';\nimport {MatCardModule} from '@angular/material/card';\nimport {MatCheckboxModule} from '@angular/material/checkbox';\nimport {MatChipsModule} from '@angular/material/chips';\nimport {MatStepperModule} from '@angular/material/stepper';\nimport {MatDatepickerModule} from '@angular/material/datepicker';\nimport {MatDialogModule, MatDialogRef, MAT_DIALOG_DATA} from '@angular/material/dialog';\nimport {MatDividerModule} from '@angular/material/divider';\nimport {MatExpansionModule} from '@angular/material/expansion';\nimport {MatGridListModule} from '@angular/material/grid-list';\nimport {MatIconModule} from '@angular/material/icon';\nimport {MatInputModule} from '@angular/material/input';\nimport {MatListModule} from '@angular/material/list';\nimport {MatMenuModule} from '@angular/material/menu';\nimport {MatNativeDateModule, MatRippleModule} from '@angular/material/core';\nimport {MatPaginatorModule} from '@angular/material/paginator';\nimport {MatProgressBarModule} from '@angular/material/progress-bar';\nimport {MatProgressSpinnerModule} from '@angular/material/progress-spinner';\nimport {MatRadioModule} from '@angular/material/radio';\nimport {MatSelectModule} from '@angular/material/select';\nimport {MatSliderModule} from '@angular/material/slider';\nimport {MatSlideToggleModule} from '@angular/material/slide-toggle';\nimport {MatSnackBarModule} from '@angular/material/snack-bar';\nimport {MatSortModule} from '@angular/material/sort';\nimport {MatTableModule} from '@angular/material/table';\nimport {MatTabsModule} from '@angular/material/tabs';\nimport {MatTooltipModule} from '@angular/material/tooltip';\nimport {MatTreeModule} from '@angular/material/tree';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { PrimaryNavigComponent } from './primary-navig/primary-navig.component';\nimport { AppDetails } from './AppDetails';\nimport { Observable, ObservableLike } from 'rxjs';\nimport { MonacoEditorModule } from 'ngx-monaco-editor';\nimport { TransmitAction } from './TransmitAction';\nimport { BlocklyStudioComponent } from './blockly-studio/blockly-studio.component';\nimport { FindSavedBlocksComponent } from './find-saved-blocks/find-saved-blocks.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    DisplayBlocklyComponent,\n    PrimaryNavigComponent,\n    BlocklyStudioComponent,\n    FindSavedBlocksComponent,\n  ],\n  imports: [\n\n    BrowserModule,\n    AppRoutingModule,\n    FormsModule,\n    ReactiveFormsModule,\n    BrowserAnimationsModule,\n    MatSliderModule,\n    MatButtonModule,\n    HttpClientModule,\n    MatAutocompleteModule,\n    MatBadgeModule,\n    MatBottomSheetModule,\n    MatButtonModule,\n    MatButtonToggleModule,\n    MatCardModule,\n    MatCheckboxModule,\n    MatChipsModule,\n    MatStepperModule,\n    MatDatepickerModule,\n    MatDialogModule,\n    MatDividerModule,\n    MatExpansionModule,\n    MatGridListModule,\n    MatIconModule,\n    MatInputModule,\n    MatListModule,\n    MatMenuModule,\n    MatNativeDateModule,\n    MatPaginatorModule,\n    MatProgressBarModule,\n    MatProgressSpinnerModule,\n    MatRadioModule,\n    MatRippleModule,\n    MatSelectModule,\n    MatSidenavModule,\n    MatSliderModule,\n    MatSlideToggleModule,\n    MatSnackBarModule,\n    MatSortModule,\n    MatTableModule,\n    MatTabsModule,\n    MatToolbarModule,\n    MatTooltipModule,\n    MatTreeModule,\n    MatToolbarModule,\n    MatButtonModule,\n    MatSidenavModule,\n    MatIconModule,\n    MatListModule,\n    MonacoEditorModule.forRoot()\n\n  ],\n  providers: [  AppDetails,TransmitAction,\n  \n    { provide: APP_INITIALIZER,useFactory: initializeApp1, deps: [AppDetails], multi: true}],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n\n\nexport function initializeApp1(appDet: AppDetails) {\n  return (): Observable<string> => { \n    return appDet.Init();\n  }\n}\n\n","import { Component, OnInit ,AfterViewInit, Type, Injector, ComponentFactoryResolver, ComponentRef, ViewContainerRef, ViewChild, ViewChildren, QueryList} from '@angular/core';\nimport { DisplayBlocklyComponent } from '../display-blockly/display-blockly.component';\n\n@Component({\n  selector: 'app-blockly-studio',\n  templateUrl: './blockly-studio.component.html',\n  styleUrls: ['./blockly-studio.component.css']\n})\nexport class BlocklyStudioComponent implements OnInit,AfterViewInit {\n\n  data:number[]=[];\n  selectedTabIndex:number=0;\n\n  @ViewChildren('vcr', { read: ViewContainerRef }) components?:QueryList<ViewContainerRef>;\n \n  numbers:number[]=[0];\n\n  constructor(public fooInjector: Injector, private resolver: ComponentFactoryResolver) { \n    \n  }\n  addTab(){\n    // console.log('x',this.selectedTabIndex);\n    this.numbers.push(this.numbers.length);\n    // console.log('y',this.numbers.length-1);\n    this.selectedTabIndex=this.numbers.length-1;\n  }\n  changeSelected(index:number){\n    if(this.data.filter(it=>it == index).length>0)\n      return;\n    this.data.push(index);\n    this.loadBar(index).then((it)=>{\n      // console.log('loaded'+ it);\n    });\n  }\n  ngAfterViewInit(): void {\n    this.data.push(0);\n    this.loadBar(0).then((it)=>{\n      // console.log('loaded tab' +it);\n    });\n    \n  }\n  async loadBar(index:number): Promise<number> {\n    try{     \n     \n      const b = await import(`../display-blockly/display-blockly.component`);\n      const factory = this.resolver.resolveComponentFactory(b.DisplayBlocklyComponent);\n      var vcr=this.components?.get(index);\n      \n      if(vcr != null)\n        ( vcr.createComponent(factory));\n    \n    }\n    catch(e){\n      console.error(\"loading\"+index,e);\n    }\n    return index;\n  }\n  ngOnInit(): void {\n\n  }\n\n}\n","<button mat-icon-button color=\"primary\" (click)=\"addTab()\" ><mat-icon>add_circle</mat-icon></button>\n\n<mat-tab-group (selectedIndexChange)=\"changeSelected($event)\" [selectedIndex]=\"selectedTabIndex\">\n\n    <mat-tab *ngFor=\"let number of numbers\" [label]=\"'W:'+(number+1)\">  \n        <ng-template mat-tab-label>\n            <mat-icon aria-hidden=\"false\" *ngIf=\"number<10\" > filter_{{number+1}}</mat-icon>\n            <span *ngIf=\"number>9\">W:{{number+1}</span>\n        </ng-template>\n            <ng-template #vcr></ng-template>      \n    </mat-tab>\n \n  </mat-tab-group>\n\n  <button mat-raised-button color=\"primary\"  (click)=\"addTab()\" >Add</button>","import {\n  AfterViewInit,\n  Component,\n  OnInit,\n  setComponentScope,\n} from '@angular/core';\nimport * as Blockly from 'blockly';\nimport * as BlocklyJavaScript from 'blockly/javascript';\nimport {ContentHighlight} from '@blockly/workspace-content-highlight';\nimport * as acorn from 'acorn';\nimport * as bs from '@blockly/blocklyscripts';\nimport * as bh from '@blockly/blocklyhelpers';\nimport { TabulatorHelper } from './tabulator';\nimport { LoadShowUsageService } from '../load-show-usage.service';\nimport { DemoBlocks } from '../DemoBlocks';\nimport * as SwaggerParser from '@blockly/blocklyswagger';\n// import { firstValueFrom } from 'rxjs/operators';\nimport { ActivatedRoute } from '@angular/router';\ndeclare var Interpreter: any;\nimport { IntroJs } from 'intro.js';\nimport * as introJs from 'intro.js';\nimport { AppDetails } from '../AppDetails';\nimport { TourSteps } from '../TourSteps';\nimport { TransmitAction } from '../TransmitAction';\nimport { MatSnackBar } from '@angular/material/snack-bar';\n// import { Chart , registerables } from 'chart.js';\nimport Chart from 'chart.js/auto';\nimport { catchError, fromEvent, throwError } from 'rxjs';\nimport { MatDialog } from '@angular/material/dialog';\nimport { FindSavedBlocksComponent } from '../find-saved-blocks/find-saved-blocks.component';\nimport { error } from '@angular/compiler/src/util';\nenum ShowCodeAndXML{\n  ShowNone=0,\n  ShowBlocksDefinition=1,\n  ShowXML=2,\n  ShowOutput=3,\n  ShowCode=4,\n  Stop=  100\n}\n@Component({\n  selector: 'app-display-blockly',\n  templateUrl: './display-blockly.component.html',\n  styleUrls: ['./display-blockly.component.css'],\n})\nexport class DisplayBlocklyComponent implements OnInit,AfterViewInit {\n\n\n  //monaco settings\n  editorXMLOptions = {theme: 'vs-dark', language: 'xml'};\n  editorJSOptions = {theme: 'vs-dark', language: 'javascript', lineNumbers: 'on'};\n  editorPlain = {theme: 'vs-dark', language: 'plaintext', lineNumbers: 'on'};\n  \n  code: string= 'function x() {\\nconsole.log(\"Hello world!\");\\n}';\n  public showCodeAndXML: ShowCodeAndXML = ShowCodeAndXML.ShowNone;\n  public swaggerLoaded: number = 0;\n  public demoWorkspace: Blockly.WorkspaceSvg | null = null;\n  public run: any;\n  \n  public mustLoadDemoBlock: string = '';\n  // private directLinkDemo:string='';\n  private intro: IntroJs = introJs();\n  static id:number=0;\n  myId:number=0;\n  constructor(\n    private tabulator: TabulatorHelper,\n    public DetailsApp: AppDetails,\n    private loadDemo: LoadShowUsageService,\n    private ar: ActivatedRoute,\n    private ta :TransmitAction,\n    private snackBar: MatSnackBar,\n    public dialog: MatDialog\n  ) {\n\n    this.myId=++DisplayBlocklyComponent.id;\n//    console.log('x_',this.myId);\n    \n    //console.log(bs.filterBlocks.definitionBlocks());\n    this.ar.paramMap.subscribe((params: any) => {\n      this.mustLoadDemoBlock = params.get('demoblock');\n    });\n    this.ta.receiveData().subscribe(it=>{\n      if(it[0]=='DisplayBlocklyComponent'){\n        ((this as any)[it[1]] as any)();\n      }\n    });\n    this.DetailsApp.LocalAPI?.IsAlive().subscribe();\n  }\n  \n  createIntro() {\n    \n    var steps = this.DetailsApp.settings?.tourSteps.map((it: TourSteps) => {\n      return {\n        title: this.DetailsApp.settings?.title|| 'Blockly Automation',\n        intro: it.text,\n        element: document.querySelector(it.query) || undefined,\n      };\n    });\n    this.intro\n      \n      .setOptions({\n        exitOnEsc: true,\n        showStepNumbers: true,\n        showButtons: true,\n        doneLabel: 'Exit',\n        skipLabel: 'Skip',\n        showProgress:true,\n        steps: steps,\n      })\n      .start();\n  }\n  clearOutput() {\n    this.step = 0;\n    this.showInner = '';\n    this.tabulator.ClearDataGrid();\n    if(this.myChart !=null){\n      this.myChart.destroy();\n    };\n    var el=this.theHtmlOutput();\n    el.innerHTML = '';\n    this.fullHtmlData='';\n\n    el=this.theTextOutput();\n    el.innerText = '';\n    this.fullTextData='';\n\n\n    \n  }\n  fullTextData:string='';\n  ShowText(data: any){\n    if(data == null)\n      return;\n    var dt= data.toString();\n    this.fullTextData+=dt;\n    var el=this.theTextOutput();\n    el.innerText = this.fullTextData;\n  }\n  fullHtmlData:string='';\n  finishHTMLOutput(){\n    this.theHtmlOutput().innerHTML = this.fullHtmlData;\n  }\n  ShowHTML(data: any) {\n    if(data == null)\n      return;\n    var dt= data.toString();\n    this.fullHtmlData+=dt;\n    var el=this.theHtmlOutput();\n    el.innerHTML += dt;\n  }\n  public theHtmlOutput() : HTMLElement{\n    return document.getElementById('htmlOutput'+this.myId)!;\n  }\n  public theTextOutput() : HTMLElement{\n    return document.getElementById('htmlText'+this.myId)!;\n  }\n\n  myChart:Chart| null = null;\n  ShowChart(data: any){\n    var e:HTMLCanvasElement = (document.getElementById('barchart'+this.myId) as any)?.getContext('2d') as HTMLCanvasElement;\n    if(e == null)\n    {\n      console.log(\"not canvas available for chart!\");\n      return;\n    }\n    \n    \n      try{\n        var st=data?.toString();\n        var dt=JSON.parse(st);\n        if(dt && dt.type){\n          this.myChart = new Chart(e!, dt);\n          console.log('make chart',data);\n        }\n      }\n      catch(e){\n        //console.log(e);\n        this.myChart = null;\n      }\n    }\n    \n  //   this.myChart = new Chart(e!,\n  //   {\"type\":\"bar\",\"data\":\n  //   {\"labels\":[\"2019\",\"2018\",\"2017\",\"2016\",\"2015\",\"2014\",\"2013\"],\n    \n  //   \"datasets\":[{\"label\":\"Population\",\n  //   \"data\":[328239523/10000000,327167439/10000000,325719178/10000000,323127515/10000000,321418821/10000000,318857056/10000000,316128839/10000000]}]}\n  // });\n  \n  step: number = 0;\n  RunCode() {\n    \n    this.snackBar.open('Program start', 'Executing...');\n    var self = this;\n    var code=this.run.latestCode;\n    var jsCode=this.showJSCode;\n    self.CalculateXMLAndCode();\n    var f = (latestCode: string, initApi: any) => {\n      try {\n        return new Interpreter(latestCode, initApi);\n      } catch (e) {\n        self.CalculateXMLAndCode();\n        window.alert(\n          'please copy the left output and report there is an error at ' +\n            JSON.stringify(e)\n        );\n        this.showCodeAndXML = ShowCodeAndXML.ShowCode;\n      }\n    };\n    this.run = bh.interpreterHelper.createInterpreter(\n      this.demoWorkspace,\n      BlocklyJavaScript\n    );\n    this.clearOutput();\n    this.showCodeAndXML = ShowCodeAndXML.ShowOutput;\n    this.showInner = '{ \"step_start\": \"start program\",';\n    \n    // console.log('x',code);\n    // console.log('y',jsCode);\n    if(code !=  jsCode){\n      if(window.confirm('Do you want to run the code modified by you ?'))\n        code = jsCode;\n        this.showJSCode=jsCode;\n    }\n    this.run.runCode(\n      f,\n      (data: any) => {\n        // data = data?.toString()?.replace(/\\n/g, '')?.replace(/\\r/g, '');\n        self.step++;\n        self.showInner += `\\n           \n\"step_${self.step}\" : \"${data}\",`;\n        // console.log(`obtained ${data}`);\n        self.tabulator.AddDataToGrid(data);\n        self.ShowChart(data);\n        self.ShowHTML(data);\n        self.ShowText(data);\n      },\n      () => {\n        this.snackBar.open('Program end', 'Done!', {\n          duration: 3000\n        });\n        self.showInner += `\\n \"step_end\" : \"program executed; see results below\"\\n}`;\n        this.tabulator.FinishGrid();\n        this.finishHTMLOutput();\n      },\n      code\n    );\n  }\n  public ShowLocalAPI(id:string){\n    this.DetailsApp.LocalAPI?.LoadBlockContent(id).subscribe((data)=>{\n      var xml = Blockly.Xml.textToDom(data);\n      if (this.demoWorkspace != null) {\n        Blockly.Xml.clearWorkspaceAndLoadFromXml(xml, this.demoWorkspace);\n\n        window.alert('please press execute button');\n      };\n    });\n  }\n  public ShowDemo(id: string) {\n    this.mustLoadDemoBlock = id;\n    this.loadDemo.getDemoBlock(id).subscribe((data) => {\n      var xml = Blockly.Xml.textToDom(data);\n      if (this.demoWorkspace != null) {\n        Blockly.Xml.clearWorkspaceAndLoadFromXml(xml, this.demoWorkspace);\n\n        window.alert('please press execute button');\n      };\n    });\n  }\n  // swaggersUrl:string[]=[\n  //   'https://microservicesportchooser.azurewebsites.net/swagger/v1/swagger.json',\n  //   'https://netcoreblockly.herokuapp.com/swagger/v1/swagger.json',\n  //   'https://petstore.swagger.io/v2/swagger.json'\n\n  // ];\n  public swaggerData: any[] = [];\n\n  public registerSwaggerBlocksObjects(\n    demoWorkspace: Blockly.Workspace,\n    item: any\n  ): Element[] {\n    var xmlList: Element[] = [];\n    xmlList = item.fieldXMLObjects.map((it: any) => Blockly.Xml.textToDom(it));\n    // var cat='<category id=\"microservicesportchooserazurewebsitesnet\" name=\"microservicesportchooserazurewebsitesnet\"><block type=\"IRegister\"></block></category>';\n    // cat='<block type=\"IRegister\"></block>';\n    \n    // var block = Blockly.Xml.textToDom(cat);\n    // xmlList.push(block);\n    return xmlList;\n    // console.log(data);\n    // window.alert('a');\n    // var str= data.map((it:any)=>it.categSwagger().toString() as string);\n    // console.log(str);\n    // var ret= str.map((it:string)=> Blockly.Xml.textToDom(it));\n    // return ret;\n  }\n  public registerSwaggerBlocksAPIControllers(\n    demoWorkspace: Blockly.Workspace,\n    item: any,\n    controller: string\n  ): Element[] {\n    var xmlList: Element[] = [];\n    xmlList= item.findfieldXMLFunctions(controller)\n      .map((it: any) => Blockly.Xml.textToDom(it.gui));\n    return xmlList;\n  }\n  public registerSwaggerBlocksAPIAll(\n    demoWorkspace: Blockly.Workspace,\n    item: any\n  ): Element[] {\n    var xmlList: Element[] = [];\n    xmlList = item.fieldXMLFunctions.map((it: any) =>\n      Blockly.Xml.textToDom(it.gui)\n    );\n    return xmlList;\n  }\n  ngOnInit(): void {\n    //this.ShowBlocks();\n  }\n  ngAfterViewInit(): void {\n    this.StartRegister();\n    //this.createIntro();\n    fromEvent(window, 'TabDownload').subscribe(it=>this.tabulator.copyCSV());\n    fromEvent(window, 'TabCopy').subscribe(it=>this.tabulator.copyClip());\n  }\n  public ShowBlocks(){\n    const dialogRef = this.dialog.open(FindSavedBlocksComponent, {\n      //width: '250px',\n      //data: {name: this.name, animal: this.animal},\n    });\n\n    dialogRef.afterClosed().subscribe(result => {\n      console.log('The dialog was closed', result);\n      if(result){\n        var d= result as DemoBlocks ;\n        switch(d.Source){\n          case \"Demos\":\n            this.ShowDemo(result.id);\n            break;\n          case \"LocalAPI\":\n            this.ShowLocalAPI(result.id);\n            break;\n          default:\n            window.alert(d.Source);\n            break;   \n        }  \n        \n      }\n      \n    });\n  }\n  public LoadSwagger() {\n    //https://swagger-tax-calc-api.herokuapp.com/api-docs\n    //cors: https://humorapi.com/downloads/humorapi-openapi-3.json\n    var self=this;\n    var parser = new SwaggerParser.parseData(\"\");\n    var json = window.prompt(\"Swagger/OpenAPI ? \");\n    \n    if (!json) return;\n    if (json.endsWith('.html') || json.endsWith('.htm')) {\n      window.alert('Swagger should end with .json - see source of html page');\n      return;\n    }\n    //self.loadedCompletely=false;\n    self.LoadSwaggerFromUrl(json).then((api) => {\n      // this.afterTimeout(this);\n      if(api.hasError)\n      window.alert(\"error loading local api\");\n      else{\n        \n        self.addToToolboxSwagger(api,this);      \n        //self.loadedCompletely=true;\n        window.alert(\"loaded successfully\");\n      }\n    });\n    }\n    // var json = window.prompt(\n    //   'Swagger url? ',\n    //   'https://swagger-tax-calc-api.herokuapp.com/api-docs'\n    // );\n    // if (!json) return;\n    // if (json.endsWith('.html') || json.endsWith('.htm')) {\n    //   window.alert('Swagger should end with .json - see source of html page');\n    //   return;\n    // }\n    // this.LoadSwaggerFromUrl(json).then((it) => {\n    //   // this.afterTimeout(this);\n    //   this.addToToolboxSwagger(it,this);\n    //   window.alert('done');\n    // });\n  \n  public async LoadSwaggerFromUrl(url: string, name?: string): Promise<any> {\n    var parser = new SwaggerParser.parseData(url);\n    var api = await parser.ParseSwagger();\n\n    api.name = name || url;\n    if(!api.hasError)\n      return this.LoadSwaggerFromAPI(api); \n    else\n      return api;\n  }\n  LoadSwaggerFromAPI(api: any): any {\n    if(api.hasError){\n      console.error(\"error in swagger\", api);\n      return api;\n    }\n    this.swaggerData.push(api);\n    for (var i = 0; i < api.GenerateBlocks.length; i++) {\n      var e = api.GenerateBlocks[i];\n      e(Blockly.Blocks, BlocklyJavaScript);\n    }\n    for (var i = 0; i < api.GenerateFunctions.length; i++) {\n      var e = api.GenerateFunctions[i];\n      var image = function (opKey: string) {\n        var image = `assets/httpImages/${opKey}.png`;\n        return new Blockly.FieldImage(image, 90, 20, opKey);\n      };\n      e(Blockly.Blocks, BlocklyJavaScript);\n    }\n    api.metaBlocks()(Blockly.Blocks, BlocklyJavaScript);\n    return api;\n  }\n\n  async StartRegister(): Promise<void> {\n    // var swaggersUrl= await firstValueFrom( this.loadDemo.getSwaggerLinks());\n    var swaggersUrl = this.DetailsApp.swaggersDict;\n    var swaggersDict: Map<string, any> = new Map<string, any>();    \n    swaggersUrl.forEach((it, key) => {\n      if(!it.hasError)\n      swaggersDict.set(key, this.LoadSwaggerFromAPI(it));\n    });\n    // swaggersUrl.forEach(async (it) => {\n    //   swaggersDict.set(it.id, await this.LoadSwaggerFromUrl(it.link, it.id));\n    // });\n\n    // SwaggerParser\n    // .parseSwagger\n    // .parseSwagger('https://microservicesportchooser.azurewebsites.net/swagger/v1/swagger.json')\n    // .then(function(api: any) {\n    //   console.log(api[0]);\n    //   api[0](Blockly.Blocks,BlocklyJavaScript);\n    //   api[1](Blockly.Blocks,BlocklyJavaScript);\n\n    //   // console.log(api[1](Blockly.Blocks,BlocklyJavaScript));\n    // });\n    //hidden='true'\n    var newSwaggerCategories = [...Array(50).keys()].map((it) =>\n      this.CategorySwaggerHidden(it)\n    ).join('');\n    //this.loadDemo.getDemoBlocks().subscribe(\n    \n    // );\n    const gridElement = document.getElementById('steps'+this.myId);\n    if (gridElement == null) {\n      window.alert('gridElement is null');\n      return;\n    }\n    this.tabulator.initGrid(gridElement);\n\n    bs.filterBlocks.definitionBlocks(Blockly.Blocks, BlocklyJavaScript);\n    bs.waitBlocks.definitionBlocks(\n      Blockly.defineBlocksWithJsonArray,\n      BlocklyJavaScript\n    );\n    bs.xhrBlocks.definitionBlocks(\n      Blockly.Blocks,\n      BlocklyJavaScript\n    );\n    bs.propBlocks.definitionBlocks(\n      Blockly.Blocks,\n      BlocklyJavaScript\n    );\n    bs.guiBlocks.definitionBlocks(Blockly.Blocks, BlocklyJavaScript);\n    bs.convertersBlocks.definitionBlocks(Blockly.Blocks, BlocklyJavaScript);\n    bs.exportFileBlock.definitionBlocks(Blockly.Blocks, BlocklyJavaScript);\n    bs.createObjectBlocks.definitionBlocks(\n      Blockly.Blocks,\n      BlocklyJavaScript,\n      Blockly.Extensions,\n      Blockly.Mutator\n      \n    );\n    bs.currentDateBlock.definitionBlocks(\n      Blockly.Blocks,\n      BlocklyJavaScript\n    );\n\n    bs.dateFromTextBlock.definitionBlocks(Blockly.Blocks, BlocklyJavaScript);\n    bs.waitBlocks.definitionBlocks(Blockly.Blocks, BlocklyJavaScript);\n    bs.commentBlock.definitionBlocks(\n      Blockly.Blocks,\n      BlocklyJavaScript\n    );\n    bs.trycatchFinBlock.definitionBlocks(Blockly.Blocks, BlocklyJavaScript);  \n    bs.auth0Blocks.definitionBlocks(Blockly.Blocks, BlocklyJavaScript);\n    bs.windowsCreds.definitionBlocks(Blockly.Blocks, BlocklyJavaScript);\n    bs.chartBlock.definitionBlocks(Blockly.Blocks, BlocklyJavaScript);\n\n      bs.emailBlocks.definitionBlocks(\n        Blockly.Blocks,\n        BlocklyJavaScript\n      );\n      bs.htmlblocks.definitionBlocks(\n        Blockly.Blocks,\n        BlocklyJavaScript\n      );\n        // console.log('z',window.speechSynthesis.getVoices());\n      bs.ttsBlock.definitionBlocks(Blockly.Blocks,BlocklyJavaScript);\n      bs.pianoBlock.definitionBlocks(Blockly.Blocks,BlocklyJavaScript);\nvar customCategs=this.DetailsApp.customCategories;\n    var blocks = [\n      bs.defaultBlocks.generalBlocks(),\n      ` \n        <category name='Blockly Advanced'>\n        <category id=\"Audio\" name=\"Audio\">\n        ${bs.ttsBlock.fieldXML()}\n        ${bs.pianoBlock.fieldXML()}\n        </category>  \n            ${bs.filterBlocks.fieldXML()}\n                \n                ${bs.auth0Blocks.fieldXML()}\n                <category id=\"catConverters\"  name=\"Converters\">\n                ${bs.convertersBlocks.fieldXML()}\n              </category>    \n              <category id=\"catDates\"  name=\"Dates\">\n          ${bs.currentDateBlock.fieldXML()}\n          ${bs.dateFromTextBlock.fieldXML()}\n          ${bs.waitBlocks.fieldXML()}\n        </category>\n        <category id=\"catEmail\"  name=\"Email\">\n        ${bs.emailBlocks.fieldXML()}\n      </category>\n\n        <category id=\"catExporter\"  name=\"Exporter\">\n        ${bs.exportFileBlock.fieldXML()}\n      </category>\n              <category id=\"catGUI\" name=\"GUI\">\n              ${bs.guiBlocks.fieldXML()}\n              ${bs.chartBlock.fieldXML()}\n              </category>\n              <category id=\"catHTML\" name=\"HTML\">\n              ${bs.htmlblocks.fieldXML()}\n              </category>\n              <category name=\"Objects\" id=\"objects\">\n              ${bs.propBlocks.fieldXML()}\n              ${bs.createObjectBlocks.fieldXML()}\n              </category>\n              <category id=\"XHR\" name=\"Request\">\n            ${bs.xhrBlocks.fieldXML()}\n            ${bs.windowsCreds.fieldXML()}\n            </category>\n        `,\n      `<category id=\"catTimers\"  name=\"Timers\">\n          ${bs.waitBlocks.fieldXML()}\n        </category>`,\n      `  <category id=\"programming\" name=\"Programming\">\n        ${bs.trycatchFinBlock.fieldXML()}\n        ${bs.commentBlock.fieldXML()}\n          </category>\n        \n      `,\n      `</category>\n      ${customCategs}\n      \n      <category name=\"Swagger\" id=\"catSwagger\" expanded='false' >          \n          ${newSwaggerCategories}\n        </category> \n       \n        `,\n    ];\n    this.initialize(blocks);\n    // console.log('x',bs.windowsCreds.fieldXML());\n  }\n  showInner: string = '';\n  showXMLCode: string = '';\n  showJSCode: string = '';\n  showBlocksDefinition: string=''\n\n  SaveBlocks() {\n    bh.saveBlocksUrl.saveState(Blockly.Xml, this.demoWorkspace, this.myId);\n  }\n  public ShowBlocksDefinition(): boolean{\n    return this.showCodeAndXML === ShowCodeAndXML.ShowBlocksDefinition;\n  }\n  public ShowSelection():string{\n    return ShowCodeAndXML[this.showCodeAndXML];\n  }\n  public ShowSomething():boolean{\n    return this.showCodeAndXML !== ShowCodeAndXML.ShowNone;\n  }\n  public ShowOutput():boolean {\n    return (this.showCodeAndXML === ShowCodeAndXML.ShowOutput) ;\n  }\n  public ShowCode():boolean{\n    return (this.showCodeAndXML === ShowCodeAndXML.ShowCode) ;\n  }\n  public ShowXML():boolean{\n    return (this.showCodeAndXML === ShowCodeAndXML.ShowXML) ;\n  }\n  private CalculateXMLAndCode():void{\n    var xml = Blockly.Xml.workspaceToDom(this.demoWorkspace!, true);\n    var xml_text = Blockly.Xml.domToPrettyText(xml);\n    // this.showInner = `\n    //         ${this.run.latestCode}\n    //         ========\n    //         ${xml_text}\n    //         ========\n           \n    //         `;\n    this.showJSCode = this.run.latestCode;\n    this.showXMLCode = xml_text;\n    var blocks= this.parseTextForBlocks(xml_text);\n    this.showBlocksDefinition = blocks\n        .map(it=>\n          {\n            \n            try{\n              \n              var blocks=`Blockly.Blocks['${it}']={ init: \\n` + ((Blockly.Blocks[it] as any)['init']).toString() + '};';\n              var js = `Blockly.JavaScript['${it}']=` +  ((BlocklyJavaScript as any)[it]).toString()+';';\n              return blocks + '\\n' + js;\n                //console.log('x'+it,(Blockly.Blocks[it] as any)['init']());\n            }\n            catch(e){\n              console.error('parse definition : '+it,e);\n              return '//Error for '+it;\n            }\n          })\n        .join('\\n');\n  }\n  private parseTextForBlocks(xml_text:string):string[]{\n    var ret=[];1\n    if(xml_text.indexOf('<block type=\"')>=0){\n      var blocks=xml_text.split('<block type=\"');\n      for(var i=1;i<blocks.length;i++){\n        var block=blocks[i].split('\"')[0];\n        ret.push(block);\n      }\n    }\n    return ret;\n  }\n  ShowInnerWorkings() {\n    if (this.demoWorkspace == null) {\n      window.alert('demoWorkspace is null');\n      return;\n    }\n    this.showCodeAndXML++;\n    var item=this.ShowSelection();\n    if(!item){ \n      this.showCodeAndXML=ShowCodeAndXML.ShowNone;\n      setTimeout((d: Blockly.WorkspaceSvg) => {\n        Blockly.svgResize(d);        \n      }, 1000, this.demoWorkspace);\n    }\n    this.CalculateXMLAndCode();\n    //outputArea.value += latestCode;\n    // Blockly.svgResize(this.demoWorkspace);\n  }\n  Download(): void {\n    //todo: use vex as for others - electron compatibility\n    var name = window.prompt('Name?', 'blocks.txt');\n    if (name == null) return;\n    bh.saveLoad.DownloadBlocks(Blockly.Xml, this.demoWorkspace, name);\n  }\n  changeListener($event: any): void {\n    this.readThis($event.target);\n  }\n\n  readThis(inputValue: any): void {\n    var file: File = inputValue.files[0];\n    var myReader: FileReader = new FileReader();\n    var self = this;\n    myReader.onloadend = function (e) {\n      // you can perform an action with readed data here\n      //console.log(myReader.result);\n      bh.saveLoad.LoadFile(Blockly.Xml, self.demoWorkspace, myReader.result);\n      self.run.resetInterpreter();\n    };\n    myReader.readAsText(file);\n  }\n  private CategorySwaggerHidden(id: Number): string {\n    return `<category name='swagger_hidden_${id}' hidden='true' >${id}</category>`;\n  }\n  public SaveToLocalAPI():void{\n    if((this.DetailsApp?.LocalAPI?.WasAlive||false) == false){\n      this.LoadLocalAPI();\n      window.alert(\"local api it is not yet loaded - please try again after loading\");\n      return;\n    }\n    var xml = Blockly.Xml.workspaceToDom(this.demoWorkspace!, true);\n    var xml_text = Blockly.Xml.domToPrettyText(xml);    \n    var db= new DemoBlocks();\n    var name=window.prompt(\"name of the blocks?\");\n    if(name == null)\n      return;\n    db.id = name;\n    db.blocks=\"\";\n    db.categories=\"\";\n    db.description=\"\";\n    this.DetailsApp.LocalAPI?.SaveBlock(db,xml_text).subscribe(\n      it=>{\n        console.log(\"number blocks\",it);\n        window.alert(\"saved !\")\n      }\n    );\n   \n  }\n  public LoadLocalAPI():any{\n    // console.log('x_',self);\n    var self=this;\n    return self.DetailsApp.LocalAPI?.IsAlive()?.pipe(\n        catchError((err)=>{\n          window.alert(`cannot load ${self.DetailsApp.LocalAPI?.urL}`)\n          throw err;\n        })\n      )\n      .subscribe((it)=>{\n      if(!it){\n        if(!window.confirm('LocalAPI is not alive.\\n Do you want to downlod and run ?'))\n          return;\n\n          self.DetailsApp.LocalAPI!.download();\n      }\n    var swaggerUrl=self.DetailsApp.LocalAPI?.urL||'';\n    swaggerUrl+=\"swagger/v1/swagger.json\";\n    //window.alert(swaggerUrl);\n\n    //self.loadedCompletely=false;\n    self.LoadSwaggerFromUrl(swaggerUrl).then((api) => {\n        // this.afterTimeout(this);\n        if(api.hasError)\n        window.alert(\"error loading local api\");\n      else{\n        api.name= \"LocalAPI\";\n        self.addToToolboxSwagger(api,this);      \n        // self.loadedCompletely=true;\n        window.alert(\"loaded successfully\");\n      }\n    });  \n  });\n    }\n  public toolboxXML: string = '';\n  private initialize(defaultBlocks: string[]) {\n    const blocklyDiv = document.getElementById('blocklyDiv'+this.myId);\n    if (blocklyDiv == null) {\n      window.alert('blocklyDiv is null');\n      return;\n    }\n    var blocks = defaultBlocks.map((it) => `<sep></sep>${it}`);\n    this.toolboxXML = `<xml xmlns=\"https://developers.google.com/blockly/xml\" id=\"toolbox-simple\" style=\"display: none\">    \n    ${blocks}\n    </xml>`;\n    // console.log(toolboxXML);\n    this.demoWorkspace = Blockly.inject(blocklyDiv, {\n      readOnly: false,\n      media: 'media/',\n      trashcan: true,\n      // renderer:'thrasos',\n      // theme: \"highcontrast\",\n      horizontalLayout:\tfalse,\n      move: {\n        scrollbars: true,\n        drag: true,\n        wheel: true,\n      },\n      zoom:\n         {controls: true,\n          wheel: true,\n          startScale: 1.0,\n          maxScale: 3,\n          minScale: 0.3,\n          scaleSpeed: 1.2,\n          pinch: true},\n      toolbox: this.toolboxXML,\n    } as Blockly.BlocklyOptions);\n    // this.demoWorkspace.registerButtonCallback(\"LoadLocalAPI\",()=>this.LoadLocalAPI(this));\n    const contentHighlight = new ContentHighlight(this.demoWorkspace);\n    contentHighlight.init();\n    var self = this;\n    if ((this.DetailsApp.settings?.startBlocks?.length || 0) > 0) {\n      try {\n        var xmlBlocks = (this.DetailsApp.settings?.startBlocks || []).join(\n          '\\n'\n        );\n        var xml = Blockly.Xml.textToDom(xmlBlocks);\n        Blockly.Xml.clearWorkspaceAndLoadFromXml(xml, this.demoWorkspace);\n      } catch (e) {\n        console.error('error when load default blocks', e);\n      }\n    }\n    if(this.DetailsApp.LocalAPI?.WasAlive){\n      this.LoadSwaggerFromUrl(this.DetailsApp.LocalAPI.urL+\"swagger/v1/swagger.json\",\"LocalAutomation\");\n    }\n    window.setTimeout(self.afterTimeout, 2000, this, );\n\n    // console.log(BlocklyJavaScript);\n    this.run = bh.interpreterHelper.createInterpreter(\n      this.demoWorkspace,\n      BlocklyJavaScript\n    );\n    var self = this;\n    this.demoWorkspace.addChangeListener(function (evt: any) {\n      if (!evt.isUiEvent) {\n        self.run.resetInterpreter();\n        self.run.generateCodeAndLoadIntoInterpreter();\n        //self.ShowInnerWorkings();\n        self.CalculateXMLAndCode();\n      }\n    });\n  }\n  public restoreBlocks() {\n    bh.saveBlocksUrl.restoreState(Blockly.Xml, this.demoWorkspace,this.myId);\n  }\n  public addToToolboxSwagger(item:any,myComponent: DisplayBlocklyComponent){\n    \n    var newCateg = item\n    .findCategSwaggerFromPaths()\n    .sort()\n    .map(\n      (it: any) =>\n        `<category name='${it}' custom='func_${item.name}_${it}'></category>`\n    )\n    .join('\\n');\n  var nameExistingCategorySwagger =\n    myComponent?.CategorySwaggerHidden(myComponent?.swaggerLoaded) || '';\nvar xmlToolbox=  myComponent.toolboxXML;\n// console.log('a',xmlToolbox);\nvar replaceCategory=`<category name='${item.name}'>\n<category name='API' id='func_${item.name}'>\n${newCateg}\n</category>\n${item.categSwagger()}\n\n<category name='meta' id='meta_${item.name}'>\n<block type='meta_swagger_controllers_${item.name}'></block>\n<block type='meta_swagger_controllers_actions_${item.name}'></block>\n</category>\n\n</category>\n`;\n// console.log('x',replaceCategory)\nxmlToolbox= xmlToolbox.replace(nameExistingCategorySwagger,replaceCategory);  \n// console.log('x',xmlToolbox)\n\n  myComponent.swaggerLoaded++;\n  // console.log(item.name);\n  myComponent.toolboxXML =xmlToolbox;\n  var toolbox = myComponent?.demoWorkspace?.updateToolbox(xmlToolbox);\n\n  //myComponent?.swaggerData?.forEach((item: any) => \n  {\n    if (myComponent?.demoWorkspace == null) return;\n\n    \n    var nameCat = 'objects_' + item.nameCategSwagger();\n    var nameAPI = 'AllApi_' + item.nameCategSwagger();\n    var cache=item;\n    myComponent.demoWorkspace.registerToolboxCategoryCallback(\n      nameCat,\n      (d: Blockly.Workspace) => {\n        return myComponent.registerSwaggerBlocksObjects(d, cache);\n      }\n    );\n    myComponent.demoWorkspace.registerToolboxCategoryCallback(\n      nameAPI,\n      (d: Blockly.Workspace) => {\n        return myComponent.registerSwaggerBlocksAPIAll(d, cache);\n      }\n    );\n\n    item.findCategSwaggerFromPaths().forEach((it: any) => {\n      myComponent?.demoWorkspace?.registerToolboxCategoryCallback(\n        `func_${item.name}_${it}`,\n        (d: Blockly.Workspace) => {\n          return myComponent.registerSwaggerBlocksAPIControllers(\n            d,\n            item,\n            it\n          );\n        }\n      );\n    });\n  }\n}\n  \nloadedCompletely: boolean = false;\n  afterTimeout(myComponent: DisplayBlocklyComponent) {\n    // console.log('start register');\n    myComponent.loadedCompletely=true;\n    if (myComponent?.swaggerData == null) return;\n    var nr = myComponent.swaggerData.length;\n    myComponent.toolboxXML= myComponent.toolboxXML.replace('Swagger', `Swagger(${nr})`);\n\n    myComponent.swaggerData.forEach((item: any) => {\n      // console.log('a_item', item);\n      var cache=item;      \n      myComponent.addToToolboxSwagger(cache,myComponent);\n    });\n\n    if (myComponent?.mustLoadDemoBlock != null)\n      myComponent.ShowDemo(myComponent?.mustLoadDemoBlock);\n    else {\n      //from default\n      if ((myComponent.DetailsApp.settings?.startBlocks?.length || 0) > 0) {\n        try {\n          var xml_text = (\n            myComponent.DetailsApp.settings?.startBlocks || []\n          ).join('\\n');\n          //<xml xmlns=\"https://developers.google.com/blockly/xml\"></xml>\n          if (xml_text?.length > 62) {\n            var xml = Blockly.Xml.textToDom(xml_text);\n            Blockly.Xml.clearWorkspaceAndLoadFromXml(\n              xml,\n              myComponent.demoWorkspace!\n            );\n          }\n        } catch (e) {\n          console.log('error when load default blocks', e);\n        }\n      }\n      //from browser cache\n      myComponent.restoreBlocks();\n    }\n  }\n}\n","\n<mat-spinner *ngIf=\"!loadedCompletely\"></mat-spinner>\n<mat-grid-list [cols]=\"ShowSomething() ? 2 : 1\" rowHeight=\"1:1\">\n  <mat-grid-tile-header>\n    <div style=\"display: inline-block; height: 100%; width: 100%\">\n      <div style=\"display: inline-block; height: 5%; width: 100%\">\n        <button mat-raised-button color=\"primary\" (click)=\"LoadSwagger()\">\n          <mat-icon>file_upload</mat-icon>\n          Load Swagger/OpenAPI\n        </button>\n\n        \n        &nbsp;\n        <button\n          mat-raised-button\n          id=\"downloadBlocks\"\n          color=\"primary\"\n          [matMenuTriggerFor]=\"menuSave\"\n        >\n          <mat-icon>save</mat-icon>\n          Save =>\n        </button>\n        <mat-menu #menuSave=\"matMenu\">\n        \n        <button mat-raised-button color=\"primary\" (click)=\"SaveBlocks()\">\n          <mat-icon>web</mat-icon>\n          Persist in browser\n        </button>\n        <mat-divider  [inset]=\"true\"></mat-divider>\n        <button\n          id=\"downloadBlocks\"\n          mat-raised-button\n          color=\"primary\"\n          (click)=\"Download()\"\n        >\n          <mat-icon>download</mat-icon>\n          Download blocks\n        </button>\n        <mat-divider  [inset]=\"true\"></mat-divider>\n        <button\n          mat-raised-button\n          [color]='(DetailsApp.LocalAPI?.WasAlive||false) ?\"primary\":\"warn\"'\n          \n          (click)=\"SaveToLocalAPI()\"\n        >\n          <mat-icon>save</mat-icon>\n          Save Local \n        </button>\n          \n        </mat-menu>\n        &nbsp;\n        <button\n          mat-raised-button\n          color=\"warn\"\n          id=\"runButton\"\n          (click)=\"RunCode()\"\n        >\n          <mat-icon>play_arrow</mat-icon>\n          Execute\n        </button>\n\n        &nbsp;\n        &nbsp;\n        <input type=\"file\" (change)=\"changeListener($event)\" />\n\n        <button mat-raised-button color=\"primary\" (click)=\"ShowInnerWorkings()\">\n          <mat-icon>code</mat-icon>\n          {{ ShowSelection() }}\n        </button>\n        <button\n        mat-raised-button\n        id=\"demos\"\n        color=\"accent\"\n        (click)=\"ShowBlocks()\"\n      >\n        <mat-icon>list</mat-icon>\n        Load Saved Blocks \n      </button>\n      \n        <a\n          target=\"_blank\"\n          *ngIf=\"mustLoadDemoBlock?.length\"\n          mat-raised-button\n          color=\"primary\"\n          [routerLink]=\"['/', 'automation', 'loadexample', mustLoadDemoBlock]\"\n          >Direct link {{ mustLoadDemoBlock }}</a\n        >\n      </div>\n    </div>\n  </mat-grid-tile-header>\n  <mat-grid-tile>\n    <div\n      [id]=\"'blocklyDiv' + this.myId\"\n      style=\"display: inline-block; height: 100%; width: 100%\"\n    ></div>\n  </mat-grid-tile>\n  <mat-grid-tile *ngIf=\"ShowSomething()\">\n    <ngx-monaco-editor\n      *ngIf=\"ShowOutput()\"\n      style=\"display: inline-block; height: 100%; width: 100%\"\n      [options]=\"editorPlain\"\n      [(ngModel)]=\"showInner\"\n    ></ngx-monaco-editor>\n    <ngx-monaco-editor\n      *ngIf=\"ShowCode()\"\n      style=\"display: inline-block; height: 100%; width: 100%\"\n      [options]=\"editorJSOptions\"\n      [(ngModel)]=\"showJSCode\"\n    ></ngx-monaco-editor>\n    <ngx-monaco-editor\n      *ngIf=\"ShowXML()\"\n      style=\"display: inline-block; height: 100%; width: 100%\"\n      [options]=\"editorXMLOptions\"\n      [(ngModel)]=\"showXMLCode\"\n    ></ngx-monaco-editor>\n\n    <ngx-monaco-editor\n      *ngIf=\"ShowBlocksDefinition()\"\n      style=\"display: inline-block; height: 100%; width: 100%\"\n      [options]=\"editorJSOptions\"\n      [(ngModel)]=\"showBlocksDefinition\"\n    ></ngx-monaco-editor>\n  </mat-grid-tile>\n</mat-grid-list>\n<mat-accordion>\n  <mat-expansion-panel>\n    <mat-expansion-panel-header>\n      <mat-panel-title> Output Grid </mat-panel-title>\n      <mat-panel-description>\n        Click to see grid of output values\n      </mat-panel-description>\n    </mat-expansion-panel-header>\n    \n    <div [id]=\"'steps' + myId\"></div>\n  </mat-expansion-panel>\n  <mat-expansion-panel>\n    <mat-expansion-panel-header>\n      <mat-panel-title> Chart </mat-panel-title>\n      <mat-panel-description>\n        Click to see chart of output values\n      </mat-panel-description>\n    </mat-expansion-panel-header>\n    <p>\n      <canvas [id]=\"'barchart' + myId\" width=\"800\" height=\"450\"> </canvas>\n    </p>\n  </mat-expansion-panel>\n  <mat-expansion-panel>\n    <mat-expansion-panel-header>\n      <mat-panel-title> HTML </mat-panel-title>\n      <mat-panel-description>\n        Click to see output as HTML\n      </mat-panel-description>\n    </mat-expansion-panel-header>\n    <div [id]=\"'htmlOutput' + myId\"></div>\n  </mat-expansion-panel>\n  <mat-expansion-panel>\n    <mat-expansion-panel-header>\n      <mat-panel-title> Text </mat-panel-title>\n      <mat-panel-description>\n        Click to see output as Text\n      </mat-panel-description>\n    </mat-expansion-panel-header>\n    <div [id]=\"'htmlText' + myId\"></div>\n  </mat-expansion-panel>\n</mat-accordion>\n","import { Injectable } from '@angular/core'; \nimport { Tabulator, FormatModule,ClipboardModule,SelectRowModule, DownloadModule} from 'tabulator-tables';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TabulatorHelper\n{\n    a:Tabulator.Options| null = null;\n    b:Tabulator.CellComponent|null=null;\n    dataObject:Array<object> = [];\n    objectsForGrid: Array<object> = [];\n    stringsForGrid: Array<string> = [];\n    hotInstance: Tabulator | null = null;\n    get hot(): Tabulator | never {\n\n        if(this.hotInstance != null)\n            return this.hotInstance;\n\n        throw new Error(\"hot is null\");\n    };\n\n    initGrid(gridElement: any) {\n    //console.log(gridElement); \n    Tabulator.registerModule([FormatModule, ClipboardModule,DownloadModule,SelectRowModule]);\n    this.hotInstance = new Tabulator(gridElement, {\n        columns: [{ title: 'Step',field:'id' }],\n        layout: \"fitColumns\",   \n        // dataTree: false,\n        // dataTreeStartExpanded: false,\n        // movableRows: false,\n        // movableColumns: true,\n        // selectable: false,\n        // selectableRangeMode: \"click\",\n        clipboard: \"copy\",\n        footerElement: `<div>\n        <!-- <a href=\"javascript:{var event = new Event('TabCopy'); window.dispatchEvent(event);}\">Copy Clipboard</a>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n        <a href=\"javascript:{var event = new Event('TabDownload'); window.dispatchEvent(event);}\">CSV</a>\n        -->\n        \n    </div>`,\n        placeholder: \"please press execute button\", \n        // tooltips: function (cell:Tabulator.CellComponent) {\n        //     //cell - cell component\n\n        //     //function should return a string for the tooltip of false to hide the tooltip\n        //     return cell.getColumn().getField() + \" - \" + cell.getValue(); //return cells \"field - value\";\n        // },\n\n    } as Tabulator.Options);\n    // try{\n    // this.hot.replaceData([]);\n    // // this.hot.clearFilter(true);\n    // // this.hot.clearHeaderFilter();\n    // this.hot.redraw(true);\n    // }\n    // catch(e){\n    //     //do nothing\n    // }\n}\n    AddStringToGrid(value:string) {\n    //window.alert(value);\n    if (value.startsWith(\"{\") && value.endsWith(\"}\")) {\n        try {\n            var obj = JSON.parse(value);\n            this.objectsForGrid.push(obj);\n            return;\n        }\n        catch(err)  {\n            //do nothing\n        }\n    };\n    if (value.startsWith(\"[\") && value.endsWith(\"]\")) {\n        try {\n            var arr = JSON.parse(value);\n            for (var i = 0; i < arr.length; i++) {\n                this.objectsForGrid.push(arr[i]);   \n            };\n            return;\n        }\n        catch(err) {\n            //do nothing\n        }\n\n    };\n    this.stringsForGrid.push(value);\n    //console.log(this.stringsForGrid);\n    //window.alert('length:'+stringsForGrid.length);\n}\n    AddDataToGrid(value:any) {\n        \n    //gridElement.innerHTML = '';\n    //hot.addData([dataObject]);\n    //hot.redraw(true);\n    //window.alert(JSON.stringify(value) + typeof value);\n    if (typeof value === 'string') {\n        // console.log(\"adding string to grid\");\n        this.AddStringToGrid(value?.toString());\n        this.dataObject.push([value?.toString()]);\n        return;\n    }\n    if (typeof value === 'object') {\n        console.log(\"adding object to grid\");\n        this.AddStringToGrid(JSON.stringify(value));\n        this.dataObject.push([value]);\n        return;\n    }\n    // console.log(\"adding data to grid\");\n    this.dataObject.push([value.ToString()]);\n    this.AddStringToGrid(value.toString());\n}\n    ClearDataGrid() {\n        this.dataObject = [];\n        this.objectsForGrid = [];\n        this.stringsForGrid = [];\n    if (this.hot != null) {\n        \n        var cStep:Tabulator.ColumnDefinition ={title: 'Step',field:'id'};\n        var cValue: Tabulator.ColumnDefinition ={title: 'Value',field:'val'};\n        this.hot.setColumns([cStep,cValue]);\n        this.hot.replaceData([]);\n        //this.hot.clearFilter(true);\n        // this.hot.clearHeaderFilter();\n        this.hot.redraw(true);           \n\n        \n        \n    }\n\n}\nhasOwnProperty<X extends {}, Y extends PropertyKey>\n  (obj: X, prop: Y): obj is X & Record<Y, unknown> {\n      \n    if(obj == null)\n        return false;\n\n    return obj.hasOwnProperty(prop)\n}\nAddObjectToFinishGrid() {\n    var headers = [];\n    var obj = this.objectsForGrid;\n    //console.log(\"object !\", obj);\n\n    for (var i = 0; i < obj.length; i++) {\n        var data = obj[i];\n        if (typeof data === 'string') {\n            headers.push(\"_\");\n        }\n        else {\n            headers.push(...Object.keys(data));\n        }\n    }\n    //console.log(\"headers 1\", headers);\n    var mySet = new Set(headers);\n    headers = Array.from(mySet);\n\n    var allHeaders = [...headers];\n    var fullData = [];\n    for (var i = 0; i < obj.length; i++) {\n        var data = obj[i];\n        //console.log(data);\n        var res : any = { Nr: i + 1 };\n        //res[\"_children\"] = [];\n        for (var p = 0; p < headers.length; p++) {\n            var key = headers[p];\n            var defKey = this.goodNameForKey(key);\n            //console.log(`${key} ${data && data.hasOwnProperty(key)} `)\n            if (data && this.hasOwnProperty(data,key)) {\n                var val = data[key];\n                if (typeof val === \"object\") {\n                    res[defKey] = JSON.stringify(val);\n\n                    //res[\"_children\"].push(val);\n                    //allHeaders.push(...Object.keys(val));\n                }\n                else\n                    res[defKey] = val;\n            }\n            else {\n                if (typeof data === 'string' && p === 0) {\n                    res[defKey] = data;\n                }\n                else {\n                    res[defKey] = '';   \n                }\n            }\n        }\n        fullData.push(res);\n    }\n    headers.splice(0, 0, \"Nr\");\n    allHeaders.splice(0, 0, \"Nr\");\n    var hs = this.Headers(allHeaders); \n    this.hot.setColumns(hs);\n    this.hot.replaceData(fullData);\n}\nHeaders(allHeaders:string[]): Tabulator.ColumnDefinition[] {\n    \n    return allHeaders.map(it => {\n        return {\n\n            // cellClick: function (e:any, cell:any) {\n            //     var row = cell.getRow().getData().Nr;\n            //     var col = cell.getColumn().getField();\n            //     alert(`The row at : ${row} , col: ${row} has value :\\n ` + cell.getValue()); //display the cells value\n            // },\n            title: it,\n            field: this.goodNameForKey(it),\n            // headerFilter: true,\n            formatter: function (cell:Tabulator.CellComponent, formatterParams:any, onRendered:Tabulator.EmptyCallback) {\n                //cell - the cell component\n                //formatterParams - parameters set for the column\n                //onRendered - function to call when the formatter has been rendered\n                try {\n                    var value = cell.getValue().toString();\n                    //console.log('a',value);\n                    //return 'a'+value;\n                    if (value.length < 2)\n                        return value;\n                    if (value.startsWith(\"[\") && value.endsWith(\"]\")) {\n                        try {\n                            var arr = JSON.parse(value);\n                            var row = cell.getRow().getData().Nr;\n                            var col = cell.getColumn().getField();\n                            var id = col + \"_\" + row;\n                            onRendered(function () {\n                                //window.alert('test');\n                                var table = new Tabulator(\"#\" + id, {\n                                    data: arr,\n                                    autoColumns: true,\n                                    layout: \"fitDataFill\",\n                                    // headerSort: false,\n                                    // tooltips: function (cell:Tabulator.CellComponent) {\n                                    //     return cell.getColumn().getField() + \" - \" + JSON.stringify(cell.getValue()); //return cells \"field - value\";\n                                    // }\n                                } as Tabulator.Options);\n                            });\n                            return \"<div id='\" + id + \"'>\" + value + \"</div>\";\n\n                        }\n                        catch (err) {\n                            return value;\n                        }\n\n                    };\n                }\n                catch (e) {\n                    return value;\n                }\n                return cell.getValue();\n            }\n        }\n    });\n}\n AddStringToFinishGrid() {\n\n    var fullData = [];\n    for (var i = 0; i < this.stringsForGrid.length; i++) {\n        fullData.push({ Nr: i + 1, Text: this.stringsForGrid[i] });\n    }\n    //window.alert(fullData.length);\n    var allHeaders = [\"Nr\", \"Text\"];\n    var hs =this.Headers(allHeaders); \n    this.hot.setColumns(hs);\n    this.hot.replaceData(fullData);\n\n}\nFinishGrid() {\n\n    if (this.objectsForGrid.length + this.stringsForGrid.length == 0)\n        return;\n\n    if (this.objectsForGrid.length > 0) {\n        this.AddObjectToFinishGrid();\n    }\n    else {\n        this.AddStringToFinishGrid();\n\n    }\n\n    // this.hot.clearFilter(true);\n    this.hot.redraw(true);           \n}\n\ngoodNameForKey(key:string) {\n    var ret = key;\n    ret = ret.replace(\".\", \"_\");\n    return ret;\n}\ncopyClip() {\n    this.hot.copyToClipboard();\n}\ncopyCSV() {\n    this.hot.download(\"csv\", \"data.csv\", { bom: true });\n}\n}\n","import { Component, OnInit } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { combineLatest, map, of, startWith } from 'rxjs';\nimport { Observable } from 'rxjs/internal/Observable';\nimport { AppDetails } from '../AppDetails';\nimport { DemoBlocks } from '../DemoBlocks';\n\n@Component({\n  selector: 'app-find-saved-blocks',\n  templateUrl: './find-saved-blocks.component.html',\n  styleUrls: ['./find-saved-blocks.component.css']\n})\nexport class FindSavedBlocksComponent implements OnInit {\n\n  public BlocksLocal: DemoBlocks[] = [];\n  public demos: DemoBlocks[] = [];\n  public demosCategories: Map<string, DemoBlocks[]> = new Map<\n    string,\n    DemoBlocks[]\n  >();\n\n  public demosBlocks:Map<string,DemoBlocks[]>= new Map<string,DemoBlocks[]>();\n\n  constructor(public dialogRef: MatDialogRef<FindSavedBlocksComponent >,public DetailsApp: AppDetails) { \n    this.InitiateDemos();\n    this.loadFromLocalAPI();\n  }\n  public loadFromLocalAPI(){\n    if(this.DetailsApp.LocalAPI?.WasAlive){\n      this.DetailsApp.LocalAPI?.LoadBlocks().subscribe(\n        it=>{\n            this.BlocksLocal=it;\n        }\n      )\n    }\n  }\n  public Verify(){\n    this.DetailsApp.LocalAPI?.IsAlive().subscribe(it=>{\n      if(it){\n        this.loadFromLocalAPI();\n      }\n    })\n  }\n  InitiateDemos(){\n    var data: DemoBlocks[] = this.DetailsApp.demoBlocks;\n    \n    this.demos = data.sort((a, b) =>\n      a.description.localeCompare(b.description)\n    );\n\n    \n      this.optionsCategories = [...new Set(data\n        .map((it) => it.categories)\n        .filter((it) => it?.length > 0)\n        .flatMap((it) => it.split(';'))\n        .filter((it) => it?.length > 0)\n        .sort((a, b) => a.toLocaleLowerCase().localeCompare(b.toLocaleLowerCase())) \n      )];\n        \n\n        \n      \n\n\n      this.optionsBlocks=[...new Set(data\n      .map((it) => it.blocks)\n      .filter((it) => it?.length > 0)\n      .flatMap((it) => it.split(';'))\n      .filter((it) => it?.length > 0)\n      .sort((a,b)=>a.toLowerCase().localeCompare(b.toLowerCase()))\n      )];\n      ;\n      \n      this.filteredOptionsBlocks = this.myBlocks.valueChanges.pipe(\n        startWith(''),\n        map(value =>{\n          var val = (value as string || '').trim();\n          return this._filter(val, this.optionsBlocks);\n          \n        } ),\n      );\n      this.filteredOptionsCategories= this.myCategories.valueChanges.pipe(\n        startWith(''),\n        map(value =>{\n          var val = (value as string || '').trim();\n          return this._filter(val, this.optionsCategories);\n          \n        } ),\n      );\n      // console.log('x',this.demos);\n      this.demosArray= combineLatest([\n        this.myBlocks.valueChanges.pipe(startWith(''))\n        ,this.myCategories.valueChanges.pipe(startWith(''))\n      ])\n      .pipe(\n        startWith(this.demos),\n        map(([block,category])=>{\n          if(Array.isArray(block) || typeof block === 'object')\n            block='';\n          if(Array.isArray(category) || typeof category === 'object')\n            category='';\n\n            block=(block||'').trim().toLowerCase();\n            category=(category||'').trim().toLowerCase();\n            // console.log('search for ',block,category);\n            var ret= this.demos.filter(it=>{\n             return (block.length==0 ||  it.blocks?.toLowerCase().indexOf(block)>-1) \n                &&\n              (category.length==0 ||  it.categories?.toLowerCase().indexOf(category)>-1)\n            });\n            // console.log('ret',ret);\n            return ret;\n        })\n      );\n  }\n\n  demosArray:Observable<DemoBlocks[]>| null=null;\n\n  myBlocks = new FormControl();\n  optionsBlocks: string[] = [];\n  filteredOptionsBlocks: Observable<string[]> | null = null;\n\n\n  myCategories = new FormControl();\n  optionsCategories: string[] = [];\n  filteredOptionsCategories: Observable<string[]> | null = null;\n\n  ngOnInit() {\n    \n  }\n\n  private _filter(value: string, arrToFilter:string[]): string[] {\n    const filterValue = value.toLowerCase();\n    if(filterValue.length == 0){\n      return arrToFilter;\n    }\n    \n    return arrToFilter.filter(option => option.toLowerCase().includes(filterValue));\n  }  \n  public chooseDemo(demo: DemoBlocks){\n    return this.dialogRef.close(demo);\n  }\n\n  public Close(){\n    this.dialogRef.close();\n  }\n}\n","<mat-tab-group>\n  <mat-tab label=\"Demos\">\n    <form class=\"example-form\">\n      \n      <mat-form-field class=\"example-full-width\" appearance=\"fill\">\n        <mat-label>Categories</mat-label>\n        <input\n          type=\"text\"\n          placeholder=\"Pick one\"\n          aria-label=\"Categories\"\n          matInput\n          [formControl]=\"myCategories\"\n          [matAutocomplete]=\"autoCategories\"\n        />\n        <mat-autocomplete #autoCategories=\"matAutocomplete\">\n          <mat-option\n            *ngFor=\"let option of filteredOptionsCategories | async\"\n            [value]=\"option\"\n          >\n            {{ option }}\n          </mat-option>\n        </mat-autocomplete>\n      </mat-form-field>\n      <mat-form-field class=\"example-full-width\" appearance=\"fill\">\n        <mat-label>Blocks</mat-label>\n        <input\n          type=\"text\"\n          placeholder=\"Pick one\"\n          aria-label=\"Blocks\"\n          matInput\n          [formControl]=\"myBlocks\"\n          [matAutocomplete]=\"autoBlocks\"\n        />\n        <mat-autocomplete #autoBlocks=\"matAutocomplete\">\n          <mat-option\n            *ngFor=\"let option of filteredOptionsBlocks | async\"\n            [value]=\"option\"\n          >\n            {{ option }}\n          </mat-option>\n        </mat-autocomplete>\n      </mat-form-field>\n\n    </form>\n    \n    <table>\n      <thead>\n        <tr>\n          <th>Number</th>\n          <th>Name</th>\n          <th>Details</th>\n          \n        </tr>\n      </thead>\n      <tr *ngFor=\"let demo of demosArray | async; let i = index\">\n        <td>\n          {{ i + 1 }}\n        </td>\n        <td>\n          <button mat-raised-button color=\"primary\" (click)=\"chooseDemo(demo)\">            \n          {{ demo.description }}\n          </button>\n        </td>\n        <td>\n          <b>{{ demo.categories?.split(';')?.join(', ') }}</b>          \n          {{ demo.blocks?.split(';')?.join(', ') }}\n        </td>\n      </tr>\n    </table>\n  </mat-tab>\n\n  <mat-tab label=\"Saved on local\" > \n    <button\n    mat-raised-button\n    color='primary'\n    *ngIf=\"!DetailsApp.LocalAPI?.WasAlive\"\n    (click)=\"Verify()\"\n  >\n    <mat-icon>save</mat-icon>\n    Verify LocalAPI\n   \n\n  </button>\n\n  <table>\n    <thead>\n      <tr>\n        <th>Number</th>\n        <th>Name</th>\n        <th>Details</th>\n        \n      </tr>\n    </thead>\n    <tr *ngFor=\"let demo of BlocksLocal; let i = index\">\n      <td>\n        {{ i + 1 }}\n      </td>\n      <td>\n        <button mat-raised-button color=\"primary\" (click)=\"chooseDemo(demo)\">            \n        {{ demo.description || demo.id }}\n        </button>\n      </td>\n      <td>\n        <b>{{ demo.categories?.split(';')?.join(', ') }}</b>          \n        {{ demo.blocks?.split(';')?.join(', ') }}\n      </td>\n    </tr>\n  </table>\n\n\n\n  </mat-tab>\n  <mat-tab label=\"CLOUD\" disabled=\"disabled\"> Saved on Cloud </mat-tab>\n</mat-tab-group>\n\n<button mat-raised-button id=\"blocks\" color=\"accent\" (click)=\"Close()\">\n  <mat-icon>close</mat-icon>\n  Close\n</button>\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpResponse } from '@angular/common/http';\nimport {  Observable, of } from 'rxjs';\nimport { map,  tap } from 'rxjs/operators';\n\nimport { environment } from 'src/environments/environment';\nimport { DemoBlocks } from './DemoBlocks';\nimport { LinksSwagger } from './LinksSwagger';\n\n@Injectable({\n  providedIn: 'root'\n})  \nexport class LoadShowUsageService {\n\n  constructor(private http: HttpClient) { }\n\n  public getDemoBlocks(): Observable<DemoBlocks[]> {\n    var dt=new Date().toISOString();\n    return this.http.get<string>(`assets/showUsage/demoBlocks/all.txt?${dt}`,{ responseType: 'text' as 'json'})\n    .pipe(\n \n      map((res: any) => {\n          var r=res;\n          // console.log(r);\n          var d:DemoBlocks[]=JSON.parse(res);\n          return d;\n    })\n    )\n    ;\n  }\n  public getCustomCategories(): Observable<string> {\n    var dt=new Date().toISOString();\n    return this.http.get<string>(`assets/loadAtStartup/customCategories.txt?${dt}` ,{ responseType: 'text' as 'json'})\n          .pipe(\n            map(res=> res.toString())\n          );\n  }\n  public getSwaggerLinks(): Observable<LinksSwagger[]> {\n    var dt=new Date().toISOString();\n    return this.http.get<string>(`assets/loadAtStartup/swaggers.json?${dt}`,{ responseType: 'text' as 'json'})\n    .pipe(\n\n      map((res: any) => {\n          var r=res;\n          // console.log(r);\n          var d:LinksSwagger[]=JSON.parse(res);\n          return d;\n    })\n    )\n    ;\n  }\n\n  public getDemoBlock(id:string): Observable<string> {\n\n    var dt=new Date().toISOString();\n    var q= this.http.get\n      (`assets/showUsage/demoBlocks/${id}.txt?${dt}`, {responseType: 'text'})\n    .pipe(\n      tap((res: any) => {\n        // console.log(res);\n      }),\n        map((res: any) => {\n        return res.toString();\n      })\n    );\n    return q;\n    return of(\"andrei\");\n    \n  }\n\n\n\n}\n","import { Component, OnInit } from '@angular/core';\nimport { BreakpointObserver, Breakpoints } from '@angular/cdk/layout';\nimport { Observable } from 'rxjs';\nimport { map, shareReplay } from 'rxjs/operators';\nimport { LoadShowUsageService } from '../load-show-usage.service';\nimport { DemoBlocks } from '../DemoBlocks';\nimport { AppDetails } from '../AppDetails';\nimport { Settings } from '../Settings';\nimport { TransmitAction } from '../TransmitAction';\n\n@Component({\n  selector: 'app-primary-navig',\n  templateUrl: './primary-navig.component.html',\n  styleUrls: ['./primary-navig.component.css']\n})\nexport class PrimaryNavigComponent implements OnInit {\n\n  demoBlocks: DemoBlocks[]=[];\n  isHandset$: Observable<boolean> = this.breakpointObserver.observe(Breakpoints.Handset)\n    .pipe(\n      map(result => result.matches || true ),\n      shareReplay()\n    );\n    public version:string=Settings.version;\n    public latestVersion:string|undefined='';\n    public title:string = \"Blockly Automation\";\n    public footer:string = '';\n    public standalone:boolean=false;\n\n  constructor(private breakpointObserver: BreakpointObserver, private details: AppDetails, private ta :TransmitAction) {}\n  ngOnInit(): void {\n      this.latestVersion = this.details.settings?.latestVersion;\n      this.demoBlocks =this.details.demoBlocks.sort((a, b) => a.description.localeCompare(b.description));\n      this.title=this.details?.settings?.title ||'Blockly Automation';\n      this.footer = this.details?.settings?.footer || '';\n      \n      if ((navigator as any).standalone || window.matchMedia('(display-mode: standalone)').matches) {\n        this.standalone=true; \n      }\n  }\n  executeOnDisplayBlockly(func: string){\n    this.ta.sendDataToServer('DisplayBlocklyComponent',func);\n  }\n}\n","<mat-sidenav-container class=\"sidenav-container\">\n  <mat-sidenav\n    #drawer\n    class=\"sidenav\"\n    fixedInViewport\n    [attr.role]=\"(isHandset$ | async) ? 'dialog' : 'navigation'\"\n    [mode]=\"(isHandset$ | async) ? 'over' : 'side'\"\n    [opened]=\"(isHandset$ | async) === false\"\n  >\n    <mat-toolbar>\n      <a mat-list-item routerLink=\"/\">Menu</a>\n    </mat-toolbar>\n    <mat-nav-list>\n      <a\n        mat-list-item\n        href=\"https://github.com/ignatandrei/BlocklyAutomation\"\n        target=\"_blank\"\n      >\n        <mat-icon> source </mat-icon>\n        Github</a\n      >\n      <mat-divider></mat-divider>\n      <a\n        mat-list-item\n        href=\"https://ignatandrei.github.io/BlocklyAutomation\"\n        target=\"_blank\"\n      >\n        <mat-icon> https </mat-icon>\n        Demo online</a\n      >\n      <mat-divider></mat-divider>\n      <mat-expansion-panel>\n        <mat-expansion-panel-header>\n          <mat-panel-title> Demos {{ demoBlocks.length }} </mat-panel-title>\n        </mat-expansion-panel-header>\n        <a\n          mat-list-item\n          *ngFor=\"let nr = index; let demo; of: demoBlocks\"\n          [routerLink]=\"['/', 'automation', 'loadexample', demo.id]\"\n          target=\"_blank\"\n        >\n          <mat-icon> https </mat-icon> {{ nr + 1 }} {{ demo.description }}</a\n        >\n      </mat-expansion-panel>\n    </mat-nav-list>\n  </mat-sidenav>\n  <mat-sidenav-content>\n    <mat-toolbar color=\"primary\" class=\"nav-bar\">\n      <button\n        type=\"button\"\n        aria-label=\"Toggle sidenav\"\n        mat-icon-button\n        (click)=\"drawer.toggle()\"\n        *ngIf=\"isHandset$ | async\"\n      >\n        <mat-icon aria-label=\"Side nav toggle icon\">menu</mat-icon>\n      </button>\n      <span title='{{version}}'>{{ title }}</span>\n      <!-- <button mat-raised-button color=\"primary\" (click)=\"executeOnDisplayBlockly('LoadSwagger')\">\n        <mat-icon>file_upload</mat-icon>\n        Load Swagger</button>\n       -->\n      \n      <span class=\"example-spacer\"></span>\n      <button  mat-mini-fab color=\"primary\" (click)=\"executeOnDisplayBlockly('createIntro')\">\n        <mat-icon>\n            help_outline            \n        </mat-icon>\n        </button>\n      <button id=\"download\" mat-button [matMenuTriggerFor]=\"download\">\n        <mat-icon> file_download </mat-icon>\n      </button>\n      <mat-menu #download=\"matMenu\">\n\n        <span mat-list-item *ngIf=\"version != latestVersion\">\n          {{version}} => {{latestVersion}}\n        </span>\n        <a\n          mat-list-item\n          href=\"https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseBlocklyAutomation.zip/\"\n          target=\"_blank\"\n        >\n          Download HTML</a>\n\n        <a\n          mat-list-item\n          href=\"https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLin.zip/\"\n          target=\"_blank\"\n        >\n          Download Linux</a>\n        <a\n          mat-list-item\n          href=\"https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseWin.zip/\"\n          target=\"_blank\"\n        >\n          Download Windows</a>\n        <a\n          mat-list-item\n          href=\"https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseIISWin.zip/\"\n          target=\"_blank\"\n        >\n          Download IIS</a>\n        <a\n          mat-list-item\n          href=\"https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLocalAPI.zip/\"\n          target=\"_blank\"\n        >\n          Download LocalAPI</a>\n      </mat-menu>\n\n      <button mat-button [matMenuTriggerFor]=\"examples\">\n        <mat-icon> source </mat-icon>\n      </button>\n\n      <mat-menu #examples=\"matMenu\">\n        <a   mat-list-item [routerLink]=\"['/','automation' ,'studio']\" target=\"_blank\">\n          <mat-icon> star </mat-icon>Studio\n        </a>\n        <a   mat-list-item [routerLink]=\"['/','automation' ,'main']\" target=\"_blank\">\n          <mat-icon> star_half </mat-icon>Single\n        </a>\n        <a\n          mat-list-item\n          href=\"https://github.com/ignatandrei/BlocklyAutomation\"\n          target=\"_blank\"\n        >\n          <mat-icon> source </mat-icon>\n          Github</a\n        >\n        <mat-divider></mat-divider>\n        <a\n          mat-list-item\n          href=\"https://ignatandrei.github.io/BlocklyAutomation\"\n          target=\"_blank\"\n        >\n          <mat-icon> https </mat-icon>\n          Demo online</a\n        >\n      </mat-menu>\n    </mat-toolbar>\n    <!-- Add Content Here -->\n    <div class=\"main-content\">\n      <router-outlet></router-outlet>\n    </div>\n  </mat-sidenav-content>\n</mat-sidenav-container>\n\n<footer>\n  <small>{{footer}}</small>\n  <small>{{standalone?\"standalone\":\"browser\"}} {{version}} -> {{latestVersion}}</small>\n</footer>\n  ","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\nimport 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","// exports.printMsg = function() {\n//     window.alert(\"This is a message from the demo package\");\n//   }\n\n// exports.filter1={\n//   \"asd\":\"asdasd\"\n// }\n\nmodule.exports = {\n  \n  interpreterHelper: require('./interpreterHelper'),\n  saveBlocksUrl: require('./saveBlocksUrl'),\n  saveLoad: require('./saveLoad'),\n\n};","const synthPiano = require('./js/audioTest.js');\n// const vex = require('vex-js');\n// vex.registerPlugin(require('vex-dialog'));\nexports.createInterpreter = function(workspace,BlocklyJavaScript){\n    return {\n        latestCode : '',\n        workspace:workspace,\n        BlocklyJavaScript:BlocklyJavaScript,\n        step : 0,\n        highlightPause : false,\n        myInterpreter : null,\n        runner: null,\n        generateCodeAndLoadIntoInterpreter: function(){\n            // Generate BlocklyJavaScript code and parse it.\n            this.BlocklyJavaScript.STATEMENT_PREFIX = 'highlightBlock(%1);\\n';\n            this.BlocklyJavaScript.addReservedWords('highlightBlock');\n            this.latestCode = this.BlocklyJavaScript.workspaceToCode(workspace);\n            //window.alert(this.latestCode);\n            this.resetStepUi(true);\n\n\n        },\n        resetStepUi:function(clearOutput){\n            // Reset the UI to the start of the program.\n            this.step = 0;\n\n            this.workspace.highlightBlock(null);\n            this.highlightPause = false;\n        },\n        resetInterpreter: function(){\n            this.myInterpreter = null;\n            if (this.runner) {\n                window.clearTimeout(this.runner);\n                this.runner = null;\n            }\n        },\n        // runnerThis : function (callBackProgramComplete) {\n        //     if (this.myInterpreter) {\n        //         var hasMore = this.myInterpreter.run();\n        //         if (hasMore) {\n        //             // Execution is currently blocked by some async call.\n        //             // Try again later.\n        //             setTimeout(this.runner, 10);\n        //         } else {\n        //           if(callBackProgramComplete)\n        //             callBackProgramComplete();\n        //             else\n        //             console.log('\\n\\n<< Program complete! >>');\n        //             //FinishGrid();\n        //             this.resetInterpreter();\n        //             this.resetStepUi(false);\n        //         }\n        //     }\n        // },\n\n        \n        highlightBlock: function(id) {\n            this.workspace.highlightBlock(id);\n            highlightPause = true;\n          },\n\n          nextStep: function(self,callBackProgramComplete) {\n            console.log('next step');\n\n            if (self.myInterpreter.step()) {\n                // var s1=self;\n                // var s2= callBackProgramComplete;\n                // console.log('s1',s1);\n              setTimeout((a,b)=>{a.nextStep(a,b);}, 10,self,callBackProgramComplete);\n            }\n            else\n                {\n                    if(callBackProgramComplete)\n                          callBackProgramComplete();\n                        else\n                          console.log('\\n\\n<< Program complete >>');\n                        self.resetInterpreter();\n                        self.resetStepUi(false);\n                }\n          }\n        ,\n        runCode: function( newInterpreterConstructor, callBackData,callBackProgramComplete , code) {\n            // console.log('z',code);\n            if(code == ''){\n                code = this.latestCode;\n            }\n            if (!this.myInterpreter) {\n                // First statement of this code.\n                // Clear the program output.\n                this.resetStepUi(true);\n            }\n            this.generateCodeAndLoadIntoInterpreter();\n            var self=this;\n            self.myInterpreter = newInterpreterConstructor(code,(G,I)=> self.initApiJS(G,I, self, callBackData,callBackProgramComplete ));\n            if(window[\"runOneByOne\"]==1){\n                this.nextStep(self,callBackProgramComplete);\n                return;\n            }\n            \n            setTimeout(function () {\n                this.highlightPause=false;\n                \n                // console.log(self.latestCode);\n                // console.log(self.BlocklyJavaScript);\n                \n                \n                self.runner = function() {\n                    if (self.myInterpreter) {\n                        // debugger;\n                      var hasMore = self.myInterpreter.run();\n                      if (hasMore) {\n                        // Execution is currently blocked by some async call.\n                        // Try again later.\n                        setTimeout(self.runner, 10);\n                      } else {\n                        if(callBackProgramComplete)\n                          callBackProgramComplete();\n                        else\n                          console.log('\\n\\n<< Program complete >>');\n                        self.resetInterpreter();\n                        self.resetStepUi(false);\n                      }\n                    }\n                  };\n                  if(self.runner)\n                    self.runner();\n                }, 100);\n\n        },\n\n        initInterpreterWaitForSeconds: function(interpreter, globalObject) {\n            // Ensure function name does not conflict with variable names.\n            this.BlocklyJavaScript.addReservedWords('waitForSeconds');\n          \n            var wrapper = interpreter.createAsyncFunction(\n              function(timeInSeconds, callback) {\n                // Delay the call to the callback.\n                setTimeout(callback, timeInSeconds * 1000);\n              });\n            interpreter.setProperty(globalObject, 'waitForSeconds', wrapper);\n          },\n          getCreds: function(interpreter, withCredsForDomain,href) {\n            var creds = interpreter.pseudoToNative(withCredsForDomain);\n            var hostname = '(localSite)';\n            if (href.startsWith('http://') || href.startsWith('https://')) {\n                hostname = (new URL(href)).hostname;\n            }\n            var withCreds=false;\n            if (hostname in creds) {\n              withCreds = creds[hostname];\n            }\n            else if(\"*\" in creds){\n              withCreds = creds[\"*\"]; \n            }  \n            return withCreds;\n        },\n              getHeaders:function(interpreter,headersForDomain, href){\n            var heads = interpreter.pseudoToNative(headersForDomain);\n            var hostname = '(localSite)';\n            if (href.startsWith('http://') || href.startsWith('https://')) {\n                hostname = (new URL(href)).hostname;\n            }\n            var arrHeaders = [];\n            // console.log(\"heads2\",heads);\n            if (hostname in heads) {\n                 arrHeaders = heads[hostname];\n            }\n            else if(\"*\" in heads){\n              arrHeaders = heads[\"*\"];\n            }\n            return arrHeaders;            \n          },\n\n          doGet : function (href, callback, headers, withCreds) {\n            // console.log(href, callback);\n            let req = new XMLHttpRequest();\n          \n            req.open('GET', href, true);\n            this.generateDataAndCreds(req, headers, withCreds,false);          \n            req.onreadystatechange = function () {\n                if (req.readyState == 4) {\n                    if (req.status >= 200 && req.status < 300) {\n                        var answer = JSON.stringify({\n                            'origHref': href,\n                            'objectToSend': '',\n                            'status': req.status,\n                            'statusOK': true,\n                            'text': req.responseText\n        \n                        });\n                        return callback(answer);\n        \n        \n                    } else {\n                        \n                        var answer = JSON.stringify({\n                            'origHref': href,\n                            'objectToSend': '',\n                            'status': req.status,\n                            'statusOK': false,\n                            'text': req.responseText,\n                            'headers' : req.getAllResponseHeaders()\n        \n        \n                        });\n                        return callback(answer);\n        \n                    }\n                }\n                else {\n                    //window.alert(`error ${href} ${req.status}`);\n                }\n            };\n            req.send(null);\n        },\n        \n        exportToFile : function (nameFile, content, toByte) {\n\n          // try {\n          //     var isFileSaverSupported = !!new Blob;\n          // } catch (e) {\n          //     window.alert('file saving not supported');\n          //     return;\n          // }\n          var FileSaver = require('file-saver');\n      \n          var blob ;\n          \n          if (toByte) {\n              blob = this.b64toBlob(content);\n          }\n          else {\n              blob = new Blob([content], { type: \"text/plain;charset=utf-8\" });\n          }    \n          FileSaver.saveAs(blob, nameFile);    \n          return nameFile;\n      },\n      b64toBlob : function (b64Data, contentType = '', sliceSize = 512) {\n          const byteCharacters = atob(b64Data);\n          const byteArrays = [];\n      \n          for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n              const slice = byteCharacters.slice(offset, offset + sliceSize);\n      \n              const byteNumbers = new Array(slice.length);\n              for (let i = 0; i < slice.length; i++) {\n                  byteNumbers[i] = slice.charCodeAt(i);\n              }\n      \n              const byteArray = new Uint8Array(byteNumbers);\n              byteArrays.push(byteArray);\n          }\n      \n          const blob = new Blob(byteArrays, { type: contentType });\n          return blob;\n      },\n        \n\n      displayDateCurrentAsHuman :function ()  {\n\n        //undefined - get the date format form user browser.\n        let today = new Date().toLocaleDateString(undefined, {\n            day: 'numeric',\n            month: 'numeric',\n            year: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit'\n        });\n       \n        return today;\n    },\n    \n    displayDateCurrentAsIso : function () {\n        let today = new Date().toISOString();\n        return today;\n    }\n    ,\n    displayDateCurrentAsUnix : function() {\n        return Date.now();\n    }\n    ,\n    displayDateFormatted: function (format) {\n\n      switch (format) {\n          case 'human':\n              // console.log(\"calling displayDateCurrentAsHuman\")\n              return this.displayDateCurrentAsHuman();\n              break;\n          case 'iso':\n              //console.log(\"calling displayDateCurrentAsIso\")\n              return this.displayDateCurrentAsIso();\n              break;\n          case 'unix':\n              // console.log(\"calling displayDateCurrentAsUnix\")\n              return this.displayDateCurrentAsUnix();\n              break;\n          default:\n              console.log('Date time format not suported')\n      }\n  },\n  generateDataAndCreds(req,headers,withCreds,hasSomethingToSend){\n//read https://developer.mozilla.org/en-US/docs/Glossary/CORS-safelisted_request_header\n    if(withCreds)\n        req.withCredentials = withCreds;\n    else{\n        var hasContentType=false;\n        // \n        if(headers && headers.length>0){        \n        //alert(JSON.stringify(headers));\n            for(var iHeader=0;iHeader<headers.length;iHeader++){\n                var head=headers[iHeader];\n                if(head.name==\"Content-Type\"){\n                    hasContentType=true;\n                }\n                req.setRequestHeader(head.name,head.value);\n            }\n        };\n         if(hasSomethingToSend && !hasContentType){\n             req.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\n         }\n    }\n  },\n  doPut : (href, objectToPost, callback,headers,withCreds) => {\n    let data = objectToPost;\n    //console.log(`sending ${data}`);\n    let req = new XMLHttpRequest();\n\n    req.open('PUT', href, true);\n    this.generateDataAndCreds(req,headers,withCreds,objectToPost?true:false);\n    req.onreadystatechange = function () {\n        if (req.readyState == 4) {\n            if (req.status >= 200 && req.status < 300) {\n                var answer = JSON.stringify({\n                    'origHref': href,\n                    'objectToSend': objectToPost,\n                    'status': req.status,\n                    'statusOK': true,\n                    'text': req.responseText\n\n                });\n                return callback(answer);\n\n\n            } else {\n                var answer = JSON.stringify({\n                    'origHref': href,\n                    'objectToSend': objectToPost,\n                    'status': req.status,\n                    'statusOK': false,\n                    'text': req.responseText,\n                    'objectToSend': objectToPost,\n                    'headers' : req.getAllResponseHeaders()\n\n\n                });\n                return callback(answer);\n\n            }\n        }\n        else {\n            //window.alert(`error ${href} ${req.status}`);\n        }\n    };\n    req.send(data);\n  }\n,\ndoDelete : function (href, objectToDelete ,callback, headers,withCreds) {\n    let data = objectToDelete;\n    var req = new XMLHttpRequest();\n\n  req.open('DELETE', href, true);\n  //req.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\n  this.generateDataAndCreds(req,headers,withCreds,objectToDelete?true:false); \n  req.onreadystatechange = function () {\n      if (req.readyState == 4) {\n          if (req.status >= 200 && req.status < 300) {\n              var answer = JSON.stringify({\n                  'origHref': href,\n                  'objectToSend': '',\n                  'status': req.status,\n                  'statusOK': true,\n                  'text': req.responseText\n\n              });\n              return callback(answer);\n\n\n          } else {\n              var answer = JSON.stringify({\n                  'origHref': href,\n                  'objectToSend': '',\n                  'status': req.status,\n                  'statusOK': false,\n                  'text': req.responseText,\n                  'objectToSend': objectToDelete,\n                  'headers' : req.getAllResponseHeaders()\n\n\n              });\n              return callback(answer);\n\n          }\n      }\n      else {\n          //window.alert(`error ${href} ${req.status}`);\n      }\n  };\n  req.send(data);\n}, \n   doPost : function (href, objectToPost, callback, headers, withCreds) {\n    let data = objectToPost;\n    // console.log(`sending `, data);\n    let req = new XMLHttpRequest();\n    req.open('POST', href, true);\n    this.generateDataAndCreds(req,headers,withCreds, objectToPost?true:false);\n    \n    //req.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\n\n    req.onreadystatechange = function () {\n        if (req.readyState == 4) {\n            if (req.status >= 200 && req.status < 300) {\n                var answer = JSON.stringify({\n                    'origHref': href,\n                    'objectToSend': objectToPost,\n                    'status': req.status,\n                    'statusOK': true,\n                    'text': req.responseText\n\n                });\n                return callback(answer);\n\n\n            } else {\n                // console.log('x_',req);\n                var answer = JSON.stringify({\n                    'origHref': href,\n                    'objectToSend': objectToPost,\n                    'status': req.status,\n                    'statusOK': false,\n                    'text': req.responseText,\n                    'objectToSend': objectToPost,\n                    'headers' : req.getAllResponseHeaders()\n\n                });\n                return callback(answer);\n\n            }\n        }\n        else {\n            //window.alert(`error ${href} ${req.status}`);\n        }\n    };\n    req.send(data);\n  }\n,\n\n        initApiJS:function (interpreter, globalObject,thisClass,callBackData,callBackProgramComplete ) {\n            \n          var wrapper = (item) => {\n            if(callBackData)\n              callBackData('\\n error --' + '\\n' + item + '\\n error --');            \n            else\n              console.log(item);\n       \n        };\n\n        interpreter.setProperty(globalObject, 'errHandler',\n            interpreter.createNativeFunction(wrapper));\n\n\n           \n                \n\n        var withCredsForDomain = interpreter.nativeToPseudo({ '(localSite)': false });\n        interpreter.setProperty(globalObject, 'withCredsForDomain', withCredsForDomain);\n\n          var headersForDomain = interpreter.nativeToPseudo({ '(localSite)': [] });\n          interpreter.setProperty(globalObject, 'headersForDomain',headersForDomain);\n\n          var wrapper = function(text) {\n            text = text ? text.toString() : '';\n            window.alert(text);\n          };\n          interpreter.setProperty(globalObject, 'alert1',\n              interpreter.createNativeFunction(wrapper));\n\n              var wrapper = function(note, octave, duration) {\n                var piano = synthPiano.Synth.createInstrument('piano');\n                piano.play(note,octave,duration);\n                //window.alert(text);\n              };\n              interpreter.setProperty(globalObject, 'playPiano',\n                  interpreter.createNativeFunction(wrapper));\n    \n              var wrapper = function(msg, id, item) {\n                thisClass.highlightBlock(id);\n                debugger;\n                console.log(msg, id,item);                \n              };\n              interpreter.setProperty(globalObject, 'startDebugger',\n                  interpreter.createNativeFunction(wrapper));\n    \n    \n            // Add an API function for the alert() block, generated for \"text_print\" blocks.\n            var wrapper = function(text) {\n              text = text ? text.toString() : '';\n              //outputArea.value = outputArea.value + '\\n' + text;\n              if(callBackData)\n                callBackData(text);\n              else\n                console.log(text);\n            };\n            interpreter.setProperty(globalObject, 'alert',\n                interpreter.createNativeFunction(wrapper));\n\n                var wrapper = (nr, callback) => {\n                  console.log(`waiting seconds ${nr}`);\n                  setTimeout(callback, nr * 1000);\n              };\n              interpreter.setProperty(globalObject, 'waitTime',\n                  interpreter.createAsyncFunction(wrapper));\n\n                \n          var wrapper = (it) => thisClass.displayDateFormatted(it);\n          interpreter.setProperty(globalObject, 'displayDateFormatted',\n                        interpreter.createNativeFunction(wrapper));\n            \n    \n            var wrapper = (it, content, toByte) => thisClass.exportToFile(it, content, toByte);\n            interpreter.setProperty(globalObject, 'exportToFile',\n                    interpreter.createNativeFunction(wrapper));\n        \n\n            var wrapper = (arrayOrString) => {             \n    \n                let arr = typeof arrayOrString != 'object' ? JSON.parse(arrayOrString) : {};\n            \n                arr = [Object.keys(arr[0])].concat(arr)\n                var data = arr.map(it => {\n                    return Object.values(it).toString()\n                }).join('\\n');\n                return data;\n            \n            }\n            interpreter.setProperty(globalObject, 'convertToCSV',\n                interpreter.createNativeFunction(wrapper));\n\n            \n          var wrapper = function (text) {\n                  window.open(text,'_blank');\n              };\n          interpreter.setProperty(globalObject, 'open',\n                  interpreter.createNativeFunction(wrapper));\n  \n  \n        var wrapper = function (url, hostname){\n            hostname = hostname ? hostname.toString() : '';\n            hostname=hostname.trim();\n            if(hostname.length == 0)\n            {\n                return url;\n            }\n            \n            url=url?url:'';\n            url=url.trim();\n            if(url.length == 0){\n                url=hostname;\n                if(!url.startsWith(\"http\")){\n                    throw `please put in front of ${hostname} http:// or https://`;\n                }\n            }\n            var url= new URL(url);\n            //console.log(`url ${url.hostname} to ${hostname}`);\n            url.hostname = hostname.replace('https://','').replace('http://','');\n            //console.log(`url ${url.href}`);\n            var ret=url.href;\n            if(ret.endsWith('/'))\n                ret=ret.substring(0,ret.length-1);\n            return ret;\n        }\n        interpreter.setProperty(globalObject, 'changeHost',\n                                interpreter.createNativeFunction(wrapper));\n\n        var wrapper = function (url, port){\n            var url= new URL(url);\n            console.log(`url ${url.href}`);\n            url.port = port;\n            console.log(`url ${url.href}`);\n            var ret=url.href;\n            if(ret.endsWith('/'))\n                ret=ret.substring(0,ret.length-1);\n            return ret;\n        }\n        interpreter.setProperty(globalObject, 'changePort',\n                                interpreter.createNativeFunction(wrapper));\n        \n//speak\nvar wrapper = function (text, voice, rate, pitch, volume) {\n    var msg = new SpeechSynthesisUtterance(text);\n    window.speechSynthesis.speak(msg);\n}\ninterpreter.setProperty(globalObject, 'speakDefault',\n                        interpreter.createNativeFunction(wrapper));\n\n//speak\n                                \n\n\n                                \n            // Add an API function for the prompt() block.\n            // var wrapper = function(text) {\n            //   text = text ? text.toString() : '';\n            //   return interpreter.createPrimitive(prompt(text));\n            // };\n            // interpreter.setProperty(globalObject, 'prompt',\n            //     interpreter.createNativeFunction(wrapper));\n      \n            // var wrapper = interpreter.createAsyncFunction(\n            //   function(text, callback) {\n            //     vex.defaultOptions.className = 'vex-theme-os';\n            //     text = text ? text.toString() : '';\n            //   return vex.dialog.prompt( { message:text,callback: callback});\n\n            // });\n            var wrapper = function(message,defaultPrompt, callback) {\n                message= message? message.toString() : '';\n                defaultPrompt= defaultPrompt? defaultPrompt.toString() : '';\n                var res= window.prompt(message,defaultPrompt);\n                callback(res);\n              }; \n              interpreter.setProperty(globalObject, 'prompt',\n                  interpreter.createAsyncFunction(wrapper));\n            \n      \n            // Add an API for the wait block.  See wait_block.js\n            // this.initInterpreterWaitForSeconds(interpreter, globalObject);\n            thisClass.BlocklyJavaScript.addReservedWords('waitForSeconds');\n          \n            var wrapper = interpreter.createAsyncFunction(\n              function(timeInSeconds, callback) {\n                // Delay the call to the callback.\n                setTimeout(callback, timeInSeconds * 1000);\n              });\n            interpreter.setProperty(globalObject, 'waitForSeconds', wrapper);\n\n\n            var wrapper = (href, callback) => {\n\n              \n              var arrHeaders = thisClass.getHeaders(interpreter, headersForDomain, href);\n              var withCreds = thisClass.getCreds(interpreter, withCredsForDomain, href);\n              \n              return thisClass.doGet(href, callback, arrHeaders, withCreds);\n          }\n          interpreter.setProperty(globalObject, 'getXhr',\n              interpreter.createAsyncFunction(wrapper));\n\n\n              var wrapper = (href, objectToPost, callback) => {\n                try {\n                    var arrHeaders = thisClass.getHeaders(interpreter, headersForDomain, href);\n                    var withCreds = thisClass.getCreds(interpreter, withCredsForDomain, href);\n                    thisClass.doPost(href, objectToPost, callback, arrHeaders, withCreds);\n                }\n                catch (e) {\n                    alert(\"is an error\" + e);\n                }\n            };\n            interpreter.setProperty(globalObject, 'postXhr',\n                interpreter.createAsyncFunction(wrapper)); \n\n                var wrapper = (href, objectToDelete, callback) => {\n                  try {\n                    var arrHeaders = thisClass.getHeaders(interpreter, headersForDomain, href);\n                    var withCreds = thisClass.getCreds(interpreter, withCredsForDomain, href);                      \n                    thisClass.doDelete(href, objectToDelete,callback,arrHeaders, withCreds);\n                  }\n                  catch (e) {\n                      alert(\"is an error\" + e);\n                  }\n              };\n  \n  \n  \n              interpreter.setProperty(globalObject, 'deleteXhr',\n                  interpreter.createAsyncFunction(wrapper));\n  \n            \n                var wrapper = (href, objectToPost, callback) => {\n                  try {\n                      \n        \n                      var heads = interpreter.pseudoToNative(headersForDomain);\n                      var hostname = '(localSite)';\n                      if (href.startsWith('http://') || href.startsWith('https://')) {\n                          hostname = (new URL(href)).hostname;\n                      }\n                      var arrHeaders = [];\n                      if (hostname in heads) {\n                          arrHeaders = heads[hostname];\n                      }\n                      var withCreds = false;\n  \n                      // if (hostname in creds) {\n                      //     withCreds = creds[hostname];\n                      // }\n                      thisClass.doPut(href, objectToPost, callback, arrHeaders, withCreds);\n                  }\n                  catch (e) {\n                      alert(\"is an error\" + e);\n                  }\n              };\n              interpreter.setProperty(globalObject, 'putXhr',\n                  interpreter.createAsyncFunction(wrapper));\n  \n\n            \n            // Add an API function for highlighting blocks.\n            var wrapper = function(id) {\n              id = id ? id.toString() : '';\n              return interpreter.createPrimitive(thisClass.highlightBlock(id));\n            };\n            interpreter.setProperty(globalObject, 'highlightBlock',\n                interpreter.createNativeFunction(wrapper));\n          }\n      \n    }\n\n}","var Synth, AudioSynth, AudioSynthInstrument;\n!function(){\n\n\tvar URL = window.URL || window.webkitURL;\n\tvar Blob = window.Blob;\n\n\tif(!URL || !Blob) {\n\t\tthrow new Error('This browser does not support AudioSynth');\n\t}\n\n\tvar _encapsulated = false;\n\tvar AudioSynthInstance = null;\n\tvar pack = function(c,arg){ return [new Uint8Array([arg, arg >> 8]), new Uint8Array([arg, arg >> 8, arg >> 16, arg >> 24])][c]; };\n\tvar setPrivateVar = function(n,v,w,e){Object.defineProperty(this,n,{value:v,writable:!!w,enumerable:!!e});};\n\tvar setPublicVar = function(n,v,w){setPrivateVar.call(this,n,v,w,true);};\n\tAudioSynthInstrument = function AudioSynthInstrument(){this.__init__.apply(this,arguments);};\n\tvar setPriv = setPrivateVar.bind(AudioSynthInstrument.prototype);\n\tvar setPub = setPublicVar.bind(AudioSynthInstrument.prototype);\n\tsetPriv('__init__', function(a,b,c) {\n\t\tif(!_encapsulated) { throw new Error('AudioSynthInstrument can only be instantiated from the createInstrument method of the AudioSynth object.'); }\n\t\tsetPrivateVar.call(this, '_parent', a);\n\t\tsetPublicVar.call(this, 'name', b);\n\t\tsetPrivateVar.call(this, '_soundID', c);\n\t});\n\tsetPub('play', function(note, octave, duration) {\n\t\treturn this._parent.play(this._soundID, note, octave, duration);\n\t});\n\tsetPub('generate', function(note, octave, duration) {\n\t\treturn this._parent.generate(this._soundID, note, octave, duration);\n\t});\n\tAudioSynth = function AudioSynth(){if(AudioSynthInstance instanceof AudioSynth){return AudioSynthInstance;}else{ this.__init__(); return this; }};\n\tsetPriv = setPrivateVar.bind(AudioSynth.prototype);\n\tsetPub = setPublicVar.bind(AudioSynth.prototype);\n\tsetPriv('_debug',false,true);\n\tsetPriv('_bitsPerSample',16);\n\tsetPriv('_channels',1);\n\tsetPriv('_sampleRate',44100,true);\n\tsetPub('setSampleRate', function(v) {\n\t\tthis._sampleRate = Math.max(Math.min(v|0,44100), 4000);\n\t\tthis._clearCache();\n\t\treturn this._sampleRate;\n\t});\n\tsetPub('getSampleRate', function() { return this._sampleRate; });\n\tsetPriv('_volume',32768,true);\n\tsetPub('setVolume', function(v) {\n\t\tv = parseFloat(v); if(isNaN(v)) { v = 0; }\n\t\tv = Math.round(v*32768);\n\t\tthis._volume = Math.max(Math.min(v|0,32768), 0);\n\t\tthis._clearCache();\n\t\treturn this._volume;\n\t});\n\tsetPub('getVolume', function() { return Math.round(this._volume/32768*10000)/10000; });\n\tsetPriv('_notes',{'C':261.63,'C#':277.18,'D':293.66,'D#':311.13,'E':329.63,'F':349.23,'F#':369.99,'G':392.00,'G#':415.30,'A':440.00,'A#':466.16,'B':493.88});\n\tsetPriv('_fileCache',[],true);\n\tsetPriv('_temp',{},true);\n\tsetPriv('_sounds',[],true);\n\tsetPriv('_mod',[function(i,s,f,x){return Math.sin((2 * Math.PI)*(i/s)*f+x);}]);\n\tsetPriv('_resizeCache', function() {\n\t\tvar f = this._fileCache;\n\t\tvar l = this._sounds.length;\n\t\twhile(f.length<l) {\n\t\t\tvar octaveList = [];\n\t\t\tfor(var i = 0; i < 8; i++) {\n\t\t\t\tvar noteList = {};\n\t\t\t\tfor(var k in this._notes) {\n\t\t\t\t\tnoteList[k] = {};\n\t\t\t\t} \n\t\t\t\toctaveList.push(noteList);\n\t\t\t}\n\t\t\tf.push(octaveList);\n\t\t}\n\t});\n\tsetPriv('_clearCache', function() {\n\t\tthis._fileCache = [];\n\t\tthis._resizeCache();\n\t});\n\tsetPub('generate', function(sound, note, octave, duration) {\n\t\tvar thisSound = this._sounds[sound];\n\t\tif(!thisSound) {\n\t\t\tfor(var i=0;i<this._sounds.length;i++) {\n\t\t\t\tif(this._sounds[i].name==sound) {\n\t\t\t\t\tthisSound = this._sounds[i];\n\t\t\t\t\tsound = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(!thisSound) { throw new Error('Invalid sound or sound ID: ' + sound); }\n\t\tvar t = (new Date).valueOf();\n\t\tthis._temp = {};\n\t\toctave |= 0;\n\t\toctave = Math.min(8, Math.max(1, octave));\n\t\tvar time = !duration?2:parseFloat(duration);\n\t\tif(typeof(this._notes[note])=='undefined') { throw new Error(note + ' is not a valid note.'); }\n\t\tif(typeof(this._fileCache[sound][octave-1][note][time])!='undefined') {\n\t\t\tif(this._debug) { console.log((new Date).valueOf() - t, 'ms to retrieve (cached)'); }\n\t\t\treturn this._fileCache[sound][octave-1][note][time];\n\t\t} else {\n\t\t\tvar frequency = this._notes[note] * Math.pow(2,octave-4);\n\t\t\tvar sampleRate = this._sampleRate;\n\t\t\tvar volume = this._volume;\n\t\t\tvar channels = this._channels;\n\t\t\tvar bitsPerSample = this._bitsPerSample;\n\t\t\tvar attack = thisSound.attack(sampleRate, frequency, volume);\n\t\t\tvar dampen = thisSound.dampen(sampleRate, frequency, volume);\n\t\t\tvar waveFunc = thisSound.wave;\n\t\t\tvar waveBind = {modulate: this._mod, vars: this._temp};\n\t\t\tvar val = 0;\n\t\t\tvar curVol = 0;\n\n\t\t\tvar data = new Uint8Array(new ArrayBuffer(Math.ceil(sampleRate * time * 2)));\n\t\t\tvar attackLen = (sampleRate * attack) | 0;\n\t\t\tvar decayLen = (sampleRate * time) | 0;\n\n\t\t\tfor (var i = 0 | 0; i !== attackLen; i++) {\n\t\t\n\t\t\t\tval = volume * (i/(sampleRate*attack)) * waveFunc.call(waveBind, i, sampleRate, frequency, volume);\n\n\t\t\t\tdata[i << 1] = val;\n\t\t\t\tdata[(i << 1) + 1] = val >> 8;\n\n\t\t\t}\n\n\t\t\tfor (; i !== decayLen; i++) {\n\n\t\t\t\tval = volume * Math.pow((1-((i-(sampleRate*attack))/(sampleRate*(time-attack)))),dampen) * waveFunc.call(waveBind, i, sampleRate, frequency, volume);\n\n\t\t\t\tdata[i << 1] = val;\n\t\t\t\tdata[(i << 1) + 1] = val >> 8;\n\n\t\t\t}\n\n\t\t\tvar out = [\n\t\t\t\t'RIFF',\n\t\t\t\tpack(1, 4 + (8 + 24/* chunk 1 length */) + (8 + 8/* chunk 2 length */)), // Length\n\t\t\t\t'WAVE',\n\t\t\t\t// chunk 1\n\t\t\t\t'fmt ', // Sub-chunk identifier\n\t\t\t\tpack(1, 16), // Chunk length\n\t\t\t\tpack(0, 1), // Audio format (1 is linear quantization)\n\t\t\t\tpack(0, channels),\n\t\t\t\tpack(1, sampleRate),\n\t\t\t\tpack(1, sampleRate * channels * bitsPerSample / 8), // Byte rate\n\t\t\t\tpack(0, channels * bitsPerSample / 8),\n\t\t\t\tpack(0, bitsPerSample),\n\t\t\t\t// chunk 2\n\t\t\t\t'data', // Sub-chunk identifier\n\t\t\t\tpack(1, data.length * channels * bitsPerSample / 8), // Chunk length\n\t\t\t\tdata\n\t\t\t];\n\t\t\tvar blob = new Blob(out, {type: 'audio/wav'});\n\t\t\tvar dataURI = URL.createObjectURL(blob);\n\t\t\tthis._fileCache[sound][octave-1][note][time] = dataURI;\n\t\t\tif(this._debug) { console.log((new Date).valueOf() - t, 'ms to generate'); }\n\t\t\treturn dataURI;\n\t\t}\n\t});\n\tsetPub('play', function(sound, note, octave, duration) {\n\t\tvar src = this.generate(sound, note, octave, duration);\n\t\tvar audio = new Audio(src);\n\t\taudio.play();\n\t\treturn true;\n\t});\n\tsetPub('debug', function() { this._debug = true; });\n\tsetPub('createInstrument', function(sound) {\n\t\tvar n = 0;\n\t\tvar found = false;\n\t\tif(typeof(sound)=='string') {\n\t\t\tfor(var i=0;i<this._sounds.length;i++) {\n\t\t\t\tif(this._sounds[i].name==sound) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tn = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif(this._sounds[sound]) {\n\t\t\t\tn = sound;\n\t\t\t\tsound = this._sounds[n].name;\n\t\t\t\tfound = true;\n\t\t\t}\n\t\t}\n\t\tif(!found) { throw new Error('Invalid sound or sound ID: ' + sound); }\n\t\t_encapsulated = true;\n\t\tvar ins = new AudioSynthInstrument(this, sound, n);\n\t\t_encapsulated = false;\n\t\treturn ins;\n\t});\n\tsetPub('listSounds', function() {\n\t\tvar r = [];\n\t\tfor(var i=0;i<this._sounds.length;i++) {\n\t\t\tr.push(this._sounds[i].name);\n\t\t}\n\t\treturn r;\n\t});\n\tsetPriv('__init__', function(){\n\t\tthis._resizeCache();\n\t});\n\tsetPub('loadSoundProfile', function() {\n\t\tfor(var i=0,len=arguments.length;i<len;i++) {\n\t\t\tvar o = arguments[i];\n\t\t\tif(!(o instanceof Object)) { throw new Error('Invalid sound profile.'); }\n\t\t\tthis._sounds.push(o);\n\t\t}\n\t\tthis._resizeCache();\n\t\treturn true;\n\t});\n\tsetPub('loadModulationFunction', function() {\n\t\tfor(var i=0,len=arguments.length;i<len;i++) {\n\t\t\tvar f = arguments[i];\n\t\t\tif(typeof(f)!='function') { throw new Error('Invalid modulation function.'); }\n\t\t\tthis._mod.push(f);\n\t\t}\n\t\treturn true;\n\t});\n\tAudioSynthInstance = new AudioSynth();\n\tSynth = AudioSynthInstance;\n}();\n\nSynth.loadModulationFunction(\n\tfunction(i, sampleRate, frequency, x) { return 1 * Math.sin(2 * Math.PI * ((i / sampleRate) * frequency) + x); },\n\tfunction(i, sampleRate, frequency, x) { return 1 * Math.sin(4 * Math.PI * ((i / sampleRate) * frequency) + x); },\n\tfunction(i, sampleRate, frequency, x) { return 1 * Math.sin(8 * Math.PI * ((i / sampleRate) * frequency) + x); },\n\tfunction(i, sampleRate, frequency, x) { return 1 * Math.sin(0.5 * Math.PI * ((i / sampleRate) * frequency) + x); },\n\tfunction(i, sampleRate, frequency, x) { return 1 * Math.sin(0.25 * Math.PI * ((i / sampleRate) * frequency) + x); },\n\tfunction(i, sampleRate, frequency, x) { return 0.5 * Math.sin(2 * Math.PI * ((i / sampleRate) * frequency) + x); },\n\tfunction(i, sampleRate, frequency, x) { return 0.5 * Math.sin(4 * Math.PI * ((i / sampleRate) * frequency) + x); },\n\tfunction(i, sampleRate, frequency, x) { return 0.5 * Math.sin(8 * Math.PI * ((i / sampleRate) * frequency) + x); },\n\tfunction(i, sampleRate, frequency, x) { return 0.5 * Math.sin(0.5 * Math.PI * ((i / sampleRate) * frequency) + x); },\n\tfunction(i, sampleRate, frequency, x) { return 0.5 * Math.sin(0.25 * Math.PI * ((i / sampleRate) * frequency) + x); }\n);\n\nSynth.loadSoundProfile({\n\tname: 'piano',\n\tattack: function() { return 0.002; },\n\tdampen: function(sampleRate, frequency, volume) {\n\t\treturn Math.pow(0.5*Math.log((frequency*volume)/sampleRate),2);\n\t},\n\twave: function(i, sampleRate, frequency, volume) {\n\t\tvar base = this.modulate[0];\n\t\treturn this.modulate[1](\n\t\t\ti,\n\t\t\tsampleRate,\n\t\t\tfrequency,\n\t\t\tMath.pow(base(i, sampleRate, frequency, 0), 2) +\n\t\t\t\t(0.75 * base(i, sampleRate, frequency, 0.25)) +\n\t\t\t\t(0.1 * base(i, sampleRate, frequency, 0.5))\n\t\t);\n\t}\n},\n{\n\tname: 'organ',\n\tattack: function() { return 0.3 },\n\tdampen: function(sampleRate, frequency) { return 1+(frequency * 0.01); },\n\twave: function(i, sampleRate, frequency) {\n\t\tvar base = this.modulate[0];\n\t\treturn this.modulate[1](\n\t\t\ti,\n\t\t\tsampleRate,\n\t\t\tfrequency,\n\t\t\tbase(i, sampleRate, frequency, 0) +\n\t\t\t\t0.5*base(i, sampleRate, frequency, 0.25) +\n\t\t\t\t0.25*base(i, sampleRate, frequency, 0.5)\n\t\t);\n\t}\n},\n{\n\tname: 'acoustic',\n\tattack:\tfunction() { return 0.002; },\n\tdampen: function() { return 1; },\n\twave: function(i, sampleRate, frequency) {\n\n\t\tvar vars = this.vars;\n\t\tvars.valueTable = !vars.valueTable?[]:vars.valueTable;\n\t\tif(typeof(vars.playVal)=='undefined') { vars.playVal = 0; }\n\t\tif(typeof(vars.periodCount)=='undefined') { vars.periodCount = 0; }\n\t\n\t\tvar valueTable = vars.valueTable;\n\t\tvar playVal = vars.playVal;\n\t\tvar periodCount = vars.periodCount;\n\n\t\tvar period = sampleRate/frequency;\n\t\tvar p_hundredth = Math.floor((period-Math.floor(period))*100);\n\n\t\tvar resetPlay = false;\n\n\t\tif(valueTable.length<=Math.ceil(period)) {\n\t\n\t\t\tvalueTable.push(Math.round(Math.random())*2-1);\n\t\n\t\t\treturn valueTable[valueTable.length-1];\n\t\n\t\t} else {\n\t\n\t\t\tvalueTable[playVal] = (valueTable[playVal>=(valueTable.length-1)?0:playVal+1] + valueTable[playVal]) * 0.5;\n\t\n\t\t\tif(playVal>=Math.floor(period)) {\n\t\t\t\tif(playVal<Math.ceil(period)) {\n\t\t\t\t\tif((periodCount%100)>=p_hundredth) {\n\t\t\t\t\t\t// Reset\n\t\t\t\t\t\tresetPlay = true;\n\t\t\t\t\t\tvalueTable[playVal+1] = (valueTable[0] + valueTable[playVal+1]) * 0.5;\n\t\t\t\t\t\tvars.periodCount++;\t\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresetPlay = true;\t\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tvar _return = valueTable[playVal];\n\t\t\tif(resetPlay) { vars.playVal = 0; } else { vars.playVal++; }\n\t\n\t\t\treturn _return;\n\t\n\t\t}\n\t}\n},\n{\n\tname: 'edm',\n\tattack:\tfunction() { return 0.002; },\n\tdampen: function() { return 1; },\n\twave: function(i, sampleRate, frequency) {\n\t\tvar base = this.modulate[0];\n\t\tvar mod = this.modulate.slice(1);\n\t\treturn mod[0](\n\t\t\ti,\n\t\t\tsampleRate,\n\t\t\tfrequency,\n\t\t\tmod[9](\n\t\t\t\ti,\n\t\t\t\tsampleRate,\n\t\t\t\tfrequency,\n\t\t\t\tmod[2](\n\t\t\t\t\ti,\n\t\t\t\t\tsampleRate,\n\t\t\t\t\tfrequency,\n\t\t\t\t\tMath.pow(base(i, sampleRate, frequency, 0), 3) +\n\t\t\t\t\t\tMath.pow(base(i, sampleRate, frequency, 0.5), 5) +\n\t\t\t\t\t\tMath.pow(base(i, sampleRate, frequency, 1), 7)\n\t\t\t\t)\n\t\t\t) +\n\t\t\t\tmod[8](\n\t\t\t\t\ti,\n\t\t\t\t\tsampleRate,\n\t\t\t\t\tfrequency,\n\t\t\t\t\tbase(i, sampleRate, frequency, 1.75)\n\t\t\t\t)\n\t\t);\n\t}\n});\nexport { Synth};","function formatInt(number) {\n    return number < 10 ? '0' + number : number;\n}\nfunction formatDate(date) {\n\n    return `${formatInt(date.getFullYear())}${formatInt((date.getMonth() + 1))}${formatInt(date.getDate())}` +\n        `${formatInt(date.getHours())}${formatInt(date.getMinutes())}${formatInt(date.getSeconds())}`;\n\n}\nexports.saveState = function(BLocklyXML, Workspace, id){\n    var cname= 'BlocklyState'+(id?id:\"\");\n    var xml = BLocklyXML.workspaceToDom(Workspace, true);\n    var xml_text = BLocklyXML.domToPrettyText(xml);\n    window.localStorage.setItem(cname, xml_text);\n}\nexports.restoreState = function(BLocklyXML,workspace, id){\n    \n    var cname= 'BlocklyState'+(id?id:\"\");\n    var xml_text = window.localStorage.getItem(cname);\n    //<xml xmlns=\"https://developers.google.com/blockly/xml\"></xml>\n    if(xml_text?.length>62){\n        var xml = BLocklyXML.textToDom(xml_text);\n        BLocklyXML.clearWorkspaceAndLoadFromXml(xml, workspace);\n    }\n    return \"\";\n  }","var FileSaver = require('file-saver');\nexports.DownloadBlocks = function(BlocklyXML, workspace, filename) {\n    var xml = BlocklyXML.workspaceToDom(workspace, true);\n    var xml_text = BlocklyXML.domToPrettyText(xml);    \n    //window.alert(xml_text);\n    var blob = new Blob([xml_text], { type: \"text/plain;charset=utf-16\" });\n    FileSaver.saveAs(blob, filename);\n}\nexports.LoadFile = function(BlocklyXML,workspace,content) {\n        workspace.clear();\n        var dom = BlocklyXML.textToDom(content);\n        BlocklyXML.domToWorkspace(dom, workspace);\n}","const Blockly =require('blockly');\n\nexports.definitionBlocks = function (blocks, javaScript) {\n  blocks['HTMLheaders'] = {\n    init: function() {\n      this.appendValueInput(\"NAME\")\n          .setCheck(null)\n          .appendField(\"Header\")\n          .appendField(new  Blockly.FieldDropdown([[\"H1\",\"H1\"], [\"H2\",\"H2\"], [\"H3\",\"H3\"]]), \"NAME\");\n      this.setOutput(true, null);\n      this.setColour(240);\n   this.setTooltip(\"string to Header \");\n   this.setHelpUrl(\"\");\n    }\n  };\n\n  javaScript['HTMLheaders'] = function(block) {\n    var dropdown_name = block.getFieldValue('NAME');\n    var value_name = javaScript.valueToCode(block, 'NAME', javaScript.ORDER_ATOMIC);\n    // if(value_name.startsWith(\"'\") && value_name.endsWith(\"'\")){\n    //   value_name= value_name.substring(1,value_name.length-1);\n    // }\n    // console.log('_x',value_name);\n\n    var code = `'<${dropdown_name}>'+ ${value_name} + '</${dropdown_name}>'`;\n    return [code, javaScript.ORDER_NONE];\n  };\n\n  blocks['HTMLlist'] = {\n    init: function() {\n      this.appendDummyInput()\n        .appendField(\"List \")\n        .appendField(new Blockly.FieldDropdown([[\"OL\",\"ol\"],[\"UL\",\"ul\"] ]), \"listType\");\n      this.appendStatementInput(\"Content\")\n          .setCheck(null);\n      this.setPreviousStatement(true, null);\n      this.setNextStatement(true, null);\n      this.setColour(240);\n  this.setTooltip(\"list - please add li block \");\n   this.setHelpUrl(\"\");\n    }\n  };\n\n  javaScript['HTMLlist'] = function(block) {\n    var dropdown_listtype = block.getFieldValue('listType');\n    var value_listtype = javaScript.valueToCode(block, 'ListType', javaScript.ORDER_ATOMIC);\n    var statements_content = javaScript.statementToCode(block, 'Content');\n    \n    var code = `window.alert('<${dropdown_listtype}>');\\n;${statements_content};\\n;window.alert('</${dropdown_listtype}>');\\n`;\n    \n    return code;\n  };\n\n  blocks['HTMLli'] = {\n    init: function() {\n      this.appendValueInput(\"NAME\")\n          .setCheck(null)\n          .appendField(\"LI\")\n      this.setOutput(true, null);\n      this.setColour(240);\n   this.setTooltip(\"string to LI\");\n   this.setHelpUrl(\"\");\n    }\n  };\n\n  javaScript['HTMLli'] = function(block) {\n    var value_name = javaScript.valueToCode(block, 'NAME', javaScript.ORDER_ATOMIC);\n    // if(value_name.startsWith(\"'\") && value_name.endsWith(\"'\")){\n    //   value_name= value_name.substring(1,value_name.length-1);\n    // }\n    // console.log('_x',value_name);\n\n    var code = `'<li>'+ ${value_name} + '</li>'`;\n    return [code, javaScript.ORDER_NONE];\n  };\n\n\n  blocks['HTMLliStart'] = {\n    init: function() {\n      this.appendDummyInput()\n          .appendField(\"List\")\n          .appendField(new Blockly.FieldDropdown([[\"OL\",\"OL\"], [\"LI\",\"LI\"]]), \"NAME\");\n      this.setColour(240);\n      this.setOutput(true, null);\n      this.setTooltip(\"LI start\");\n   this.setHelpUrl(\"\");\n    }\n  };\n  javaScript['HTMLliStart'] = function(block) {\n    var dropdown_name = block.getFieldValue('NAME');\n    var code = `'<${dropdown_name}>'`;\n    return  [code, javaScript.ORDER_NONE];;\n  };\n\n  blocks['HTMLliStop'] = {\n    init: function() {\n      this.appendDummyInput()\n          .appendField(\"/List\")\n          .appendField(new Blockly.FieldDropdown([[\"OL\",\"OL\"], [\"LI\",\"LI\"]]), \"NAME\");\n      this.setColour(240);\n      this.setOutput(true, null);\n      this.setTooltip(\"LI stop\");\n   this.setHelpUrl(\"\");\n    }\n  };\n  javaScript['HTMLliStop'] = function(block) {\n    var dropdown_name = block.getFieldValue('NAME');\n    var code = `'</${dropdown_name}>'`;\n    return  [code, javaScript.ORDER_NONE];\n  };\n\n  blocks['HTMLlink'] =  {\n    init: function() {\n      this.appendDummyInput()\n          .appendField(\"A\")\n          .appendField(\"target\")\n          .appendField(new Blockly.FieldDropdown([[\"_blank\",\"_blank\"], [\"_self\",\"_self\"], [\"_parent\",\"_parent\"], [\"_top\",\"_top\"]]), \"targetDrop\");\n      this.appendValueInput(\"HREF\")\n          .setCheck(null)\n          .appendField(\"href\");\n      this.appendValueInput(\"text\")\n          .setCheck(null)\n          .appendField(\"text\");\n      this.setOutput(true, null);\n      this.setColour(230);\n   this.setTooltip(\"\");\n   this.setHelpUrl(\"\");\n    }\n  };\n\n  javaScript['HTMLlink'] = function(block) {\n    var dropdown_targetdrop = block.getFieldValue('targetDrop');\n    var value_href = javaScript.valueToCode(block, 'HREF', javaScript.ORDER_ATOMIC);\n    var value_text = javaScript.valueToCode(block, 'text', javaScript.ORDER_ATOMIC);\n    value_text = value_text || value_href;\n    var code = `'<a href=\"'+`+  value_href ;\n    code  +=`+ '\" target=\"${dropdown_targetdrop}\"'`;\n    code+=`+ '>'+` + value_text  + `+ '</a> '`;\n    // code= javaScript.quote_(code);\n    return [code, javaScript.ORDER_NONE];\n  };\n\n\n};\n\n\nexports.fieldXML = function () {\n    return `\n    <block type='text_print'>\" \n               <value name='TEXT'>\" \n                 \n    <block type=\"HTMLheaders\">\n        <value name=\"NAME\">\n            <shadow type=\"text\">\n                <field name=\"TEXT\"></field>\n            </shadow>\n        </value>\n    </block>    \n      </value>\n\n\n      </block>\n        \n<block type=\"HTMLlist\"></block>\n\n<block type='text_print'>\" \n<value name='TEXT'>\" \n  \n<block type=\"HTMLli\">\n<value name=\"NAME\">\n<shadow type=\"text\">\n <field name=\"TEXT\"></field>\n</shadow>\n</value>\n</block>    \n</value>\n</block>\n<block type='text_print'>\" \n<value name='TEXT'>\" \n\n<block type=\"HTMLliStart\"></block>\n</value>\n</block>    \n<block type='text_print'>\" \n<value name='TEXT'>\" \n\n<block type=\"HTMLliStop\"></block>\n\n</value>\n</block>    \n\n<block type='text_print'>\" \n<value name='TEXT'>\" \n\n<block type=\"HTMLlink\"></block>\n\n</value>\n</block>    \n\n\n`\n\n      \n}","// exports.definitionBlocks = function (blocks, javaScript) {\n// }\n\n// exports.fieldXML = function () {\n// }\nconst Blockly =require('blockly');\n// const a = require('./audioTest.js');\nexports.definitionBlocks = function (blocks, javaScript) {\n    \n    blocks['ttsBlock'] = {\n        init: function() {\n            this.appendValueInput(\"NAME\")\n            .setCheck(null)\n            .appendField(\"Voice\");\n        this.setPreviousStatement(true, null);\n        this.setNextStatement(true, null);\n        this.setColour(230);\n     this.setTooltip(\"\");\n     this.setHelpUrl(\"\");\n        }\n      };\n      javaScript['ttsBlock'] = function(block) {\n        // var dropdown_voice = block.getFieldValue('Voice');\n        var value_name = javaScript.valueToCode(block, 'NAME', javaScript.ORDER_ATOMIC);\n        var code = 'speakDefault('+ value_name+');\\n';\n        // console.log(a);\n        // var piano = a.Synth.createInstrument('piano');\n        // piano.play('C', 4, 2);\n        return code;\n      };\n      \n}\n\nexports.fieldXML = function () {\n    return `<block type=\"ttsBlock\">\n        <value name=\"NAME\">\n            <shadow type=\"text\">\n            <field name=\"TEXT\">Hello</field></shadow>\n        </value>       \n        </block>\n`;\n}","\nexports.definitionBlocks = function (blocks, javaScript) {\n    \n    const ORDER_ATOMIC = 0;\n    const ORDER_NONE=99;\n\n\n    blocks['credsforhttp'] = {\n        init: function () {\n            this.appendDummyInput()\n                .appendField(\"Http with Creds\");\n            this.appendValueInput(\"HttpDomain\")\n                .setCheck(\"String\")\n                .appendField(\"Domain\");\n            this.appendValueInput(\"WithCreds\")\n                .setCheck(\"Boolean\")\n                .appendField(\"With Creds ?\");\n            this.setPreviousStatement(true, null);\n            this.setNextStatement(true, null);\n            //this.setColour(230);\n            //this.setTooltip(\"\");\n            //this.setHelpUrl(\"\");\n        }\n    };\n    javaScript['credsforhttp'] = function (block) {\n        var value_httpdomain = javaScript.valueToCode(block, 'HttpDomain', /*javaScript.*/ORDER_ATOMIC) || '(localSite)';\n        var value_headername = javaScript.valueToCode(block, 'WithCreds', /*javaScript.*/ORDER_ATOMIC);\n        var code = 'withCredsForDomain[' + value_httpdomain + ']=' + value_headername + ';\\n';\n        return code;\n    };\n};\n\nexports.fieldXML =function(){\n    return `<block type=\"credsforhttp\">\n    <value name=\"HttpDomain\">\n        <shadow type=\"text\">\n            <field name=\"TEXT\">(localSite)</field>\n        </shadow>\n    </value>\n    <value name=\"WithCreds\">\n        <shadow type=\"logic_boolean\">\n            <field name=\"BOOL\">FALSE</field>\n        </shadow>\n    </value>\n</block>\n`\n}","// exports.definitionBlocks = function (blocks, javaScript) {\n// }\n\n// exports.fieldXML = function () {\n// }\n\nexports.definitionBlocks = function (blocks, javaScript) {\n    const ORDER_ATOMIC = 0;\n    const ORDER_NONE=99;\n    blocks['auth0webapidata'] = {\n        init: function() {\n          this.appendDummyInput()\n              .appendField(\"Auth0\");\n          this.appendValueInput(\"client_id\")\n              .setCheck(null)\n              .appendField(\"client_id\");\n          this.appendValueInput(\"client_secret\")\n              .setCheck(null)\n              .appendField(\"client_secret\");\n          this.appendValueInput(\"audience\")\n              .setCheck(null)\n              .appendField(\"audience\");\n          this.appendValueInput(\"grant_type\")\n              .setCheck(null)\n              .appendField(\"grant_type\");\n          this.setOutput(true, null);\n          this.setColour(230);\n       this.setTooltip(\"\");\n       this.setHelpUrl(\"\");\n        }\n      };\n      \n      javaScript['auth0webapidata'] = function(block) {\n        \n        var value_client_id = javaScript.valueToCode(block, 'client_id', /*javaScript.*/ORDER_ATOMIC);\n        var value_client_secret = javaScript.valueToCode(block, 'client_secret', /*javaScript.*/ORDER_ATOMIC);\n        var value_audience = javaScript.valueToCode(block, 'audience', /*javaScript.*/ORDER_ATOMIC);\n        var value_grant_type = javaScript.valueToCode(block, 'grant_type', /*javaScript.*/ORDER_ATOMIC);\n        \n        var code = '{\"client_id\":'+ value_client_id;\n        code+=',\"client_secret\":'+ value_client_secret;\n        code+=',\"audience\":'+ value_audience;\n        code+=',\"grant_type\":'+ value_grant_type;\n        code+='}';\n        \n        return [code, /*javaScript.*/ORDER_NONE];\n      };\n      \n      \n}\n\nexports.fieldXML = function () {\n    return `<category id=\"Auth0\" name=\"Auth0\">\n    <block type=\"auth0webapidata\">\n        <value name=\"client_id\">\n            <shadow type=\"text\">\n                <field name=\"TEXT\">client_id?</field>\n            </shadow>\n\n        </value>\n        <value name=\"client_secret\">\n            <shadow type=\"text\">\n                <field name=\"TEXT\">client_secret?</field>\n            </shadow>\n\n        </value>\n        <value name=\"audience\">\n            <shadow type=\"text\">\n                <field name=\"TEXT\">audience</field>\n            </shadow>\n\n        </value>\n        <value name=\"grant_type\">\n            <shadow type=\"text\">\n                <field name=\"TEXT\">grant_type?</field>\n            </shadow>\n\n        </value>\n    </block>\n</category>\n`;\n}\n","const Blockly =require('blockly');\n\n// exports.definitionBlocks = function (blocks, javaScript) {\n// }\n\n// exports.fieldXML = function () {\n// }\nexports.definitionBlocks = function (blocks, javaScript) {\n\n\n    // const value_json = javaScript.valueToCode(block, 'JSON', ORDER_ATOMIC);\n    //     const code = `JSON.parse(${value_json})`;\n    //     return [code, ORDER_NONE];\n    blocks['chart_js'] = {\n        init: function() {\n          this.appendDummyInput()\n              .appendField(\"ChartType\")\n              .appendField(new Blockly.FieldDropdown ([[\"HBar\",\"HBar\"], [\"VBar\",\"VBar\"]]), \"ChartTypeValue\");\n          this.appendValueInput(\"ChartTitleValue\")\n              .setCheck(null)\n              .appendField(new Blockly.FieldLabelSerializable(\"Title\"), \"ChartTitle\");\n          this.appendValueInput(\"LabelsValue\")\n              .setCheck(\"Array\")\n              .appendField(new Blockly.FieldLabelSerializable(\"Labels\"), \"ChartLabels\");\n          this.appendValueInput(\"DataSet1Label\")\n              .setCheck(\"String\")\n              .appendField(new Blockly.FieldLabelSerializable(\"DataSet1 Label\"), \"DataSetLabel1\");\n          this.appendValueInput(\"DataSet1Data\")\n              .setCheck(\"Array\")\n              .appendField(new Blockly.FieldLabelSerializable(\"DataSet1 Data\"), \"DataSetData1\");\n          this.setOutput(true, null);\n          this.setColour(230);\n       this.setTooltip(\"\");\n       this.setHelpUrl(\"\");\n        }\n      };\n\n      javaScript['chart_js'] = function(block) {\n        var dropdown_charttypevalue = block.getFieldValue('ChartTypeValue');\n        var value_charttitlevalue = javaScript.valueToCode(block, 'ChartTitleValue', javaScript.ORDER_ATOMIC);\n        var value_labelsvalue = javaScript.valueToCode(block, 'LabelsValue', javaScript.ORDER_ATOMIC);\n        var value_dataset1label = javaScript.valueToCode(block, 'DataSet1Label', javaScript.ORDER_ATOMIC);\n        var value_dataset1data = javaScript.valueToCode(block, 'DataSet1Data', javaScript.ORDER_ATOMIC);\n        //var backgroundColor: [\"red\", \"blue\", \"green\", \"blue\", \"red\", \"blue\"],\n        var barType= \"\";\n        var indexAxis='x';\n        switch (dropdown_charttypevalue) {\n            case \"HBar\":\n                barType=\"bar\";\n                indexAxis='y';\n                break;\n            case \"VBar\":\n                barType=\"bar\";\n                break;\n            default:\n                throw \"Unknown chart type:\"+dropdown_charttypevalue;\n        }\n        // window.alert(indexAxis);\n        var code = `JSON.stringify({ 'type': '${barType}', 'options':{ 'indexAxis':'${indexAxis}'},  'data': {  'labels': ${value_labelsvalue}, 'datasets': [{ 'backgroundColor': ['green','blue'],'label': ${value_dataset1label}, 'data': ${value_dataset1data} }] } })`;\n        \n        return [code, javaScript.ORDER_NONE];\n      };\n\n\n}\n\nexports.fieldXML = function () {\n    return `<block type=\"chart_js\"></block>`;\n \n}","// exports.definitionBlocks = function (blocks, javaScript) {\n// }\n\n// exports.fieldXML = function () {\n// }\n\nconst Blockly =require('blockly');\n exports.definitionBlocks = function (blocks, javaScript) {\n    const ORDER_ATOMIC = 0;\n    blocks['comment'] = {\n        init: function() {\n          this.appendValueInput(\"TEXT\")\n              .setCheck(null)\n              .appendField(\"comment /* */\")\n              .appendField(new Blockly.FieldLabelSerializable(\"\"), \"NAME\");\n          //this.setOutput(true, null);\n            this.setPreviousStatement(true, null);\n          this.setNextStatement(true, null);\n       this.setTooltip(\"\");\n       this.setHelpUrl(\"\");\n        }\n      };\n      \n      javaScript['comment'] = function(block) {\n        // Print statement.\n        var msg = javaScript.valueToCode(block, 'TEXT',\n        /*javaScript.*/ORDER_ATOMIC) || '\\'\\'';\n        var code= '/*\\n' + msg+'\\n*/;\\n';\n        return code;\n      };\n      \n      blocks['debugger'] = {\n        init: function() {\n          this.appendValueInput(\"TEXT\")\n              .setCheck(null)\n              .appendField(\"debugger\")\n              .appendField(new Blockly.FieldLabelSerializable(\"\"), \"NAME\");\n          //this.setOutput(true, null);\n            this.setPreviousStatement(true, null);\n          this.setNextStatement(true, null);\n       this.setTooltip(\"\");\n       this.setHelpUrl(\"\");\n        }\n      };\n      \n      javaScript['debugger'] = function(block) {\n        // Print statement.\n        var msg = javaScript.valueToCode(block, 'TEXT',\n        /*javaScript.*/ORDER_ATOMIC) || '\\'\\'';\n        var code= 'startDebugger('+ msg+\",'\"+ block.id+\"',this);\\n\";\n        return code;\n      };\n}\n\nexports.fieldXML = function () {\n    return `<block type=\"comment\">\n    <value name=\"TEXT\">\n        <shadow type=\"text\">\n            <field name=\"TEXT\">Put here comments</field>\n        </shadow>\n    </value>\n</block>\n<block type=\"debugger\">\n    <value name=\"TEXT\">\n        <shadow type=\"text\">\n            <field name=\"TEXT\">my message for debug</field>\n        </shadow>\n    </value>\n</block>\n`\n}\n","// exports.definitionBlocks = function (blocks, javaScript) {\n// }\n\n// exports.fieldXML = function () {\n// }\n\nexports.definitionBlocks = function (blocks, javaScript) {\n    const ORDER_ATOMIC = 0;\n    const ORDER_NONE=99;\n    blocks['converttojson'] = {\n        init: function () {\n            this.appendDummyInput()\n                .appendField(\"ConvertToJSON\");\n            this.appendValueInput(\"ValueToConvert\")\n                .setCheck(null);\n            this.setInputsInline(true);\n            this.setOutput(true, null);\n            this.setTooltip(\"Convert to JSON\");\n            this.setHelpUrl(\"\");\n        }\n    };\n    javaScript['converttojson'] = function (block) {\n        var value_ValueToConvert = javaScript.valueToCode(block, 'ValueToConvert', /*javaScript.*/ORDER_ATOMIC);\n        //value_ValueToConvert = value_ValueToConvert.replace(/(\\r\\n|\\n|\\r)/gm, \"\")\n        const code = 'JSON.parse(' + value_ValueToConvert + ')';\n        return [code, /*javaScript.*/ORDER_NONE];\n\n    };\n\n            blocks['converttostring'] = {\n        init: function () {\n            this.appendDummyInput()\n                .appendField(\"ConvertToString\");\n            this.appendValueInput(\"ValueToConvert\")\n                .setCheck(null);\n            this.setInputsInline(true);\n            this.setOutput(true, null);\n            this.setTooltip(\"Convert to String\");\n            this.setHelpUrl(\"\");\n        }\n    };\n    javaScript['converttostring'] = function (block) {\n        var value_ValueToConvert = javaScript.valueToCode(block, 'ValueToConvert', /*javaScript.*/ORDER_ATOMIC);\n        var code = 'JSON.stringify(' + value_ValueToConvert + ')';\n        return [code, /*javaScript.*/ORDER_NONE];\n    };\n\n    blocks['convertcsv'] = {\n        init: function () {\n            this.appendDummyInput()\n                .appendField(\"Convert To CSV\");\n            this.appendValueInput(\"ArrayToConvert\")\n                .setCheck(null)\n                .appendField(\"Array to convert\");\n            //this.setPreviousStatement(true, null);\n            //this.setNextStatement(true, null);\n            this.setOutput(true, null);\n            this.setTooltip(\"\");\n            this.setHelpUrl(\"\");\n        }\n    };\n    javaScript['convertcsv'] = function (block) {\n        var data = javaScript.valueToCode(block, 'ArrayToConvert', javaScript.ORDER_ATOMIC);\n        var code = 'convertToCSV(' + data+')';\n        //return code;\n        return [code, /*javaScript.*/ORDER_NONE];\n    };\n    \n    const convertCSV = function (arrayOrString) {\n        \n        \n        let arr = typeof arrayOrString != 'object' ? JSON.parse(arrayOrString) : objArray;\n    \n        arr = [Object.keys(arr[0])].concat(arr)\n        var data = arr.map(it => {\n            return Object.values(it).toString()\n        }).join('\\n');\n        // console.log(data);\n        return data;\n    }\n}\n\nexports.fieldXML = function () {\n return `<block type=\"converttojson\"></block>\n <block type=\"converttostring\"></block>\n <block type=\"convertcsv\"></block>\n`\n}","// exports.definitionBlocks = function (blocks, javaScript) {\n// }\n\n// exports.fieldXML = function () {\n// }\n\nconst Blockly=require('blockly');\n//https://gist.github.com/mark-friedman/48f43a9b62b1c8ad029a75d4b4e61f31\nexports.definitionBlocks = function (blocks, javaScript,BlocklyExtensions,  BlocklyMutator) {\n\n    const ORDER_ATOMIC = 0;\n    const ORDER_NONE=99;\n    const ALIGN_RIGHT=1;\n    const ALIGN_CENTRE=0;\n    \n    javaScript['object_from_json'] = function(block) {\n        const value_json = javaScript.valueToCode(block, 'JSON', ORDER_ATOMIC);\n        // TODO: Maybe check that the parsed value is actually an object.\n        const code = `JSON.parse(${value_json})`;\n        return [code, ORDER_NONE];\n      };\n      \n      javaScript['object_to_json'] = function(block) {\n        const value_object = javaScript.valueToCode(block, 'object', ORDER_ATOMIC);\n        const code = `JSON.stringify(${value_object})`;\n        return [code, ORDER_NONE];\n      };\n      \n      javaScript['object_get'] = function(block) {\n        const text_field_name = block.getFieldValue('field_name');\n        const value_object = javaScript.valueToCode(block, 'object', ORDER_ATOMIC);\n        const code = `${value_object}['${text_field_name}']`;\n        return [code, ORDER_NONE];\n      };\n      \n      javaScript['object_set'] = function(block) {\n        const text_field_name = block.getFieldValue('field_name');\n        const value_object_field = javaScript.valueToCode(block, 'object_field', ORDER_ATOMIC);\n        const value_value_field = javaScript.valueToCode(block, 'value_field', ORDER_ATOMIC);\n        return `${value_object_field}['${text_field_name}'] = ${value_value_field};\\n`;\n      };\n      \n      javaScript['object_create'] = function(block) {\n        if (!block.numFields) {\n          return ['{}', ORDER_NONE];\n        }\n        let fieldInitCode = '';\n        for (let i = 1; i <= block.numFields; i++) {\n          const fieldName = block.getFieldValue('field' + i);\n          const fieldValue = javaScript.valueToCode(block, 'field_input' + i, ORDER_ATOMIC);\n          fieldInitCode += `\"${fieldName}\": ${fieldValue}, `\n        }\n        const code = `{ ${fieldInitCode} }`;\n        return [code, ORDER_NONE];\n      };\n      \n      \n      const CUSTOM_OBJECT_FROM_JSON_BLOCK_NAME = 'object_from_json';\n      const CUSTOM_OBJECT_TO_JSON_BLOCK_NAME = 'object_to_json';\n      const CUSTOM_OBJECT_GET_BLOCK_NAME = 'object_get';\n      const CUSTOM_OBJECT_SET_BLOCK_NAME = 'object_set';\n      const CUSTOM_OBJECT_CREATE_BLOCK_NAME = 'object_create';\n      const CUSTOM_OBJECT_MUTATOR_FIELD_BLOCK_NAME = 'object_field';\n      const CUSTOM_OBJECT_CREATE_MUTATOR_TOP_BLOCK_NAME = 'object_create_mutator_top';\n      const CUSTOM_OBJECT_BLOCK_COLOR = '#F99EA3';\n      \n      const getMessage = (msgName, ...arg) => {\n        const MESSAGES = {\n          object_from_json: \"get object from JSON %1\",\n          object_from_json_tooltip: \"Create object from JSON string.\",\n          object_to_json: \"generate JSON from object %1\",\n          object_to_json_tooltip: \"Save object as a JSON string.\",\n          object_get_json: \"get property %1 %2 of object %3\",\n          object_get_json_tooltip: \"Get a property of an object.\",\n          object_set_json: \"set property %1 %2 of object %3 to %4\",\n          object_set_json_tooltip: \"Set a property of an object.\",\n          object_create: \"create object\",\n          object_create_tooltip: \"Create a new object, optionally with some property values.\",\n          object_field_name: \"property name\",\n        };\n        return MESSAGES[msgName];\n      };\n      \n      const objectFromJSONBlockDef = {\n        \"type\": \"object_from_json\",\n        \"message0\": getMessage('object_from_json'),\n        \"args0\": [\n          {\n            \"type\": \"input_value\",\n            \"name\": \"JSON\",\n            \"check\": \"String\"\n          }\n        ],\n        \"output\": \"Object\",\n        \"colour\": CUSTOM_OBJECT_BLOCK_COLOR,\n        \"tooltip\": getMessage('object_from_json_tooltip'),\n        \"helpUrl\": \"http://www.json.org/\"\n      };\n      \n      blocks[CUSTOM_OBJECT_FROM_JSON_BLOCK_NAME] = {\n        init: function () {\n          this.jsonInit(objectFromJSONBlockDef);\n        }\n      };\n      \n      const objectToJSONBlockDef = {\n          \"type\": \"object_to_json\",\n          \"message0\": getMessage('object_to_json'),\n          \"args0\": [\n            {\n              \"type\": \"input_value\",\n              \"name\": \"object\",\n              \"check\": \"Object\"\n            }\n          ],\n          \"output\": null,\n          \"colour\": CUSTOM_OBJECT_BLOCK_COLOR,\n          \"tooltip\": getMessage('object_to_json_tooltip'),\n        \"helpUrl\": \"http://www.json.org/\"\n      };\n      \n      blocks[CUSTOM_OBJECT_TO_JSON_BLOCK_NAME] = {\n        init: function () {\n          this.jsonInit(objectToJSONBlockDef);\n        }\n      };\n      \n      const objectGetBlockDef = {\n          \"type\": \"object_get\",\n          \"message0\": getMessage('object_get_json'),\n          \"args0\": [\n            {\n              \"type\": \"field_input\",\n              \"name\": \"field_name\",\n              \"text\": \"default\"\n            },\n            {\n              \"type\": \"input_dummy\"\n            },\n            {\n              \"type\": \"input_value\",\n              \"name\": \"object\",\n              \"check\": \"Object\",\n              \"align\": \"RIGHT\"\n            }\n          ],\n          \"output\": null,\n          \"colour\": CUSTOM_OBJECT_BLOCK_COLOR,\n          \"tooltip\": getMessage('object_get_json_tooltip'),\n          \"helpUrl\": \"\"\n      };\n      \n      blocks[CUSTOM_OBJECT_GET_BLOCK_NAME] = {\n        init: function () {\n          this.jsonInit(objectGetBlockDef);\n        }\n      };\n      \n      const objectSetBlockDef =  {\n        \"type\": \"object_set\",\n        \"message0\": getMessage('object_set_json'),\n        \"args0\": [\n          {\n            \"type\": \"field_input\",\n            \"name\": \"field_name\",\n            \"text\": getMessage('object_field_name'),\n          },\n          {\n            \"type\": \"input_dummy\"\n          },\n          {\n            \"type\": \"input_value\",\n            \"name\": \"object_field\",\n            \"check\": \"Object\",\n            \"align\": \"RIGHT\"\n          },\n          {\n            \"type\": \"input_value\",\n            \"name\": \"value_field\",\n            \"align\": \"RIGHT\"\n          }\n        ],\n        \"previousStatement\": null,\n        \"nextStatement\": null,\n        \"colour\": CUSTOM_OBJECT_BLOCK_COLOR,\n        \"tooltip\": getMessage('object_set_json_tooltip'),\n        \"helpUrl\": \"\"\n      };\n      \n      \n      blocks[CUSTOM_OBJECT_SET_BLOCK_NAME] = {\n        init: function () {\n          this.jsonInit(objectSetBlockDef);\n        }\n      };  \n      \n      const objectCreateBlockDef = {\n        \"type\": \"object_create\",\n        \"message0\": getMessage('object_create'),\n        \"output\": \"Object\",\n        \"mutator\": \"controls_create_mutator\",\n        \"colour\": 15,\n        \"tooltip\": getMessage('object_create_tooltip'),\n        \"helpUrl\": \"\"\n      };\n      \n      blocks[CUSTOM_OBJECT_CREATE_BLOCK_NAME] = {\n        init: function () {\n          this.jsonInit(objectCreateBlockDef);\n        }\n      };\n      \n      const objectFieldBlockDef = {\n        \"type\": \"object_field\",\n        \"message0\": \"%1 %2\",\n        \"args0\": [\n          {\n            \"type\": \"field_input\",\n            \"name\": \"field_name\",\n            \"text\": getMessage('object_field_name')\n          },\n          {\n            \"type\": \"input_value\",\n            \"name\": \"field_value\"\n          }\n        ],\n        \"previousStatement\": null,\n        \"nextStatement\": null,\n        \"colour\": 15,\n        \"tooltip\": \"\",\n        \"helpUrl\": \"\"\n      };\n      \n      blocks[CUSTOM_OBJECT_MUTATOR_FIELD_BLOCK_NAME] = {\n        init: function () {\n          this.jsonInit(objectFieldBlockDef);\n        }\n      };\n      \n      const objectCreateMutatorBlockDef = {\n        \"type\": \"object_create_mutator\",\n        \"message0\": getMessage('object_create'),\n        \"nextStatement\": null,\n        \"colour\": 15,\n        \"tooltip\": getMessage('object_create_tooltip'),\n        \"helpUrl\": \"\"\n      };\n      \n      blocks[CUSTOM_OBJECT_CREATE_MUTATOR_TOP_BLOCK_NAME] = {\n        init: function () {\n          this.jsonInit(objectCreateMutatorBlockDef);\n        }\n      };\n      \n      const objectCreateMutator = {\n        numFields: 0,\n        fields: [],\n      \n        /**\n         * Standard function for Mutator mixin. It's called to update the block based on contents of the mutator's XML\n         * DOM element.\n         */\n        domToMutation: function(xmlElement) {\n          this.fields = [];\n          for (let i = 0, childNode; childNode = xmlElement.childNodes[i]; i++) {\n            if (childNode.nodeName.toLowerCase() == 'field') {\n              this.fields.push(childNode.getAttribute('name'));\n            }\n          }\n          this.numFields = this.fields.length;\n          this.updateShape();\n        },\n      \n        /**\n         * Standard function for Mutator mixin. It's called to generate the mutator's XML DOM element based on the content\n         * of the block.\n         */\n        mutationToDom: function() {\n          if (!this.numFields) {\n            return null;\n          }\n          const container = document.createElement('mutation');\n          container.setAttribute('num_fields', '' + this.numFields);\n          for (let i = 0; i < this.fields.length; i++) {\n            const field = document.createElement('field');\n            field.setAttribute('name', this.fields[i]);\n            container.appendChild(field);\n          }\n          return container;\n        },\n      \n        /**\n         * Standard function for Mutator mixin when the mutator uses the standard mutator UI. It's called to update the\n         * block based on changes to the mutator's UI.\n         */\n        compose: function(topBlock) {\n          let fieldBlock = topBlock.nextConnection && topBlock.nextConnection.targetBlock();\n          this.numFields = 0;\n          this.fields = [];\n          let connectionsToRestore = [null];\n          while (fieldBlock) {\n            this.fields.push(fieldBlock.getFieldValue('field_name'));\n            this.numFields++;\n            connectionsToRestore.push(fieldBlock.savedConnection);\n            fieldBlock = fieldBlock.nextConnection && fieldBlock.nextConnection.targetBlock();\n          }\n          this.updateShape();\n          // Reconnect any child blocks.\n          for (let i = 1; i <= this.numFields; i++) {\n            BlocklyMutator.reconnect(connectionsToRestore[i], this, 'field_input' + i);\n          }\n        },\n      \n        /**\n         * Standard function for Mutator mixin when the mutator uses the standard mutator UI.  It's called to populate the\n         * mutator UI.\n         */\n        decompose: function(workspace) {\n          const topBlock = workspace.newBlock(CUSTOM_OBJECT_CREATE_MUTATOR_TOP_BLOCK_NAME);\n          topBlock.initSvg();\n          let connection = topBlock.nextConnection;\n          for (let i = 0; i < this.fields.length; i++) {\n            const fieldBlock = workspace.newBlock(CUSTOM_OBJECT_MUTATOR_FIELD_BLOCK_NAME);\n            fieldBlock.initSvg();\n            fieldBlock.setFieldValue(this.fields[i], 'field_name');\n            connection.connect(fieldBlock.previousConnection);\n            connection = fieldBlock.nextConnection;\n          }\n          return topBlock;\n        },\n      \n        /**\n         * Standard function for Mutator mixin when the mutator uses the standard mutator UI.  It's called on any changes to\n         * the block and is generally used to keep track of input connections (by saving them with their corresponding mutator\n         * blocks), so that if the mutator later causes changes to the block it can restore those input connections.\n         *\n         * We're also using this function to update the mutator block field name values if the user changes the name in the\n         * block.\n         */\n        saveConnections: function(topBlock) {\n          let fieldBlock = topBlock.nextConnection && topBlock.nextConnection.targetBlock();\n          let i = 1;\n          while (fieldBlock) {\n            const input = this.getInput('field_input' + i);\n            fieldBlock.savedConnection = input && input.connection.targetConnection;\n            // Set mutator block field name from the corresponding 'real' Object.create block\n            fieldBlock.setFieldValue(this.getFieldValue('field' + i), 'field_name');\n            i++;\n            fieldBlock = fieldBlock.nextConnection &&\n              fieldBlock.nextConnection.targetBlock();\n          }\n        },\n      \n        updateShape: function() {\n          // Delete everything.\n          if (this.getInput('with')) {\n            this.removeInput('with');\n          }\n          let i = 1;\n          while (this.getInput('field_input' + i)) {\n            this.removeInput('field_input' + i);\n            i++;\n          }\n          // Rebuild block.\n          if (this.numFields > 0) {\n            this.appendDummyInput('with')\n            .setAlign(ALIGN_RIGHT)\n            .appendField(\"with fields\");\n          }\n          for (let i = 1; i <= this.numFields; i++) {\n            const fieldName = this.fields[i - 1];\n            this.appendValueInput(\"field_input\" + i)\n              .setCheck(null)\n              .setAlign(ALIGN_RIGHT)\n              .appendField(new Blockly.FieldTextInput(fieldName), \"field\" + i);\n          }\n        },\n      \n      };\n      try{\n      BlocklyExtensions.registerMutator('controls_create_mutator', objectCreateMutator, null, ['object_field']);\n      }\n      catch(e){\n        //already registered\n      }\n}\n\nexports.fieldXML = function () {\n    return `    \n    <block type=\"modifyproperty\"></block>\n    <block type=\"getproperty\"></block>\n    <block type=\"object_create\"></block>\n    <!--<block type=\"object_from_json\"></block>\n<block type=\"object_to_json\"></block>\n<block type=\"object_get\"></block>\n<block type=\"object_set\"></block>-->\n\n`;\n}","// exports.definitionBlocks = function (blocks, javaScript) {\n// }\n\n// exports.fieldXML = function () {\n// }\nconst Blockly =require('blockly');\n\n\nexports.definitionBlocks = function (blocks, javaScript) {\n    /*\n * Block that display the current date time\n * @Author: Popescu Ionut Cosmin (cosmin.popescu93@gmail.com)\n * https://github.com/cosminpopescu14\n */\n    const ORDER_NONE=99;\n    blocks['displayCurrentDate'] = {\n\n    \n    init: function () {\n        this.appendDummyInput()\n            .appendField(\"Current Date\");\n        this.appendDummyInput()\n            .appendField('Pick date format:')\n            .appendField(new Blockly.FieldDropdown([\n                ['Unix format', 'unix'],\n                ['ISO format', 'iso'],\n                ['Human format', 'human']\n            ]), 'dateFormat');\n\n        this.setOutput(true, null);\n        this.setColour(100);\n        this.setTooltip('Show current date.');\n        this.setHelpUrl('https://www.w3schools.com/jsref/jsref_obj_date.asp');\n\n    }\n}\nconst dateFormats = {\n    UNIX: 'unix',\n    ISO: 'iso',\n    HUMAN: 'human'\n}\n\njavaScript['displayCurrentDate'] = block => {\n    let dropdownOption = block.getFieldValue('dateFormat');\n\n    let operation = ''\n    switch (dropdownOption.toString()) {\n\n        case dateFormats.HUMAN:\n            operation = `displayDateFormatted('${dateFormats.HUMAN}')`;\n            break;\n        case dateFormats.ISO:\n            operation = `displayDateFormatted('${dateFormats.ISO}')`;\n            break;\n        case dateFormats.UNIX:\n            operation = `displayDateFormatted('${dateFormats.UNIX}')`;\n            break;\n\n        default:\n            console.log('Date time format not suported')\n    }\n\n    let code = operation;\n    return [code, /*javaScript.*/ORDER_NONE];\n}\n\n\n\n}\n\nexports.fieldXML = function () {\nreturn `<block type=\"displayCurrentDate\"></block>`;\n}\n\n","// exports.definitionBlocks = function (blocks, javaScript) {\n// }\n\n// exports.fieldXML = function () {\n// }\n\nexports.definitionBlocks = function (blocks, javaScript) {\n    const ORDER_NONE=99;\n    blocks['DateFromText'] = {\n        init: function() {\n            this.appendValueInput('VALUE')            \n                .appendField('Date from ');\n            this.setOutput(true, null); \n            this.setHelpUrl('https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse#Date_Time_String_Format');\n            \n        }\n    }\n    \n    javaScript['DateFromText'] = block => {\n        let data = javaScript.valueToCode(block, 'VALUE', javaScript.ORDER_ATOMIC)|| '';\n        //console.log(data);\n        //console.log(data.length);\n        //read about formats at https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse#Date_Time_String_Format\n        //if(!(data.length ==12 || data.length ==21))// '' means 10+2 or 19+2\n        //\tthrow \" data should be yyyy-MM-dd or yyyy-MM-ddTHH:mm:ss\";\n        \n        let code = 'Date.parse(' + data +')';\n        return [code, /*javaScript.*/ORDER_NONE];\n        \n    }\n}\n\nexports.fieldXML = function () {\n    return `<block type=\"DateFromText\">\n    <value name=\"VALUE\">\n        <shadow type=\"text\">\n            <field name=\"TEXT\">1970-04-16T02:00:00</field>\n        </shadow>\n    </value>\n</block>\n`;\n}","exports.generalBlocks = function(){\n    return    `\n    \n    <category name=\"Blockly Core\">\n\n    <category id=\"catLogic\" colour=\"210\" name=\"Logic\">\n        <block type=\"controls_if\"></block>\n        <block type=\"logic_compare\"></block>\n        <block type=\"logic_operation\"></block>\n        <block type=\"logic_negate\"></block>\n        <block type=\"logic_boolean\"></block>\n        <block type=\"logic_null\"></block>\n        <block type=\"logic_ternary\"></block>\n    </category>\n    <category id=\"catLoops\" colour=\"120\" name=\"Loops\">\n        <block type=\"controls_repeat_ext\">\n            <value name=\"TIMES\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type=\"controls_whileUntil\"></block>\n        <block type=\"controls_for\">\n            <value name=\"FROM\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">1</field>\n                </shadow>\n            </value>\n            <value name=\"TO\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">10</field>\n                </shadow>\n            </value>\n            <value name=\"BY\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type=\"controls_forEach\"></block>\n        <block type=\"controls_flow_statements\"></block>\n    </category>\n    <category id=\"catMath\" colour=\"230\" name=\"Math\">\n        <block type=\"math_number\"></block>\n        <block type=\"math_arithmetic\">\n            <value name=\"A\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">1</field>\n                </shadow>\n            </value>\n            <value name=\"B\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type=\"math_single\">\n            <value name=\"NUM\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">9</field>\n                </shadow>\n            </value>\n        </block>\n        <block type=\"math_trig\">\n            <value name=\"NUM\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">45</field>\n                </shadow>\n            </value>\n        </block>\n        <block type=\"math_constant\"></block>\n        <block type=\"math_number_property\">\n            <value name=\"NUMBER_TO_CHECK\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type=\"math_change\">\n            <value name=\"DELTA\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type=\"math_round\">\n            <value name=\"NUM\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">3.1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type=\"math_on_list\"></block>\n        <block type=\"math_modulo\">\n            <value name=\"DIVIDEND\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">64</field>\n                </shadow>\n            </value>\n            <value name=\"DIVISOR\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type=\"math_constrain\">\n            <value name=\"VALUE\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">50</field>\n                </shadow>\n            </value>\n            <value name=\"LOW\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">1</field>\n                </shadow>\n            </value>\n            <value name=\"HIGH\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type=\"math_random_int\">\n            <value name=\"FROM\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">1</field>\n                </shadow>\n            </value>\n            <value name=\"TO\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type=\"math_random_float\"></block>\n    </category>\n    <category id=\"catText\" colour=\"160\" name=\"Text\">\n        <block type=\"text\"></block>\n        <block type=\"text_join\"></block>\n        <block type=\"text_append\">\n            <value name=\"TEXT\">\n                <shadow type=\"text\"></shadow>\n            </value>\n        </block>\n        <block type=\"text_length\">\n            <value name=\"VALUE\">\n                <shadow type=\"text\">\n                    <field name=\"TEXT\">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type=\"text_isEmpty\">\n            <value name=\"VALUE\">\n                <shadow type=\"text\">\n                    <field name=\"TEXT\"></field>\n                </shadow>\n            </value>\n        </block>\n        <block type=\"text_indexOf\">\n            <value name=\"VALUE\">\n                <block type=\"variables_get\">\n                    <field name=\"VAR\">text</field>\n                </block>\n            </value>\n            <value name=\"FIND\">\n                <shadow type=\"text\">\n                    <field name=\"TEXT\">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type=\"text_charAt\">\n            <value name=\"VALUE\">\n                <block type=\"variables_get\">\n                    <field name=\"VAR\">text</field>\n                </block>\n            </value>\n        </block>\n        <block type=\"text_getSubstring\">\n            <value name=\"STRING\">\n                <block type=\"variables_get\">\n                    <field name=\"VAR\">text</field>\n                </block>\n            </value>\n        </block>\n        <block type=\"text_changeCase\">\n            <value name=\"TEXT\">\n                <shadow type=\"text\">\n                    <field name=\"TEXT\">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type=\"text_trim\">\n            <value name=\"TEXT\">\n                <shadow type=\"text\">\n                    <field name=\"TEXT\">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type=\"text_print\">\n            <value name=\"TEXT\">\n                <shadow type=\"text\">\n                    <field name=\"TEXT\">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type=\"text_prompt_ext\">\n            <value name=\"TEXT\">\n                <shadow type=\"text\">\n                    <field name=\"TEXT\">abc</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id=\"catLists\" colour=\"260\" name=\"Lists\">\n        <block type=\"lists_create_with\">\n            <mutation items=\"0\"></mutation>\n        </block>\n        <block type=\"lists_create_with\"></block>\n        <block type=\"lists_repeat\">\n            <value name=\"NUM\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">5</field>\n                </shadow>\n            </value>\n        </block>\n        <block type=\"lists_length\"></block>\n        <block type=\"lists_isEmpty\"></block>\n        <block type=\"lists_indexOf\">\n            <value name=\"VALUE\">\n                <block type=\"variables_get\">\n                    <field name=\"VAR\">list</field>\n                </block>\n            </value>\n        </block>\n        <block type=\"lists_getIndex\">\n            <value name=\"VALUE\">\n                <block type=\"variables_get\">\n                    <field name=\"VAR\">list</field>\n                </block>\n            </value>\n        </block>\n        <block type=\"lists_setIndex\">\n            <value name=\"LIST\">\n                <block type=\"variables_get\">\n                    <field name=\"VAR\">list</field>\n                </block>\n            </value>\n        </block>\n        <block type=\"lists_getSublist\">\n            <value name=\"LIST\">\n                <block type=\"variables_get\">\n                    <field name=\"VAR\">list</field>\n                </block>\n            </value>\n        </block>\n        <block type=\"lists_split\">\n            <value name=\"DELIM\">\n                <shadow type=\"text\">\n                    <field name=\"TEXT\">,</field>\n                </shadow>\n            </value>\n        </block>\n        <block type=\"lists_sort\"></block>\n    </category>\n    <category id=\"catColour\" colour=\"20\" name=\"Color\">\n        <block type=\"colour_picker\"></block>\n        <block type=\"colour_random\"></block>\n        <block type=\"colour_rgb\">\n            <value name=\"RED\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">100</field>\n                </shadow>\n            </value>\n            <value name=\"GREEN\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">50</field>\n                </shadow>\n            </value>\n            <value name=\"BLUE\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type=\"colour_blend\">\n            <value name=\"COLOUR1\">\n                <shadow type=\"colour_picker\">\n                    <field name=\"COLOUR\">#ff0000</field>\n                </shadow>\n            </value>\n            <value name=\"COLOUR2\">\n                <shadow type=\"colour_picker\">\n                    <field name=\"COLOUR\">#3333ff</field>\n                </shadow>\n            </value>\n            <value name=\"RATIO\">\n                <shadow type=\"math_number\">\n                    <field name=\"NUM\">0.5</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id=\"catVariables\" colour=\"330\" custom=\"VARIABLE\" name=\"Variables\"></category>\n    <category id=\"catFunctions\" colour=\"290\" custom=\"PROCEDURE\" name=\"Functions\"></category>\n</category>\n\n      `;   \n\n\n  }","// exports.definitionBlocks = function (blocks, javaScript) {\n// }\n\n// exports.fieldXML = function () {\n// }\nconst Blockly =require('blockly');\n\nexports.definitionBlocks = function (blocks, javaScript) {\n    const ORDER_NONE=99;\n    blocks['blockemail'] = {\n        init: function() {\n          this.appendValueInput(\"from\")\n              .setCheck(null)\n              .appendField(\"From:\");\n          this.appendValueInput(\"to\")\n              .setCheck(null)\n              .appendField(\"To:\");\n          this.appendValueInput(\"cc\")\n              .setCheck(null)\n              .appendField(\"CC:\");\n          this.appendValueInput(\"bcc\")\n              .setCheck(null)\n              .appendField(\"BCC:\");\n          this.appendValueInput(\"subject\")\n              .setCheck(null)\n              .appendField(\"Subject:\");\n          this.appendValueInput(\"body\")\n              .setCheck(null)\n              .appendField(\"Body:\")\n              .appendField(new Blockly.FieldDropdown ([[\"HTML\",\"Html\"], [\"TEXT\",\"Text\"]]), \"NAME\");\n          this.setOutput(true, null);\n          this.setColour(230);\n       this.setTooltip(\"\");\n       this.setHelpUrl(\"\");\n        }\n      };\n\n      blocks['sendinblue'] = {\n        init: function() {\n          this.appendDummyInput()\n              .appendField(\"SendInBlue\");\n          this.appendValueInput(\"APIKey\")\n              .setCheck(null)\n              .appendField(\"ApiKey\");\n          this.appendValueInput(\"email\")\n              .setCheck(\"blockemail\")\n              .appendField(\"Email\");\n        //   this.setPreviousStatement(true, null);\n        //   this.setNextStatement(true, null);\n          this.setColour(230);\n       this.setTooltip(\"Please see https://account.sendinblue.com/advanced/api\");\n       this.setHelpUrl(\"https://account.sendinblue.com/advanced/api\");\n       this.setOutput(true, null);\n\n        }\n      };\n\n      javaScript['sendinblue'] = function(block) {\n        var value_apikey = javaScript.valueToCode(block, 'APIKey', javaScript.ORDER_ATOMIC);\n        var value_email = javaScript.valueToCode(block, 'email', javaScript.ORDER_ATOMIC);\n        var code = 'window.alert(\"SendInBlue\");\\n';\n        // \"(function(url,data){ var res=JSON.parse(postXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}(\" +\n        //   value_theurl ;\n        // if (value_data) {\n        //   operation+=\",\" +value_data           \n        // }\n        // operation += \") )\";\n        var domain=\"api.sendinblue.com\";\n        code = `(function(apiKey,email){if(!('${domain}' in headersForDomain)){ headersForDomain['${domain}']=[]; };\\n`;\n        code += `headersForDomain['${domain}'].push({\"name\":\"api-key\",\"value\":apiKey});\\n`;\n        code += `headersForDomain['${domain}'].push({\"name\":\"Content-Type\",\"value\":\"application/json\"});\\n`;\n        code += `headersForDomain['${domain}'].push({\"name\":\"Accept\",\"value\":\"application/json\"});\\n`;\n        code += `var sendinblueData={\"sender\":{\"email\": email.from }, \"to\":[{\"email\":email.to }],\"subject\":email.subject,\"htmlContent\": email.body} ;\\n`;\n        code += `\\nwindow.alert(JSON.stringify(sendinblueData));\\n`;\n        code += `var res=JSON.parse(postXhr(\"https://${domain}/v3/smtp/email\",JSON.stringify(sendinblueData)));if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;\\n`;\n        \n        code+=\"})(\"+value_apikey+\",\"+value_email+\")\";\n        return [code, javaScript.ORDER_NONE];\n\n      };\n\n    javaScript['blockemail'] = function(block) {\n        var value_from = javaScript.valueToCode(block, 'from', javaScript.ORDER_ATOMIC);\n        var value_to = javaScript.valueToCode(block, 'to', javaScript.ORDER_ATOMIC);\n        var value_cc = javaScript.valueToCode(block, 'cc', javaScript.ORDER_ATOMIC);\n        var value_bcc = javaScript.valueToCode(block, 'bcc', javaScript.ORDER_ATOMIC);\n        var value_subject = javaScript.valueToCode(block, 'subject', javaScript.ORDER_ATOMIC);\n        var dropdown_name = block.getFieldValue('NAME');\n        var value_body = javaScript.valueToCode(block, 'body', javaScript.ORDER_ATOMIC);\n        var value_json = '{';\n        value_json += '\"from\":' + value_from + ',';\n        value_json += '\"to\":' + value_to + ',';\n        value_json += '\"cc\":' + value_cc + ',';\n        value_json += '\"bcc\":' + value_bcc + ',';\n        value_json += '\"subject\":' + value_subject + ',';\n        value_json += '\"body\":' + value_body + ',';\n        value_json += '\"typeEmail\":' + '\"' + dropdown_name + '\"' ;\n        value_json += '}';\n        // console.log(value_json);\n        var code = `${value_json}`;\n        return [code, javaScript.ORDER_NONE];\n      };\n      \n}\n\nexports.fieldXML = function () {\n    return `<block type=\"blockemail\">\n        <value name=\"from\">\n            <shadow type=\"text\">\n                <field name=\"TEXT\">test@test.com</field>\n            </shadow>\n        </value>\n        <value name=\"to\">\n            <shadow type=\"text\">\n                <field name=\"TEXT\">ignatandrei@yahoo.com</field>\n            </shadow>\n        </value>\n        <value name=\"cc\">\n            <shadow type=\"text\">\n                <field name=\"TEXT\"></field>\n            </shadow>\n        </value>\n        <value name=\"bcc\">\n            <shadow type=\"text\">\n                <field name=\"TEXT\"></field>\n            </shadow>\n        </value>\n        <value name=\"subject\">\n            <shadow type=\"text\">\n                <field name=\"TEXT\">My test email</field>\n            </shadow>\n        </value>\n        <value name=\"body\">\n            <shadow type=\"text\">\n                <field name=\"TEXT\">This is the body</field>\n            </shadow>\n        </value>\n            </block>\n        <block type=\"sendinblue\">\n        <value name=\"APIKey\">\n            <shadow type=\"text\">\n                <field name=\"TEXT\">Please put here the API Key from SendInBlue</field>\n            </shadow>\n            \n        </value>\n        <value name=\"email\">\n            <shadow type=\"blockemail\">\n            </shadow>\n            \n        </value>\n        \n        </block>\n`;\n}","// exports.definitionBlocks = function (blocks, javaScript) {\n// }\n\n// exports.fieldXML = function () {\n// }\nexports.definitionBlocks = function (blocks, javaScript) {\n    const ORDER_ATOMIC = 0;\n    const ORDER_NONE=99;\n  \n    blocks['exportfile'] = {\n        init: function () {\n            this.appendDummyInput()\n                .appendField(\"ExportToFile\");\n            this.appendValueInput(\"fileName\")\n                .setCheck(null)\n                .appendField(\"FileName\");\n            this.appendValueInput(\"contentFile\")\n                .setCheck(null)\n                .appendField(\"Content\");\n            this.appendValueInput(\"convertToByte\")\n                .setCheck(\"Boolean\")\n                .appendField(\"ConvertToByteFromBase64\");\n            this.setInputsInline(true);\n            this.setPreviousStatement(true, null);\n            this.setNextStatement(true, null);\n            this.setColour(230);\n            this.setTooltip(\"\");\n            this.setHelpUrl(\"\");\n        }\n    };\n    \n    javaScript['exportfile'] = function (block) {\n    \n        var value_filename = javaScript.valueToCode(block, 'fileName', /*javaScript.*/ORDER_ATOMIC);\n        var value_contentfile = javaScript.valueToCode(block, 'contentFile', /*javaScript.*/ORDER_ATOMIC);\n        var value_converttobyte = javaScript.valueToCode(block, 'convertToByte', /*javaScript.*/ORDER_ATOMIC);\n        \n        var code = 'exportToFile('+ value_filename+','+value_contentfile+','+ value_converttobyte + ');\\n';\n        return code;\n    };\n    \n}\n\nexports.fieldXML = function () {\n    return `<block type=\"exportfile\">\n    <value name=\"fileName\">\n        <shadow type=\"text\">\n            <field name=\"TEXT\">abc</field>\n        </shadow>\n    </value>\n    <value name=\"convertToByte\">\n        <shadow type=\"logic_boolean\">\n            <field name=\"BOOL\">FALSE</field>\n        </shadow>\n    </value>\n</block>\n`;\n}\n","//call m  bs.filterBlocks.definitionBlocks(Blockly.Blocks, Blockly.JavaScript));\nexports.definitionBlocks=function(blocks,javaScript){\n    \n    blocks['filterList'] = {\n        init: function() {\n          this.appendDummyInput()\n              .appendField(\"filterList\");\n              this.appendValueInput(\"LIST\")\n              .setCheck(\"Array\");\n              \n              this.appendValueInput(\"Logic\")\n              .setCheck(\"String\")\n              .appendField(\"item=>\");\n              this.setInputsInline(true);\n              this.setOutput(true, \"Array\");\n              this.setColour(230);\n              this.setTooltip(\"\");\n              this.setHelpUrl(\"\");\n        }\n      };\n     \n      javaScript['filterList'] = function(block) {\n        var list = javaScript.valueToCode(block, 'LIST',\n        javaScript.ORDER_MEMBER) || '[]';\n            \n        var value_logic = javaScript.valueToCode(block, 'Logic', javaScript.ORDER_ATOMIC);\n        if(typeof value_logic === 'string')// remove '\n            value_logic = value_logic.substr(1,value_logic.length-2);\n            \n        var code = '';\n          code += '(function(t){ if (typeof t === \"string\") return JSON.parse(t);  return t;}(' + list  +')).filter(function (item){ return ' + value_logic +';})';\n        code += '';\n        \n        return [code, javaScript.ORDER_FUNCTION_CALL];\n      };\n      \n      blocks['mapList'] = {\n          init: function () {\n              this.appendDummyInput()\n                  .appendField(\"mapList\");\n              this.appendValueInput(\"LIST\")\n                  .setCheck(\"Array\");\n      \n              this.appendValueInput(\"Logic\")\n                  .setCheck(\"String\")\n                  .appendField(\"item=>\");\n              this.setInputsInline(true);\n              this.setOutput(true, \"Array\");\n              this.setColour(230);\n              this.setTooltip(\"\");\n              this.setHelpUrl(\"\");\n          }\n      };\n      \n      javaScript['mapList'] = function (block) {\n          var list = javaScript.valueToCode(block, 'LIST',\n          javaScript.ORDER_MEMBER) || '[]';\n      \n          var value_logic = javaScript.valueToCode(block, 'Logic', javaScript.ORDER_ATOMIC);\n          if (typeof value_logic === 'string')// remove '\n              value_logic = value_logic.substr(1, value_logic.length - 2);\n      \n          var code = '';\n          code += '(function(t){ if (typeof t === \"string\") return JSON.parse(t);  return t;}(' + list +')).map(function (item){ return ' + value_logic + ';})';\n          code += '';\n      \n          return [code, javaScript.ORDER_FUNCTION_CALL];\n      };\n\n      blocks['reduceList'] = {\n        init: function () {\n            this.appendDummyInput()\n                .appendField(\"reduceList\");\n\n            this.appendValueInput(\"LIST\")\n                .setCheck(\"Array\");\n        \n            this.appendValueInput(\"initValue\")\n                .setCheck(null)\n                .appendField(\"initialValue\");\n\n            this.appendValueInput(\"Logic\")\n                .setCheck(\"String\")\n                .appendField(\"callback(acc,curVal,index, array)=>\");\n            \n            this.setInputsInline(true);\n            this.setOutput(true, null);\n            this.setColour(230);\n            this.setTooltip(\"\");\n            this.setHelpUrl(\"\");\n        }\n    };\n    \n    javaScript['reduceList'] = function (block) {\n        \n        var list = javaScript.valueToCode(block, 'LIST',\n        javaScript.ORDER_MEMBER) || '[]';\n    \n        var value_initvalue = '';\n        try{\n            value_initvalue  = javaScript.valueToCode(block, 'initValue', javaScript.ORDER_ATOMIC);\n        }\n        catch(e){\n            window.alert(e);\n        }\n        \n        var value_logic = javaScript.valueToCode(block, 'Logic', javaScript.ORDER_ATOMIC);\n        if (typeof value_logic === 'string')// remove '\n            value_logic = value_logic.substr(1, value_logic.length - 2);\n \n        \n        var code = '';\n        code += '(function(t){ if (typeof t === \"string\") return JSON.parse(t);  return t;}(' + list +')).reduce(function (acc,curVal,index,array){ ' + value_logic + ';}';\n        if(value_initvalue && value_initvalue.toString().length>0){\n            code+=','+value_initvalue;   \n        }\n        code+=')';\n        code += '';\n    \n        return [code, javaScript.ORDER_FUNCTION_CALL];\n    };\n}\nexports.fieldXML=function(){\n    return `\n        <category id=\"catA\" name=\"Array\">\n            <block type=\"filterList\">\n                <value name=\"LIST\">\n                    <block type=\"variables_get\">\n                        <field name=\"VAR\">list</field>\n                    </block>\n                </value>\n                <value name=\"initValue\">\n                    <shadow type=\"text\">\n                        <field name=\"TEXT\"> </field>\n                    </shadow>\n                </value>\n                <value name=\"Logic\">\n                    <shadow type=\"text\">\n                        <field name=\"TEXT\">item.property == \"value\"</field>\n                    </shadow>\n                </value>\n            </block>\n            <block type=\"mapList\">\n            <value name=\"LIST\">\n                <block type=\"variables_get\">\n                    <field name=\"VAR\">list</field>\n                </block>\n            </value>\n            <value name=\"Logic\">\n                <shadow type=\"text\">\n                    <field name=\"TEXT\">item.property</field>\n                </shadow>\n            </value>\n        </block>\n        <block type=\"reduceList\">\n        <value name=\"LIST\">\n        <block type=\"variables_get\">\n                <field name=\"VAR\">list</field>\n            </block>\n            </value>\n            <value name=\"Logic\">\n                <shadow type=\"text\">\n                    <field name=\"TEXT\">...</field>\n                </shadow>\n            </value>\n        </block>\n        </category>\n\n`\n}\n","const Blockly=require('blockly');\nexports.definitionBlocks=function (blocks, javaScript){\n    const ORDER_NONE= 99;\n    const ORDER_ATOMIC= 0;\n    blocks['window_open'] = {\n  \n        init: function() {\n          this.jsonInit({\n            \"message0\": 'Open %1',\n            \"args0\": [\n              {\n                \"type\": \"input_value\",\n                \"name\": \"TEXT\"\n              }\n            ],\n            \"previousStatement\": null,\n            \"nextStatement\": null,\n            \"style\": \"text_blocks\"\n            \n          });\n        }\n      };\n          \n      \n          \n      javaScript['window_open'] = function(block) {\n        // Print statement.\n        var msg = javaScript.valueToCode(block, 'TEXT',\n            /*javaScript.*/ORDER_NONE) || '\\'\\'';\n\n        \n        return 'if((typeof '+msg+' == \"object\") && (\"to\" in '+msg+')){open(\"mailto:'+ msg.to+'\")}else{ open(' + msg + ')};\\n';\n      };\n\n      blocks['text_message'] = {\n        init: function() {\n          this.jsonInit({\n            \"message0\": 'alert %1',\n            \"args0\": [\n              {\n                \"type\": \"input_value\",\n                \"name\": \"TEXT\"\n              }\n            ],\n            \"previousStatement\": null,\n            \"nextStatement\": null,\n            \"style\": \"text_blocks\"\n            \n          });\n        }\n      };\n      javaScript['text_message'] = function(block) {\n        // Print statement.\n        var msg = javaScript.valueToCode(block, 'TEXT',\n        /*javaScript.*/ORDER_NONE) || '\\'\\'';\n        \n        var code= 'alert1(' + msg + ');\\n';\n        return code;\n      };\n      \n\n      blocks['text_print_return'] = {\n        init: function() {\n          this.appendValueInput(\"TEXT\")\n              .setCheck(null)\n              .appendField(\"print return\")\n              .appendField(new Blockly.FieldLabelSerializable(\"\"), \"NAME\");\n          this.setOutput(true, null);\n          \n       this.setTooltip(\"\");\n       this.setHelpUrl(\"\");\n        }\n      };\n      \n      javaScript['text_print_return'] = function(block) {\n        // Print statement.\n        var msg = javaScript.valueToCode(block, 'TEXT',\n        /*javaScript.*/ORDER_ATOMIC) || '\\'\\'';\n        \n        var code= '(function(){window.alert(' + msg + ');\\n;return (' + msg + ');}())\\n';\n        return [code, /*javaScript.*/ORDER_NONE];\n      };\n      \n\n      blocks['valuefromtext'] = {\n        init: function() {\n          this.appendDummyInput()\n              .appendField(\"InputFromText\");\n          this.appendValueInput(\"IdOfText\")\n              .setCheck(\"String\")\n              .appendField(\"Text id\");\n        this.appendValueInput(\"ValueToObtain\")\n              .setCheck(\"String\")\n              .appendField(\"Property\");\n          this.setOutput(true, null);\n          this.setColour(230);\n       this.setTooltip(\"\");\n       this.setHelpUrl(\"\");\n        }\n      }\n        \n       javaScript['valuefromtext'] = function(block) {\n        var value_idoftext = javaScript.valueToCode(block, 'IdOfText', /*javaScript.*/ORDER_ATOMIC);\n        var value_valuetoobtain = javaScript.valueToCode(block, 'ValueToObtain', /*javaScript.*/ORDER_ATOMIC)||'\"value\"';\n        var code = 'getIDProp('+ value_idoftext+','+ value_valuetoobtain+')';\n        return [code, /*javaScript.*/ORDER_NONE];\n      };\n}\n\nexports.fieldXML = function () {\n    return `<block type=\"window_open\"></block>\n    <block type=\"valuefromtext\">\n        <value name=\"IdOfText\">\n            <shadow type=\"text\">\n                <field name=\"TEXT\">output</field>\n            </shadow>\n        </value>\n        <value name=\"ValueToObtain\">\n            <shadow type=\"text\">\n                <field name=\"TEXT\">value</field>\n            </shadow>\n        </value>\n    </block>\n    <block type=\"text_print\"></block>\n    <block type=\"text_print_return\"></block>  \n    <block type=\"text_prompt_ext\"></block>\n    <block type=\"text_message\"></block>\n    \n    `;\n}","// exports.printMsg = function() {\n//     window.alert(\"This is a message from the demo package\");\n//   }\n\n// exports.filter1={\n//   \"asd\":\"asdasd\"\n// }\n\nmodule.exports = {\n  \n  defaultBlocks: require('./defaultBlocks'),\n  filterBlocks: require('./filterBlocks'),\n  waitBlocks: require('./wait_block'),\n  xhrBlocks: require('./xhrBlocks'),\n  propBlocks: require('./propBlocks'),\n  guiBlocks: require('./guiBlocks'),\n  convertersBlocks: require('./convertersBlocks'),\n  exportFileBlock: require('./exportfileBlock'),\n  createObjectBlocks: require('./createObjectBlocks'),\n  currentDateBlock: require('./currentDateBlock'),\n  dateFromTextBlock: require('./dateFromTextBlock'),\n  waitBlocks: require('./waitBlocks'),\n  commentBlock: require('./commentBlock'),\n  auth0Blocks: require('./auth0Blocks'),\n  windowsCreds: require('./WindowsCreds'),\n  trycatchFinBlock: require('./tryCatchFinBlock'),\n  chartBlock: require('./chartBlock'),\n  emailBlocks: require('./emailBlocks'),\n  htmlblocks: require('./HTMLBlocks'),\n  ttsBlock: require('./TTSBlock'),\n  pianoBlock: require('./pianoBlock')\n\n};","// exports.definitionBlocks = function (blocks, javaScript) {\n// }\n\n// exports.fieldXML = function () {\n// }\nconst Blockly = require(\"blockly\");\n// const a = require('./audioTest.js');\nexports.definitionBlocks = function (blocks, javaScript) {\n  blocks[\"pianoBlock\"] = {\n    init: function () {\n      this.appendValueInput(\"Note\").setCheck(\"String\").appendField(\"Note(A-G)\");\n      this.appendValueInput(\"Sharp\")\n        .setCheck(\"Boolean\")\n        .appendField(\"#\");\n      this.appendValueInput(\"Octave\").setCheck(\"Number\").appendField(\"Octave\");\n      this.appendValueInput(\"Duration\")\n        .setCheck(\"Number\")\n        .appendField(\"Duration\");\n      this.setPreviousStatement(true, null);\n      this.setNextStatement(true, null);\n      this.setColour(230);\n      this.setTooltip(\"\");\n      this.setHelpUrl(\"https://github.com/keithwhor/audiosynth\");\n    },\n  };\n  javaScript[\"pianoBlock\"] = function (block) {\n    // var dropdown_voice = block.getFieldValue('Voice');\n    var value_note = javaScript.valueToCode(block, 'Note', javaScript.ORDER_ATOMIC);\n  var value_sharp = javaScript.valueToCode(block, 'Sharp', javaScript.ORDER_ATOMIC)|| false;\n  var value_octave = javaScript.valueToCode(block, 'Octave', javaScript.ORDER_ATOMIC);\n  var value_duration = javaScript.valueToCode(block, 'Duration', javaScript.ORDER_ATOMIC)|| 2;\n \n  var valSharp = '';\n  if(value_sharp == \"true\"){\n        valSharp='#';\n    }   \n    var code = 'playPiano(' + value_note+ valSharp+','+value_octave +','+ value_duration+');\\n';\n    return code;\n  };\n\n  blocks['cmajor'] = {\n    init: function() {\n      this.appendDummyInput()\n          .appendField(\"CMajor \");\n      this.setOutput(true, \"Array\");\n      this.setColour(230);\n   this.setTooltip(\"\");\n   this.setHelpUrl(\"\");\n    }\n  };\n  javaScript['cmajor'] = function(block) {\n    var code = '[\"C\",\"D\",\"E\",\"F\",\"G\",\"A\",\"B\"]';\n    return [code, javaScript.ORDER_NONE];\n  };\n  \n\n\n};\n\nexports.fieldXML = function () {\n  return `<block type=\"pianoBlock\">\n        <value name=\"Note\">\n            <shadow type=\"text\">\n            <field name=\"TEXT\">C</field></shadow>\n        </value>       \n        <value name=\"Octave\">\n            <shadow type=\"math_number\">\n            <field name=\"NUM\">4</field></shadow>\n        </value>       \n        <value name=\"Sharp\">\n            <shadow type=\"logic_boolean\">\n            <field name=\"BOOL\">FALSE</field></shadow>\n        </value>       \n        \n        <value name=\"Duration\">\n            <shadow type=\"math_number\">\n            <field name=\"NUM\">2</field></shadow>\n        </value>       \n        </block>\n        <block type=\"cmajor\"></block>\n\n`;\n};\n","const Blockly=require('blockly');\nexports.definitionBlocks = function (blocks, javaScript) {\n    const ALIGN_RIGHT=1;\n    const ALIGN_CENTRE=0;\n    const ORDER_ATOMIC = 0;\n    const ORDER_NONE= 99;\n  blocks[\"modifyproperty\"] = {\n    init: function () {\n      this.appendDummyInput().appendField(\"Modify \");\n      this.appendValueInput(\"ObjectToChange\")\n        .setCheck(null)\n        .setAlign(/*Blockly.*/ALIGN_CENTRE)\n        .appendField(\n          new Blockly.FieldLabelSerializable(\"object\"),\n          \"objectName\"\n        );\n      this.appendValueInput(\"PropertyName\")\n        .setCheck(null)\n        .setAlign(/*Blockly.*/ALIGN_RIGHT)\n        .appendField(new Blockly.FieldLabelSerializable(\",property\"), \"prop\");\n      this.appendValueInput(\"NewValue\")\n        .setCheck(null)\n        .setAlign(/*Blockly.*/ALIGN_RIGHT)\n        .appendField(new Blockly.FieldLabelSerializable(\"toValue\"), \"newValue\");\n      this.setInputsInline(true);\n      this.setPreviousStatement(true, null);\n      this.setNextStatement(true, null);\n      this.setTooltip(\"\");\n      this.setHelpUrl(\"\");\n    },\n  };\n  javaScript[\"modifyproperty\"] = function (block) {\n    var value_objecttochange = javaScript.valueToCode(\n      block,\n      \"ObjectToChange\",\n      /*javaScript.*/ORDER_ATOMIC\n    );\n    var value_propertyname = javaScript.valueToCode(\n      block,\n      \"PropertyName\",\n      /*javaScript.*/ORDER_ATOMIC\n    );\n    var value_newvalue = javaScript.valueToCode(\n      block,\n      \"NewValue\",\n      /*javaScript.*/ORDER_ATOMIC\n    );\n    var code =\n      value_objecttochange +\n      \"[\" +\n      value_propertyname +\n      \"]=\" +\n      value_newvalue +\n      \";\";\n    return code;\n  };\n  blocks[\"getproperty\"] = {\n    init: function () {\n      this.appendDummyInput().appendField(\"Get from\");\n      this.appendValueInput(\"ObjectToChange\")\n        .setCheck(null)\n        .setAlign(/*Blockly.*/ALIGN_CENTRE)\n        .appendField(\n          new Blockly.FieldLabelSerializable(\"object\"),\n          \"objectName\"\n        );\n      this.appendValueInput(\"PropertyName\")\n        .setCheck(null)\n        .setAlign(/*Blockly.*/ALIGN_RIGHT)\n        .appendField(new Blockly.FieldLabelSerializable(\"property\"), \"prop\");\n      this.setInputsInline(true);\n      this.setOutput(true, null);\n      //this.setTooltip(\"\");\n      //this.setHelpUrl(\"\");\n    },\n  };\n  javaScript[\"getproperty\"] = function (block) {\n    var value_objecttochange = javaScript.valueToCode(\n      block,\n      \"ObjectToChange\",\n      /*javaScript.*/ORDER_ATOMIC\n    );\n\n    var value_propertyname = javaScript.valueToCode(\n      block,\n      \"PropertyName\",\n      /*javaScript.*/ORDER_ATOMIC\n    );\n\n    var code =\n      '(function(t){ if (typeof t === \"string\") return JSON.parse(t);  return t;}(' +\n      value_objecttochange +\n      \"))[\" +\n      value_propertyname +\n      \"]\";\n\n    return [code, /*javaScript.*/ORDER_NONE];\n  };\n};\n\n\nexports.fieldXML = function () {\n    return `\n    \n    <block type=\"modifyproperty\">\n        <value name=\"PropertyName\">\n            <shadow type=\"text\">\n                <field name=\"TEXT\">enter property name</field>\n            </shadow>\n        </value>\n    </block>\n    <block type=\"getproperty\">\n        <value name=\"PropertyName\">\n            <shadow type=\"text\">\n                <field name=\"TEXT\">enter property name</field>\n            </shadow>\n        </value>\n\n    </block>    \n`\n}","exports.definitionBlocks = function (blocks, javaScript) {\n    const ORDER_ATOMIC = 0;\n    const ORDER_NONE=99;\n\n\n    blocks['trycatchfinally'] = {\n      init: function() {\n        this.appendStatementInput('TRY')\n        .appendField('try');\n    this.appendStatementInput('CATCH')\n        .appendField('catch');\n    this.appendStatementInput('FINALLY')\n        .appendField('finally');\n    \n        this.setPreviousStatement(true,null);\n    this.setNextStatement(true,null);\n        //this.setColour(230);\n     //this.setTooltip(\"\");\n     //this.setHelpUrl(\"\");\n      }\n    };\n    javaScript['trycatchfinally'] = function(block) {\n      var statements_try = javaScript.statementToCode(block, 'TRY');\n      var statements_catch = javaScript.statementToCode(block, 'CATCH');\n      var statements_finally = javaScript.statementToCode(block, 'FINALLY');\n      \n      var code = 'try {\\n' + statements_try + '}\\n'; \n      code += 'catch(err){\\n errHandler(JSON.stringify(err));\\n' + statements_catch + '\\n}';\n      code += 'finally{\\n ' + statements_finally + '\\n}\\n';\n\n      return code;\n    };\n  };\nexports.fieldXML =function(){\n    return `\n    \n    <block type=\"trycatchfinally\">\n    \n</block>\n`\n}","// exports.definitionBlocks = function (blocks, javaScript) {\n// }\n\n// exports.fieldXML = function () {\n// }\n\nexports.definitionBlocks = function (blocks, javaScript) {\n    const ORDER_ATOMIC = 0;\n    blocks['wait'] = {\n    init: function() {\n      this\n\t\t\t.appendValueInput('VALUE')            \n            .appendField('wait secs');\n          // .appendField(\"delay\")\n          // .appendField(new Blockly.FieldNumber(10, 0), \"wait\")\n          // .appendField(\"secs\");\n      this.setPreviousStatement(true, null);\n      this.setNextStatement(true, null);\n      //this.setColour();\n      //this.setTooltip('');\n      //this.setHelpUrl('');\n    }\n  };\n\n  javaScript['wait'] = function(block) {\n    var number_wait = javaScript.valueToCode(block, 'VALUE', javaScript.ORDER_ATOMIC)|| '';    \n    var code= 'waitTime('+ \tnumber_wait+');';\n\treturn code;\n  };\n  \n  \n  blocks['wait_until'] = {\n    init: function() {\n      this\n\t\t\t.appendValueInput('VALUE')            \n            .appendField('wait until date');\n          \n      this.setPreviousStatement(true, null);\n      this.setNextStatement(true, null);\n      //this.setColour();\n      //this.setTooltip('');\n      //this.setHelpUrl('');\n    }\n  };\n\n  javaScript['wait_until'] = function(block) {\n    var number_wait = javaScript.valueToCode(block, 'VALUE', /*javaScript.*/ORDER_ATOMIC)|| '';    \n    //console.log(number_wait);\n\t\n\tvar code= 'waitTime(('+ number_wait+'-new Date())/1000);';\n\treturn code;\n  };\n\n}\n\nexports.fieldXML = function () {\n    return `\n    <block type=\"wait\">\n\n    <value name=\"VALUE\">\n        <shadow type=\"math_number\">\n            <field name=\"NUM\">10</field>\n        </shadow>\n    </value>\n\n</block>\n<block type=\"wait_until\">\n\n</block>`;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Example \"wait\" block that will pause the interpreter for a\n * number of seconds. Because wait is a blocking behavior, such blocks will\n * only work in interpreted environments.\n *\n * See https://neil.fraser.name/software/JS-Interpreter/docs.html\n */\n//modified by Andrei Ignat for BlocklyScripts\nexports.definitionBlocks=function(blocks_defineBlocksWithJsonArray,javaScript){\n    blocks_defineBlocksWithJsonArray([{\n    \"type\": \"wait_seconds\",\n    \"message0\": \" wait %1 seconds\",\n    \"args0\": [{\n      \"type\": \"field_number\",\n      \"name\": \"SECONDS\",\n      \"min\": 0,\n      \"max\": 600,\n      \"value\": 1\n    }],\n    \"previousStatement\": null,\n    \"nextStatement\": null,\n    \"colour\": \"%{BKY_LOOPS_HUE}\"\n  }]);\n\n  /**\n   * Generator for wait block creates call to new method\n   * <code>waitForSeconds()</code>.\n   */\n  javaScript['wait_seconds'] = function(block) {\n    var seconds = Number(block.getFieldValue('SECONDS'));\n    var code = 'waitForSeconds(' + seconds + ');\\n';\n    return code;\n  };\n}\n/**\n * Register the interpreter asynchronous function\n * <code>waitForSeconds()</code>.\n */\n//added in interpreter async\n// function initInterpreterWaitForSeconds(interpreter, globalObject) {\n//   // Ensure function name does not conflict with variable names.\n//   Blockly.JavaScript.addReservedWords('waitForSeconds');\n\n//   var wrapper = interpreter.createAsyncFunction(\n//     function(timeInSeconds, callback) {\n//       // Delay the call to the callback.\n//       setTimeout(callback, timeInSeconds * 1000);\n//     });\n//   interpreter.setProperty(globalObject, 'waitForSeconds', wrapper);\n// }\n\nexports.fieldXML=function(){\n  return `\n  <block type=\"wait_seconds\"></block>\n`\n}","const Blockly =require('blockly');\n\nexports.definitionBlocks = function (blocks, javaScript) {\n    const ORDER_ATOMIC = 0;\n    const ORDER_NONE=99;\n\n\n    blocks['headersbeforehttp'] = {\n      init: function() {\n        this.appendDummyInput()\n            .appendField(\"Add Headers\");\n        this.appendValueInput(\"HttpDomain\")\n            .setCheck(\"String\")\n            .appendField(\"Domain\");\n        this.appendValueInput(\"HeaderName\")\n            .setCheck(\"String\")\n            .appendField(\"Header Name\");\n        this.appendValueInput(\"HeaderValue\")\n            .setCheck(\"String\")\n            .appendField(\"Header Value\");\n      this.setPreviousStatement(true, null);\n        this.setNextStatement(true, null);\n        //this.setColour(230);\n     this.setTooltip(\"at domain put (localSite) or *\");\n     //this.setHelpUrl(\"\");\n      }\n    };\n    javaScript['headersbeforehttp'] = function(block) {\n      var value_httpdomain = javaScript.valueToCode(block, 'HttpDomain', /*javaScript.*/ORDER_ATOMIC)||'(localSite)';\n      var value_headername = javaScript.valueToCode(block, 'HeaderName', /*javaScript.*/ORDER_ATOMIC);\n      var value_headervalue = javaScript.valueToCode(block, 'HeaderValue', /*javaScript.*/ORDER_ATOMIC);\n      \n      var code = '\\n';//'alert(\"a\" + JSON.stringify(headersForDomain)+\"a\");\\n';\n      code +='{\\n';\n      code +='if(!(' + value_httpdomain + ' in headersForDomain))\\n';\n      code +='{\\n';\n      code +='headersForDomain[' + value_httpdomain +']=[];\\n';\n      code +='};\\n';\n      code +='var arr = headersForDomain[' + value_httpdomain +'];\\n';\n      code +='arr.push({name:' + value_headername +', value:'+value_headervalue+'});\\n';\n      code +='//alert(\"a\" + JSON.stringify(arr)+\"a\");\\n';\n      code +='//alert(\"a\" + JSON.stringify(headersForDomain[' + value_httpdomain +'])+\"a\");\\n';\n      code +='};\\n';\n      return code;\n    };\n\n  blocks[\"httprequest\"] = {\n    init: function () {\n      this.appendDummyInput()\n        .appendField(\n          /*new*/ new Blockly.FieldDropdown([\n            [\"JSON\", \"JSON\"],\n            [\"Text\", \"Text\"],\n          ]),\n          \"TypeOutput\"\n        )\n        .appendField(\"HttpRequest\");\n      this.appendValueInput(\"TheUrl\")\n        .setCheck(null)\n        .appendField(\n          /*new*/ new Blockly.FieldDropdown([\n            [\"GET\", \"GET\"],\n            [\"POST\", \"POST\"],\n            [\"PUT\", \"PUT\"],\n            [\"DELETE\", \"DELETE\"],\n          ]),\n          \"TypeRequest\"\n        )\n        .appendField(\"URL\");\n      this.appendValueInput(\"Data\").setCheck(null).appendField(\"Data\");\n      this.setOutput(true, null);\n      //this.setColour(230);\n      //this.setTooltip(\"\");\n      //this.setHelpUrl(\"\");\n    },\n  };\n\n  javaScript[\"httprequest\"] = function (block) {\n    var dropdown_typeoutput = block.getFieldValue(\"TypeOutput\");\n    var dropdown_typerequest = block.getFieldValue(\"TypeRequest\");\n    var value_theurl = javaScript.valueToCode(\n      block,\n      \"TheUrl\",\n      /*javaScript.*/ORDER_ATOMIC\n    );\n    var value_data = javaScript.valueToCode(\n      block,\n      \"Data\",\n      /*javaScript.*/ORDER_ATOMIC\n    );\n    var operation = \"\";\n    switch (dropdown_typerequest.toString()) {\n      case \"GET\":\n        operation =\n          \"(function(url){ var res=JSON.parse(getXhr(url)); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}(\" +\n          value_theurl +\n          \") )\";\n        break;\n      case \"POST\":\n        // console.log('x',value_data)\n        operation =\n          \"(function(url,data){ var res=JSON.parse(postXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}(\" +\n          value_theurl ;\n        if (value_data) {\n          operation+=\",\" +value_data           \n        }\n        operation += \") )\";\n        break;\n      case \"DELETE\":\n        operation =\n          \"(function(url,data){ var res=JSON.parse(deleteXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}(\" +\n          value_theurl ;\n        if (value_data) {\n          operation+=\",\" +value_data           \n        }\n        operation += \") )\";\n        break;\n      case \"PUT\":\n        operation =\n          \"(function(url,data){ var res=JSON.parse(putXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}(\" +\n          value_theurl ;\n        if (value_data) {\n          operation+=\",\" +value_data           \n        }\n        operation += \") )\";\n        break;\n      default:\n        alert(\"Do not understand : \" + dropdown_typerequest.toString());\n        break;\n    }\n\n    var code = operation;\n    switch (dropdown_typeoutput) {\n      case \"JSON\":\n        code = \"JSON.parse(\" + code + \")\";\n    }\n\n    return [code, /*javaScript.*/ORDER_NONE];\n  };\n};\n\nexports.fieldXML =function(){\n    return `\n    \n    <block type=\"headersbeforehttp\">\n    <value name=\"HttpDomain\">\n        <shadow type=\"text\">\n            <field name=\"TEXT\">(localSite)</field>\n        </shadow>\n    </value>\n    <value name=\"HeaderName\">\n        <shadow type=\"text\">\n            <field name=\"TEXT\">Authorization</field>\n        </shadow>\n    </value>\n    <value name=\"HeaderValue\">\n        <shadow type=\"text_join\">\n\n        </shadow>\n    </value>\n</block>\n<block type=\"text_print\">\n<value name=\"TEXT\">\n\n    <block type=\"httprequest\">\n    <value name=\"TheUrl\">\n        <shadow type=\"text\">\n            <field name=\"TEXT\">https://httpbin.org/get</field>\n        </shadow>\n    </value>\n</block>\n</value>\n</block>    \n\n`\n}","const Blockly=require('blockly');\n// const vex = require('vex-js');\nclass TagsFunctions{\n  functionName= '';\n  tags=[];\n}\nclass BlocklyReturnSwagger {\n  constructor(url) {\n    this.swaggerUrl = url;\n  }\n  GenerateBlocks = [];\n  GenerateFunctions = [];\n  fieldXMLObjects = [];\n  fieldXMLFunctions = [];\n  hasError = true;\n  paths= [];\n  name='';\n  operations=[];\n\n  tagsSwagger=[];\n\n  nameCategSwagger() {\n    return `catSwagger${this.findHostNameRegular()}_${this.name}`;\n  }\n\n\n  metaBlocks(){\n    var self=this;\n    return function (blocks, javaScript) {\n      var nameBlock =`meta_swagger_controllers_${self.name}`;\n      blocks[nameBlock] = {\n        init: function() {\n          this.appendDummyInput()\n              .appendField(\"categories_\"+self.name);\n          this.setOutput(true, null);\n          this.setColour(30);\n          this.setTooltip(\"\");\n          this.setHelpUrl(self.swaggerUrl);\n      }\n    };\n      javaScript[nameBlock] = function(block) {\n\n        var categ=self.findCategSwaggerFromPaths();\n        var obj= categ.map(it=>{\n          return {\n            name:it\n            //ops:self.operations.filter(op=>op.controller==it).map(op=>op.id)\n          }\n        });\n      obj ={'name':self.name,'categories':obj};\n      var code = JSON.stringify(obj);\n      return [code, javaScript.ORDER_NONE];\n    } ;\n    \n    var nameBlock =`meta_swagger_controllers_actions_${self.name}`;\n      blocks[nameBlock] = {\n        init: function() {\n          this.appendDummyInput()\n              .appendField(\"categories_actions\"+self.name);\n          this.setOutput(true, null);\n          this.setColour(30);\n          this.setTooltip(\"\");\n          this.setHelpUrl(self.swaggerUrl);\n      }\n    };\n      javaScript[nameBlock] = function(block) {\n\n        var categ=self.findCategSwaggerFromPaths();\n        var obj= categ.map(it=>{\n          return {\n            name:it,\n            ops:self.findfieldXMLFunctions(it).map(op=>op.id).filter(op=>op.length>0)\n          }\n        });\n      obj ={'name':self.name,'categories':obj};\n      var code = JSON.stringify(obj);\n      return [code, javaScript.ORDER_NONE];\n    } ;\n   };\n\n  }\n  cacheCategSwaggerFromPaths = [];\n  findfieldXMLFunctions(controllerName){\n    var allPaths=this.openApiDocument.paths;\n    var keys= Object.keys(allPaths);\n    \n    var urls = this.operations.filter((it) => it.controller == controllerName);\n    //console.log(urls);\n    var xmlList = this.fieldXMLFunctions\n      .filter((it) => {\n        if (it.id == '') return true;\n        var val = it.id + '/';\n        var existInfields = false;\n        urls.forEach((url) => {\n          if (val.startsWith(url.id)) existInfields = true;\n        });\n        if(existInfields) return true;\n        \n        urls.forEach((url) => {\n          //url has latest / , but can have also {  for parameters\n            var str=url.id.substring(0,url.id.lastIndexOf('/'))+'{';\n          if (val.startsWith(str)) existInfields = true;\n        });\n\n        return existInfields;\n      });\n      // console.log('x',xmlList);\n      return xmlList;\n  }\n  findCategsFromTags(){\n    \n    var allPaths=this.openApiDocument.paths;\n    var keys= Object.keys(allPaths);\n    var self=this;\n    keys.forEach(function (key) {\n      var path= allPaths[key];\n      // console.log('x',path);\n\n      if(path ){\n        var objKeys= Object.keys(path);\n        objKeys.forEach(function (objKey) {\n          //console.log('z',path[objKey]);\n\n          var tags=path[objKey].tags;\n        if(tags && tags.length>0)\n        tags.forEach(function (tag) {\n          if(!self.cacheCategSwaggerFromPaths.includes(tag)){\n            self.cacheCategSwaggerFromPaths.push(tag);\n            \n          }\n          self.operations.push({ controller:tag, id:key});\n            });\n        });\n        \n      }\n    });\n  }\n  findCategSwaggerFromPaths(){\n    \n    this.findCategsFromTags();\n    if(this.cacheCategSwaggerFromPaths.length>0) return this.cacheCategSwaggerFromPaths;\n    \n\n    var normalized= this.paths\n      .filter(it=> it && it.id && it.id.length >0 )\n      .map(it=>{\n          var len=it.id.length;\n          var i=it.id.indexOf(\"{\");\n          while(i>0) {\n            // /api/v{version}\n            var closing=it.id.indexOf(\"}\",i);\n            if(len-closing<2) {\n              it.id=it.id.substring(0,i); \n              break;\n            }\n            i=it.id.indexOf(\"{\",closing);\n          }\n            \n          \n          return it;\n      })\n       .map(it=>{\n         if(it.id.lastIndexOf(\"/\") != it.id.length-1)\n             it.id +=\"/\";\n\n         return it;\n       });\n      \n    ;\n    this.operations=normalized\n          .filter(it=>it.nrOps>1)\n          //.map(it=>it.id)\n          .map(it=> {\n            \n            var ret= {arr :  it.id.split('/').filter(a=>a.length>0),id : it.id};\n            \n            return ret;\n          })          \n          .map(it=>{return { controller:it.arr[it.arr.length-1], id:it.id};} ) ;\n\n         \n    var others = normalized\n          .filter(it=>it.nrOps==1)\n          .map(it=>\n            {\n            return { arr : it.id.split('/').filter(a=>a.length>0), id : it.id}\n            }\n            )\n          .map(it=>{\n             if(it.arr.length ==1)\n                return { controller : it.arr[0], id:it.id};\n            return { controller:it.arr[it.arr.length-2], id:it.id};\n          })\n          ;\n          this.operations.push(...others);\n          \n          this.cacheCategSwaggerFromPaths= [...new Set(this.operations.map(it=>it.controller))];\n         \n    return  this.cacheCategSwaggerFromPaths;\n}\n  categSwagger() {\n    var h = this.findHostNameRegular();\n    h = h.replaceAll(\".\", \"\");\n    var max = 5;\n    if (h.length > max) var first = h.substring(0, max);\n    var categ = this.nameCategSwagger();\n    return (\n      '<category name=\"Objects' +\n      '\" custom=\"objects_' +\n      categ +\n      '\"></category>' +\n      '<category name=\"AllApi' +\n      '\" custom=\"AllApi_' +\n      categ +\n      '\"></category>'\n    );\n    \n  }\n  findRootSite() {\n    var href = this.swaggerUrl;\n    var hostname = \"\";\n    if (href.startsWith(\"http://\") || href.startsWith(\"https://\")) {\n      var url = new URL(href);\n\n      hostname = url.protocol + \"//\" + url.hostname;\n      if (url.port.length > 0) hostname +=\":\"+ url.port;\n    }\n    return hostname;\n  }\n\n  findHostNameRegular() {\n    var href = this.swaggerUrl;\n    var hostname = \"(localSite)\";\n    if (href.startsWith(\"http://\") || href.startsWith(\"https://\")) {\n      var url = new URL(href);\n      var port = url.port ?? 80;\n      hostname = url.hostname + port;\n    }\n    return hostname.replaceAll(\".\", \"\");\n  }\n  openApiDocument = null;\n  basePath = \"\";\n  showWindowToLoad(defaultPrompt, callback) { \n    var self = this;\n    try{\n      vex.registerPlugin(require('vex-dialog'));\n\n    }\n    catch(e){\n      //do nothing\n    }\n    //vex.defaultOptions.className = 'vex-theme-os';\n    //vex.dialog.prompt( { message:\"Swagger url?\",placeholder:  defaultPrompt,callback: callback } );\n    var res= window.prompt(\"Swagger url\",defaultPrompt);\n    callback(res);\n\n  }\n\n\n  async ParseSwagger() {\n    var self = this;\n    self.fieldXMLObjects.push(`<label text=\"${self.swaggerUrl}\"></label>`);\n    self.fieldXMLFunctions.push({id:'',gui:`<label text=\"${self.swaggerUrl}\"></label>`});\n    var r =null;\n    try{\n    // const SwaggerParser = require(\"@api-platform/api-doc-parser/lib/openapi3/parseOpenApi3Documentation\");\n    // var q = await SwaggerParser.default(this.swaggerUrl);\n    //var r = q.response;\n    const SwaggerParser  = require('swagger-client');\n    var q = await SwaggerParser.default(this.swaggerUrl);\n    // if(this.swaggerUrl.indexOf('blockly')>0){\n    //   console.log(\"b__\",q.spec.paths);\n    //     console.log(\"b__\",q.spec.paths[\"MathDivideRest\"]);\n    //     console.log(\"b__\",q.apis[\"MathDivideRest\"]);\n    // }\n      var r=q.spec;\n    }\n    catch(e){\n      console.error(`parseSwagger ${this.swaggerUrl}`,e);      \n      self.fieldXMLObjects.push(`<label text='Error parsing!'></label>`); \n      return this;\n    }\n    \n    this.hasError = false;\n    \n    this.basePath= r.basePath ||'';\n    // console.log(\"basepath\"+ this.swaggerUrl,this.basePath);\n    //var r = q.response;\n    // console.log(r.paths);\n    var data=r.components?.schemas;\n    if(data == null || data == undefined){\n      //console.log(this.swaggerUrl,data);\n      data=r.definitions;\n    }\n    \n    if (data) {\n      var keys = Object.keys(data).sort();\n      keys.forEach(function (key) {\n        // console.log(key);\n\n        var schema = data[key];\n        var objPropString = self.findProperties(schema);\n        var xmlBlockShow=`<block type=\"${key}\">`;\n        objPropString.forEach(function (prop) {\n          //console.log('y_'+prop.key,prop);\n          if(prop.value && prop.value.type){\n            var shadow=self.GenerateShadowField(prop.value.type, prop.key);\n            \n            if(shadow.length>0){\n              //xmlBlockShow += `<field name=\"${prop.key}\">${shadow}</field>`;\n              var shadowBlock=`<value name=\"val_${prop.key}\">${shadow}</value>`;\n              // if(prop.key=='authority'){\n              //   console.log('z'+prop.key,shadowBlock);\n              // }\n              xmlBlockShow+=shadowBlock;\n            }\n          }\n        });\n        xmlBlockShow+='</block>';\n        self.fieldXMLObjects.push(xmlBlockShow);\n\n        \n        self.GenerateBlocks.push(self.GenerateBlock(schema, key));\n      });\n    }\n    else{\n      console.log(\"_A\",r);\n    }\n\n    if (r.paths) {\n      Object.keys(r.paths).forEach(function (key) {\n        var path = r.paths[key];\n        self.paths.push({id: key, nrOps: Object.keys(path).length});\n        Object.keys(path).forEach(function (oo) {\n          var ops = path[oo];\n          // if(ops && ops[\"tags\"]){\n          //     console.log('z_',ops[\"tags\"]);0\n          // }\n          self.GenerateFunctions.push(\n            self.GenerateFunction(path, key, ops, oo)\n          );\n        });\n      });\n    }\n    self.openApiDocument = r;\n    // console.log(self.openApiDocument);\n    return self;\n  }\n  // findPath(key){\n  //   return this.openApiDocument.paths[key];\n  // }\n  findProperties(schema) {\n    var objPropString = [];\n    if (schema.properties) {\n      Object.keys(schema.properties).forEach((key) => {\n        //var t = self.TranslateToBlocklyType(schema.properties[key].type);\n        // console.log(key, schema.properties[key]);\n        objPropString.push({ key: key, value: schema.properties[key] });\n      });\n    }\n    return objPropString;\n  }\n  GenerateNameFunction(path, key, operation, operationKey) {\n    var ret = key.replaceAll(\"/\", \"_\").replaceAll(\"{\", \"__\").replaceAll(\"}\",\"\");\n    return operationKey + \"_\" + ret;\n  }\n\n  GenerateShadowField(blockShadowType,key, defaultValue) {\n         \n            switch (blockShadowType)\n            {\n                case \"integer\":\n                    var val=defaultValue?defaultValue:0;            \n                    return `<block type='math_number'><field name='NUM'>${val}</field></block>`;\n\n                case \"string\":\n                    var val = defaultValue?defaultValue:`please enter ${key}`;\n                    return `<block type='text'><field name='TEXT'>${val}</field></block>`;\n\n                case \"boolean\":\n                    var val= defaultValue?defaultValue:\"FALSE\";\n                    return `<block type='logic_boolean'><field name='BOOL'>${val}</field></block>`;\n                case \"array\":\n                    return '<block type=\"lists_create_with\"> <mutation items=\"0\"></mutation></block>';\n                \n                default:\n                    \n                    return \"\";\n            }\n        }\n  GenerateFunction(path, key, operation, operationKey) {\n   \n    var self = this;\n\n    var blocklyTypeName = self.GenerateNameFunction(\n      path,\n      key,\n      operation,\n      operationKey\n    );\n    var props = \"\";\n    var op = operation;\n    //console.log(key);\n    //console.log(operationKey);\n    // console.log(`assets/httpImages/${operationKey}.png`);\n    // console.log(operation);\n\n    var xmlBlockShow=`<block type=\"text_print\"> <value name=\"TEXT\"><block type=\"${blocklyTypeName}\">`;\n    if (op.parameters){\n      op.parameters.forEach((it) => {        \n        if(it.type){\n          var shadow=self.GenerateShadowField(it.type, it.name);\n          if(shadow.length>0){\n            xmlBlockShow += `<value name=\"val_${it.name}\">${shadow}</value>`;\n          }\n\n        }\n        else{\n          if(it.schema && it.schema.type){\n            var shadow=self.GenerateShadowField(it.schema.type, it.name);\n            if(shadow.length>0){\n              xmlBlockShow += `<value name=\"val_${it.name}\">${shadow}</value>`;\n            }\n          };\n      }\n      });\n    };\n   // add override host\n   var host=\"\";\n   var port=\"\";\n   try{\n    var url = new URL(self.findRootSite());\n    host=url.hostname;\n    port= url.port;\n   }\n   catch(e){\n     //do nothing\n   }\n   host=host?host:\" \";\n   \n   var shadow=self.GenerateShadowField('string', 'override_host',host);\n  //  console.log('X_override_host',shadow);\n    xmlBlockShow += `<value name=\"override_Host\">${shadow}</value>`;          \n   \n    port=port?port:\"0\";\n    var shadow=self.GenerateShadowField('integer', 'override_port',port);\n    //  console.log('X_override_host',shadow);\n      xmlBlockShow+= `<value name=\"override_Port\">${shadow}</value>`;          \n   \n      xmlBlockShow+=`</block></value>`;\n      \n      xmlBlockShow+=`</block>`;\n    self.fieldXMLFunctions.push({id:key,gui:xmlBlockShow});\n\n    return function (blocks, javaScript) {\n      blocks[blocklyTypeName] = {\n        init: function () {\n          //this.setInputsInline(true);\n          var displayOpKey=operationKey;\n          switch(operationKey.toString().toLowerCase()){\n            case \"get\":\n              displayOpKey=\"\";\n              this.setColour(210);\n              break;\n            case \"post\":\n              displayOpKey=\"\";\n              this.setColour(165);\n              break;\n            case \"put\":\n              displayOpKey=\"\";\n              this.setColour(40);\n              break;\n            case \"delete\":\n              displayOpKey=\"\";\n              this.setColour(10);\n              break;\n            default:\n              console.log(`not found ${operationKey}`);\n              this.setColour(10);\n          }\n          var str = key;\n\n          var categs = self.findCategSwaggerFromPaths();\n          for(var i=0;i<categs.length;i++){\n            var find='/'+categs[i]+'/';\n            var whereFind=key.indexOf(find);\n            if(whereFind>-1){\n              var remains=key.substring(whereFind+ find.length);\n              if(remains.length< str.length){\n                str=remains;\n              }\n            }\n\n          }\n\n          \n          if (str.length > 25) str = str.substring(0, 25) + \"...\";\n          this.appendDummyInput()\n            .appendField(new Blockly.FieldImage(`assets/httpImages/${operationKey}.png`,90,20,operationKey))\n            .appendField(`${displayOpKey} ${str}`);\n          var root = self.findRootSite();          \n          if (op.parameters)\n            op.parameters.forEach((it) => {\n              var name= it.name;\n              if(it.required){\n                name +=\"*\"; \n              }\n              if(it.type){\n                name += \":\"+it.type;\n              }\n              else{\n\n                if(it.schema ){\n                  \n                  if(it.schema.enum && (\"$$ref\" in it.schema)){\n                    var s=it.schema[\"$$ref\"].split(\"/\");\n                    name += \"=>\"+s[s.length-1];\n                  }\n                  else if(it.schema.type){\n                    if(it.schema.type=='object'){\n                      var val = it.schema[\"$$ref\"]||'';\n                      if(val.length>0){\n                        val = val.substring(val.lastIndexOf(\"/\")+1);\n                        name+=\":\"+ val;\n                      }\n\n                    }\n                    else{\n                      name += \":\"+it.schema.type;\n                    }\n                  }\n                }\n              }\n              this.appendValueInput(`val_${it.name}`).appendField(name);\n            });\n          if (op.requestBody) {\n            var type=\"\";\n            if(op.requestBody.content)\n              {\n                var jsonResp= op.requestBody.content['application/json'];\n                if(jsonResp && jsonResp.schema){\n                  var ref=jsonResp.schema[\"$$ref\"];\n                  if(ref){\n                    type = \"=>\"+ref.substring(ref.lastIndexOf(\"/\")+1);\n                     //var schema=self.openApiDocument.components.schemas[ref.substring(ref.lastIndexOf(\"/\")+1)];\n                    // if(schema){\n                    //   var properties=self.findProperties(schema);\n                    //   properties.forEach((it)=>{\n                    //     this.appendValueInput(`val_${it.key}`).appendField(it.key);\n                    //   });\n                    // }\n                  }\n\n                }\n              }\n            this\n              .appendValueInput('val_values')\n              .appendField('values' + type)\n              .setCheck();\n              \n              \n          }\n          this.appendValueInput('override_Host') \n              .appendField(\"override Host\");\n          \n          this.appendValueInput('override_Port') \n              .appendField(\"override Port\");\n          // this.appendValueInput('override_Port')\n          //     .appendField(\"override Port\");\n          this.setTooltip(`${operationKey} ${root}${key}`);\n          this.setOutput(true, \"\");\n        },\n      };\n      javaScript[blocklyTypeName] = function (block) {\n        //https://netcoreblockly.herokuapp.com/blocklyAPIFunctions?v=version\n        //https://netcoreblockly.herokuapp.com/blockly.html?dom=20211115121043\n        // console.log(blocklyTypeName);\n        const ORDER_NONE = 99;\n        const ORDER_ATOMIC = 0;\n        var path = self.openApiDocument.paths[key];\n        var operation = path[operationKey];\n        // console.log('a' , key);\n        // console.log('a' , operationKey);\n        // console.log('b',path);\n        //  console.log('b',operation);\n        // console.log('c',operation.parameters);\n        var parameters = [];\n        if (\"parameters\" in operation) {\n          parameters = operation.parameters;\n        }\n        var hasBody=false;\n        var hasBodyParameter=parameters.filter(it=>it.in=='body').length>0;\n        if(hasBodyParameter || ('requestBody' in operation)){\n          hasBody=true;\n        }\n      //   if (blocklyTypeName.indexOf(\"RestWithArgs\") > 0) {\n          \n      //     console.log(parameters);\n      //  }\n        var obj = {};\n        var objBody = {};\n        if(hasBody){\n          obj['val_values'] = javaScript.valueToCode(block, 'val_values', /*javaScript.*/ORDER_ATOMIC);\n          objBody['val_values'] =obj['val_values'];\n        }\n        parameters.forEach((it) => {\n          //code +=`\n          obj[`val_${it.name}`] = javaScript.valueToCode(\n            block,\n            `val_${it.name}`,\n            /*javascript.*/ ORDER_ATOMIC\n          );\n          //`;\n        });\n\n        var parameterFunctionDefinition = parameters.map((it) => it.name );\n        // console.log(parameterFunctionDefinition);\n        if(hasBody & !hasBodyParameter){          \n            parameterFunctionDefinition.push(\"values\");\n        }\n        parameterFunctionDefinition.push(\"extraData\");\n        var callingFunctionDefinition = parameters.map(\n          (it) =>\"${\" + `obj['val_${it.name}']` +\"}\" + \",\"\n        );\n        \n        \n        callingFunctionDefinition += \"1\"; //maybe later we use for logging\n        var code = \"function(\";\n        code += parameterFunctionDefinition.join(\",\");\n        code += \"){\\n\";\n        code +=`var rootSite=\"`+self.findRootSite()+`\";\\n`;\n        // code +=\"window.alert(JSON.stringify(extraData));\\n\";\n        code +='if(extraData){\\n';\n        code +='if(extraData.url && extraData.url.host && extraData.url.host.length>0 ){\\n';\n        code +='rootSite =  changeHost(rootSite, extraData.url.host);\\n';//it is  wrapper  for new  url\n        code +=\"};\\n\";\n        // code +=\"\\n\";\n        // code +=\"window.alert('a'+extraData.url.port.toString().length);\";\n        // code +=\"\\n\";\n        code +='if(extraData.url && extraData.url.port && extraData.url.port.toString().length>0 ){\\n';\n        code +='rootSite  =changePort(rootSite , extraData.url.port);\\n';\n        code +='};\\n';\n        \n        code +='};\\n';\n        //  console.log(\"basepath\",self.basePath);\n        code += 'var strUrl =rootSite +\"'+ self.basePath  + key + '\";\\n';\n        var paramsQuery = parameters.filter((it) => it.in == \"query\");\n        if(paramsQuery.length>0){\n          code += 'strUrl+=\"?\";\\n;';\n          var data= paramsQuery.map(it=>`${it.name}=`+\"{\" + it.name+\"}\") .join(\"&\");\n          // console.log(data);\n          // console.log('strUrl += \"'+data+'\";'); \n          code += 'strUrl += \"'+data+'\";\\n;';\n        }\n\n        var replaceUrl = parameters\n          .filter((it) => it.in == \"path\" || it.in == \"query\")\n          //.map((it) => `strUrl = strUrl.replace(\"{${it.name}}\",${it.name});`)\n          .map((it) => `\n          //this gives error cannot read property 'call' of undefined in acorn\n          //strUrl = strUrl.replace(\"{${it.name}}\",${it.name});\n          {\n            var replaceFInd = \"{${it.name}}\";\n            var index= strUrl.indexOf(replaceFInd);\n            if(index>=0){\n              var strUrlReplace = strUrl.substring(0,index)+ ${it.name} + strUrl.substring(index+replaceFInd.length);\n              strUrl = strUrlReplace;\n            }\n\n          };`)\n          ;\n        code += replaceUrl.join(\"\\n\");\n\n        code +=`\\n{var res= ${operationKey}Xhr(strUrl`;\n        if(hasBody) {\n          var values=\"values\";\n          if(hasBodyParameter){\n            values= parameters.filter(it=>it.in=='body')[0].name;\n          }\n          code += `,JSON.stringify(${values})`;\n        }\n        code +=`);\\n`;\n        code +=\"var resJS=JSON.parse(res);\\n\";\n        code +=\"if(resJS.statusOK) return resJS.text;\\n\"\n        code +=\"errHandler(res);\\n}\\n\";\n        //code +=\";}\\n\";\n\n        // code += \"\\nreturn strUrl;\\n\";\n\n        code += `}`;\n        code +=\"(\";\n        parameters.forEach((it) => {\n          code += obj[`val_${it.name}`]+\",\";\n        });\n        if(hasBody &!hasBodyParameter){\n          code += objBody['val_values']+\",\";\n        }\n        // if(hasBody)\n        //   code +=`${JSON.stringify(objBody)}`;\n        // else\n        var urlReplace=\"url:{notImportant:1\";\n        var override_Http = javaScript.valueToCode(block, 'override_Host', /*javascript.*/ ORDER_ATOMIC);\n        override_Http = override_Http||'';\n        //window.alert('x'+override_Http);\n        if(override_Http.length>0)\n          urlReplace+=`,host:${override_Http}`;\n        \n        var override_Port = javaScript.valueToCode(block, 'override_Port', /*javascript.*/ ORDER_ATOMIC);\n        override_Port= override_Port||'';\n        //window.alert('x'+override_Http);\n        if(override_Port.length>0)\n          urlReplace+=`,port:${override_Port}`;\n  \n\n        // var override_PortHttp = javaScript.valueToCode(block, 'override_Port ', /*javascript.*/ ORDER_ATOMIC);\n        // window.alert('x'+override_PortHttp);\n        // override_PortHttp= override_PortHttp ||'';\n        // if(override_PortHttp.length>0)\n        //   urlReplace+=`,port:${override_PortHttp}`;//extra parameter for later\n        \n          urlReplace+=\"}\";\n\n          code +=`{${urlReplace}}\\n`;\n\n        code +=\")\";\n\n        //var code =`{GenerateGet(actionInfo)}({argsXHR})`;\n        //console.log(code);\n        // if (blocklyTypeName.indexOf(\"MathDivideRest\") > 0) {\n        //   console.log(code);\n        //   // debugger;\n        // }\n\n        return [code, /*javaScript.*/ ORDER_NONE];\n      };\n    };\n  }\n  GenerateBlock(schema, key) {\n    var self = this;\n    var blocklyTypeName = key;\n    var props = \"\";\n    var objPropString = self.findProperties(schema);\n\n    return function (blocks, javaScript) {\n      //   console.log(blocklyTypeName);\n      \n      blocks[blocklyTypeName] = {\n        init: function () {\n          //this.setInputsInline(true);\n         \n          var isEnum=false;\n          var arrValue = [];\n          if(schema.enum){\n            isEnum=true;\n            var keys= Object.keys(schema.enum);\n            if(schema['x-enumNames']){\n              arrValue = keys.map((it)=>{\n                return [schema['x-enumNames'][it],it];\n              });\n            }\n            else\n              arrValue=keys.map((it)=>{\n                return [schema.enum[it],it];\n              });\n           \n          }\n          \n          var b= this.appendDummyInput()\n              .appendField(key);\n          \n          if(isEnum){\n            arrValue= arrValue.map((it)=>[it[0].toString(),it[1].toString()]);                     \n            b.appendField( new Blockly.FieldDropdown(arrValue),`val_${key}`);\n            \n          }\n          else{\n          //{tooltipAndpropsDef.propsDef}\n          //console.log('init', objPropString);\n          objPropString.forEach((item) => {\n            //var t = self.TranslateToBlocklyType(key.type);\n              var name=item.key;\n              if(item.value.nullable && item.value.nullable==false){\n                name +=\"*\";\n              } \n              if(item.value?.type){\n                var val=item.value.type||'';\n                if(val == \"object\"){\n                  // console.log(item);\n                  var val1= item.value[\"$$ref\"]||'';\n                  if(val1.length>0){\n                    val = val1.substring(val1.lastIndexOf(\"/\")+1);\n                  }\n                }\n\n                name+=\":\"+val;\n                \n              }\n              if(item.value['$ref']){\n                var nameRef=item.value['$ref'].replaceAll(\"#/components/schemas/\",\"\");\n                name+=\"->\"+nameRef;\n              }\n            this.appendValueInput(`val_${item.key}`)\n              //   .setCheck('{property.PropertyType.TranslateToNewTypeName()}')\n              .appendField(`${name}`);\n          });\n        }\n          //this.setTooltip(`${this.swaggerUrl}`);\n          this.setOutput(true, blocklyTypeName);\n        },\n      };\n\n      javaScript[blocklyTypeName] = function (block) {\n        {\n          //console.log(blocklyTypeName, self.openApiDocument);\n          // var actualSchema = self.openApiDocument.components.schemas[blocklyTypeName];\n          // console.log(blocklyTypeName, actualSchema);\n          \n          var isEnum=false;\n          \n          if(schema.enum){\n            isEnum=true;\n          }\n          \n          var objPropStringFound = self.findProperties(schema);\n          //console.log(blocklyTypeName, objPropStringFound);\n          const ORDER_NONE = 99;\n          const ORDER_ATOMIC = 0;\n          var code = \"\";\n          var objPropString = [];\n          objPropStringFound.forEach((it) => {\n            let val = javaScript.valueToCode(\n              block,\n              `val_${it.key}`,\n              /*javaScript.*/ ORDER_ATOMIC\n            );\n            //console.log('found ' + val, val);\n            if (val === \"\") {\n              val = \"null\";\n            }\n            if (val == null) {\n              val = \"null\";\n            }\n            objPropString.push(`\"${it.key}\\\":${val}`);\n          });\n          var code = \"{ \" + objPropString.join(\",\") + \" }\";\n\n          if(isEnum){           \n            var dropdown_name = block.getFieldValue(`val_${key}`);                    \n            code = dropdown_name;            \n          }\n          //console.log(code);\n          return [code, /*javaScript.*/ ORDER_NONE];\n        }\n      };\n    };\n  }\n\n  TranslateToBlocklyType(t) {\n    if (t == \"integer\") return \"Number\";\n    if (t == \"string\") return \"String\";\n\n    if (t == \"bool\") return \"Boolean\";\n\n    if (t == \"array\") return \"Array\";\n    console.error(\"not found TranslateToBlocklyType item\" + t);\n    return \"not found type\" + t;\n  }\n}\nmodule.exports = BlocklyReturnSwagger;\n","// exports.printMsg = function() {\n//     window.alert(\"This is a message from the demo package\");\n//   }\n\n// exports.filter1={\n//   \"asd\":\"asdasd\"\n// }\n\nmodule.exports = {\n  \n  parseSwagger: require('./parseSwagger'),\n  parseData: require('./blocklySwaggerData')\n  \n};","// import parseSwaggerDocumentation from '@api-platform/api-doc-parser/lib/swagger/parseSwaggerDocumentation';\n// import parseOpenApi3Documentation from '@api-platform/api-doc-parser/lib/openapi3/parseOpenApi3Documentation';\n\n\nexports.parseSwagger =async function(swaggerUrl) {\n    // const SwaggerParser = require(\"@apidevtools/swagger-parser\");\n    const BlocklyReturnSwagger= require('./blocklySwaggerData');\n    var b=new BlocklyReturnSwagger(swaggerUrl);\n    var result=[];\n    \nconst SwaggerParser = require('@api-platform/api-doc-parser/lib/openapi3/parseOpenApi3Documentation');\n    var q= await SwaggerParser.default(swaggerUrl);\n    var r  = q.response;    \n    if(r.components?.schemas){\n        Object.keys(r.components.schemas).forEach(function(key) {\n            // console.log(key);   \n            var schema = r.components.schemas[key];            \n            result.push(GenerateBlock(schema,key));\n            \n        });\n        };\n        return result;\n    };\n\nfunction GenerateBlock(schema,key){\n    var blocklyTypeName=key;\n\n    if(schema.properties){\n        Object.keys(schema.properties).forEach(key => {\n            var t = TranslateToBlocklyType(schema.properties[key].type);\n            \n        });\n    }\n return function(blocks,javascript){\n    // console.log(blocklyTypeName);\n    blocks[blocklyTypeName] = {\n        init: function() {\n//this.setInputsInline(true);\n            this.appendDummyInput()\n                .appendField(key);\n            //{tooltipAndpropsDef.propsDef}\n            //this.setTooltip('{tooltipAndpropsDef.tooltip}');\n\n            this.setOutput(true,blocklyTypeName);\n                }  \n        };;\n }\n}\n\nfunction TranslateToBlocklyType(t){\n        \n           if (t == \"integer\") \n                return \"Number\";\n            if (t == \"string\")\n                return \"String\";\n\n            if (t == \"bool\")\n                return \"Boolean\";\n\n            if (t == \"array\")\n                return \"Array\";\n\n            return \"not found type\" +t;\n           \n        }\n\nexports.parseSwagger1 = function(swaggerUrl) {\n    // const SwaggerParser = require(\"@apidevtools/swagger-parser\");\nconst SwaggerParser = require('@api-platform/api-doc-parser/lib/openapi3/parseOpenApi3Documentation');\n    return SwaggerParser.default(swaggerUrl);\n} \n","/* (ignored) */"],"names":["ViewContainerRef","i0","BlocklyStudioComponent","constructor","fooInjector","resolver","addTab","numbers","push","length","selectedTabIndex","changeSelected","index","data","filter","it","loadBar","then","ngAfterViewInit","b","factory","resolveComponentFactory","DisplayBlocklyComponent","vcr","components","_a","get","createComponent","e","console","error","ngOnInit","selectors","viewQuery","ctx","Blockly","BlocklyJavaScript","ContentHighlight","bs","bh","DemoBlocks","SwaggerParser","introJs","Chart","catchError","fromEvent","FindSavedBlocksComponent","ctx_r4","ctx_r5","ctx_r6","ctx_r7","ShowCodeAndXML","tabulator","DetailsApp","loadDemo","ar","ta","snackBar","dialog","theme","language","lineNumbers","ShowNone","myId","id","paramMap","subscribe","params","mustLoadDemoBlock","receiveData","LocalAPI","IsAlive","createIntro","steps","settings","tourSteps","map","title","intro","text","element","document","querySelector","query","undefined","setOptions","exitOnEsc","showStepNumbers","showButtons","doneLabel","skipLabel","showProgress","start","clearOutput","step","showInner","ClearDataGrid","myChart","destroy","el","theHtmlOutput","innerHTML","fullHtmlData","theTextOutput","innerText","fullTextData","ShowText","dt","toString","finishHTMLOutput","ShowHTML","getElementById","ShowChart","getContext","log","st","JSON","parse","type","RunCode","open","self","code","run","latestCode","jsCode","showJSCode","CalculateXMLAndCode","f","initApi","Interpreter","window","alert","stringify","showCodeAndXML","ShowCode","interpreterHelper","createInterpreter","demoWorkspace","ShowOutput","confirm","runCode","AddDataToGrid","duration","FinishGrid","ShowLocalAPI","LoadBlockContent","xml","Xml","textToDom","clearWorkspaceAndLoadFromXml","ShowDemo","getDemoBlock","registerSwaggerBlocksObjects","item","xmlList","fieldXMLObjects","registerSwaggerBlocksAPIControllers","controller","findfieldXMLFunctions","gui","registerSwaggerBlocksAPIAll","fieldXMLFunctions","StartRegister","copyCSV","copyClip","ShowBlocks","dialogRef","afterClosed","result","d","Source","LoadSwagger","parser","parseData","json","prompt","endsWith","LoadSwaggerFromUrl","api","hasError","addToToolboxSwagger","url","name","ParseSwagger","LoadSwaggerFromAPI","swaggerData","i","GenerateBlocks","Blocks","GenerateFunctions","image","opKey","FieldImage","metaBlocks","swaggersUrl","swaggersDict","Map","forEach","key","set","newSwaggerCategories","Array","keys","CategorySwaggerHidden","join","gridElement","initGrid","filterBlocks","definitionBlocks","waitBlocks","defineBlocksWithJsonArray","xhrBlocks","propBlocks","guiBlocks","convertersBlocks","exportFileBlock","createObjectBlocks","Extensions","Mutator","currentDateBlock","dateFromTextBlock","commentBlock","trycatchFinBlock","auth0Blocks","windowsCreds","chartBlock","emailBlocks","htmlblocks","ttsBlock","pianoBlock","customCategs","customCategories","blocks","defaultBlocks","generalBlocks","fieldXML","initialize","SaveBlocks","saveBlocksUrl","saveState","ShowBlocksDefinition","ShowSelection","ShowSomething","ShowXML","workspaceToDom","xml_text","domToPrettyText","showXMLCode","parseTextForBlocks","showBlocksDefinition","js","ret","indexOf","split","block","ShowInnerWorkings","setTimeout","svgResize","Download","saveLoad","DownloadBlocks","changeListener","$event","readThis","target","inputValue","file","files","myReader","FileReader","onloadend","LoadFile","resetInterpreter","readAsText","SaveToLocalAPI","_b","WasAlive","LoadLocalAPI","db","categories","description","_c","SaveBlock","pipe","err","urL","download","swaggerUrl","blocklyDiv","toolboxXML","inject","readOnly","media","trashcan","horizontalLayout","move","scrollbars","drag","wheel","zoom","controls","startScale","maxScale","minScale","scaleSpeed","pinch","toolbox","contentHighlight","init","startBlocks","xmlBlocks","_d","afterTimeout","addChangeListener","evt","isUiEvent","generateCodeAndLoadIntoInterpreter","restoreBlocks","restoreState","myComponent","newCateg","findCategSwaggerFromPaths","sort","nameExistingCategorySwagger","swaggerLoaded","xmlToolbox","replaceCategory","categSwagger","replace","updateToolbox","nameCat","nameCategSwagger","nameAPI","cache","registerToolboxCategoryCallback","loadedCompletely","nr","decls","vars","consts","template","FormControl","combineLatest","startWith","ctx_r11","ctx_r13","ctx_r17","InitiateDemos","loadFromLocalAPI","LoadBlocks","BlocksLocal","Verify","demoBlocks","demos","a","localeCompare","optionsCategories","Set","flatMap","toLocaleLowerCase","optionsBlocks","toLowerCase","filteredOptionsBlocks","myBlocks","valueChanges","value","val","trim","_filter","filteredOptionsCategories","myCategories","demosArray","category","isArray","arrToFilter","filterValue","option","includes","chooseDemo","demo","close","Close","_r0","_r2","Breakpoints","shareReplay","Settings","PrimaryNavigComponent","breakpointObserver","details","observe","Handset","matches","version","latestVersion","footer","_e","navigator","standalone","matchMedia","executeOnDisplayBlockly","func","sendDataToServer","synthPiano","require","exports","workspace","highlightPause","myInterpreter","runner","STATEMENT_PREFIX","addReservedWords","workspaceToCode","resetStepUi","highlightBlock","clearTimeout","nextStep","callBackProgramComplete","newInterpreterConstructor","callBackData","G","I","initApiJS","hasMore","initInterpreterWaitForSeconds","interpreter","globalObject","wrapper","createAsyncFunction","timeInSeconds","callback","setProperty","getCreds","withCredsForDomain","href","creds","pseudoToNative","hostname","startsWith","URL","withCreds","getHeaders","headersForDomain","heads","arrHeaders","doGet","headers","req","XMLHttpRequest","generateDataAndCreds","onreadystatechange","readyState","status","answer","responseText","getAllResponseHeaders","send","exportToFile","nameFile","content","toByte","FileSaver","blob","b64toBlob","Blob","saveAs","b64Data","contentType","sliceSize","byteCharacters","atob","byteArrays","offset","slice","byteNumbers","charCodeAt","byteArray","Uint8Array","displayDateCurrentAsHuman","today","Date","toLocaleDateString","day","month","year","hour","minute","displayDateCurrentAsIso","toISOString","displayDateCurrentAsUnix","now","displayDateFormatted","format","hasSomethingToSend","withCredentials","hasContentType","iHeader","head","setRequestHeader","doPut","objectToPost","doDelete","objectToDelete","doPost","thisClass","createNativeFunction","nativeToPseudo","note","octave","piano","Synth","createInstrument","play","msg","arrayOrString","arr","Object","concat","values","substring","port","voice","rate","pitch","volume","SpeechSynthesisUtterance","speechSynthesis","speak","message","defaultPrompt","res","createPrimitive","blocks_defineBlocksWithJsonArray","javaScript","seconds","Number","getFieldValue","TagsFunctions","functionName","tags","BlocklyReturnSwagger","paths","operations","tagsSwagger","findHostNameRegular","nameBlock","appendDummyInput","appendField","setOutput","setColour","setTooltip","setHelpUrl","categ","obj","ORDER_NONE","ops","op","cacheCategSwaggerFromPaths","controllerName","allPaths","openApiDocument","urls","existInfields","str","lastIndexOf","findCategsFromTags","path","objKeys","objKey","tag","normalized","len","closing","nrOps","others","h","replaceAll","max","first","findRootSite","protocol","basePath","showWindowToLoad","vex","registerPlugin","r","q","default","spec","schemas","definitions","schema","objPropString","findProperties","xmlBlockShow","prop","shadow","GenerateShadowField","shadowBlock","GenerateBlock","oo","GenerateFunction","properties","GenerateNameFunction","operation","operationKey","blockShadowType","defaultValue","blocklyTypeName","props","parameters","host","displayOpKey","categs","find","whereFind","remains","root","required","enum","s","appendValueInput","requestBody","jsonResp","ref","setCheck","ORDER_ATOMIC","hasBody","hasBodyParameter","in","objBody","valueToCode","parameterFunctionDefinition","callingFunctionDefinition","paramsQuery","replaceUrl","urlReplace","override_Http","override_Port","isEnum","arrValue","FieldDropdown","nullable","val1","nameRef","objPropStringFound","dropdown_name","TranslateToBlocklyType","t","module","parseSwagger","response","javascript","parseSwagger1"],"sourceRoot":"webpack:///"}